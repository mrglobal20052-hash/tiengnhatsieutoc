<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AzaKanji Tango - Ngày 5: Đếm & Mua sắm</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Nunito', 'Inter', sans-serif; background-color: #f3f4f6; height: 100dvh; overflow: hidden; }
        .ja-text { font-family: 'Noto Sans JP', sans-serif; }
        .scroller { -webkit-overflow-scrolling: touch; overflow-y: auto; }
        .scroller::-webkit-scrollbar { width: 5px; height: 5px; }
        .scroller::-webkit-scrollbar-track { background: transparent; }
        .scroller::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
        
        .vocab-item { transition: all 0.2s; }
        .vocab-item.active { background-color: #eef2ff; border-left: 4px solid #4f46e5; color: #4338ca; padding-left: 0.75rem; }
        
        .shadow-card { transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s; }
        .shadow-card:hover { transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); border-top: 1px solid rgba(255, 255, 255, 0.3); }
        
        .tab-btn.active { background-color: white; color: #312e81; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); }
        .tab-btn { color: #a5b4fc; }
        
        /* Animation Classes */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
        
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .wrong-anim { animation: shake 0.3s ease-in-out; }
        
        @keyframes pop { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .correct-anim { animation: pop 0.3s ease-in-out; }

        /* Stroke Order Styles */
        .stroke-grid-box { border: 1px solid #e5e7eb; background-color: white; position: relative; }
        .stroke-grid-box::after { content: ''; position: absolute; top: 0; left: 50%; width: 1px; height: 100%; background: repeating-linear-gradient(to bottom, #ddd 0, #ddd 4px, transparent 4px, transparent 8px); pointer-events: none; }
        .stroke-grid-box::before { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 1px; background: repeating-linear-gradient(to right, #ddd 0, #ddd 4px, transparent 4px, transparent 8px); pointer-events: none; }
        
        /* Hide stroke paths initially */
        #strokeAnimContainer svg path { opacity: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="flex flex-col text-slate-800">

    <!-- HEADER -->
    <header class="bg-indigo-700 text-white shadow-lg flex-none z-40 relative">
        <div class="container mx-auto px-4 py-2 md:py-3">
            <div class="flex flex-col md:flex-row justify-between items-center gap-3">
                <div class="flex items-center gap-3 cursor-pointer select-none w-full md:w-auto justify-between" onclick="location.reload()">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-torii-gate text-3xl text-white"></i>
                        <div>
                            <h1 class="text-lg md:text-xl font-bold uppercase tracking-wider">AzaKanji Tango</h1>
                            <p class="text-[10px] md:text-xs text-indigo-200">Ngày 5: Đếm & Mua sắm</p>
                        </div>
                    </div>
                    <div class="md:hidden text-xs font-semibold bg-indigo-800 px-3 py-1 rounded-full border border-indigo-500/50"><span id="headerProgress">1/87</span></div>
                </div>
                <div class="flex items-center gap-3 w-full md:w-auto">
                    <div class="flex bg-indigo-900/50 rounded-lg p-1 w-full md:w-auto overflow-x-auto no-scrollbar">
                        <button onclick="switchTab('learn')" id="tab-learn" class="tab-btn active flex-1 md:flex-none px-4 py-1.5 rounded-md text-sm font-bold transition flex items-center justify-center gap-2 whitespace-nowrap"><i class="fas fa-book-open"></i> Học Từ</button>
                        <button onclick="switchTab('quiz')" id="tab-quiz" class="tab-btn flex-1 md:flex-none px-4 py-1.5 rounded-md text-sm font-bold transition flex items-center justify-center gap-2 whitespace-nowrap"><i class="fas fa-keyboard"></i> Kiểm Tra</button>
                        <div class="w-px bg-indigo-600 mx-1"></div>
                        <button onclick="openGrammarList()" class="tab-btn flex-1 md:flex-none px-4 py-1.5 rounded-md text-sm font-bold transition flex items-center justify-center gap-2 whitespace-nowrap"><i class="fas fa-scroll"></i> Cẩm Nang</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative w-full">
        <!-- DESKTOP SIDEBAR -->
        <aside class="hidden md:flex w-72 bg-white border-r border-gray-200 flex-col z-10">
            <div class="p-4 border-b border-gray-100 bg-gray-50">
                <div class="relative">
                    <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"></i>
                    <input type="text" id="searchInput" placeholder="Tìm kiếm từ..." class="w-full pl-9 pr-4 py-2 bg-white border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500 transition-all shadow-sm outline-none">
                </div>
            </div>
            <div id="vocabList" class="flex-1 scroller p-2 space-y-1"></div>
        </aside>

        <!-- MAIN CONTENT (LEARN MODE) -->
        <main id="learn-section" class="flex-1 overflow-y-auto scroller bg-slate-50 p-4 pb-28 w-full scroll-smooth">
            <div class="max-w-3xl mx-auto flex flex-col items-center animate-fade-in">
                <!-- Flashcard -->
                <div class="w-full bg-white rounded-2xl p-6 shadow-sm border border-gray-200 mb-6 relative overflow-hidden group">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-50 to-pink-50 rounded-bl-full -mr-8 -mt-8 z-0 opacity-60 transition-transform group-hover:scale-110 duration-700"></div>
                    <div class="relative z-10 text-center">
                        <div class="inline-flex items-center gap-2 bg-gray-50 px-3 py-1 rounded-full mb-4 border border-gray-100">
                            <span id="wordType" class="text-[10px] font-bold uppercase text-indigo-500">WORD</span>
                            <div class="w-px h-3 bg-gray-300"></div>
                            <span class="text-[10px] text-gray-400 font-mono" id="wordIndex">#1</span>
                        </div>
                        <div class="relative inline-block mb-2">
                            <h2 id="cardKanji" class="text-5xl md:text-6xl font-bold text-gray-800 ja-text tracking-tight cursor-pointer hover:text-indigo-700 transition-colors" onclick="speakCurrent()">ケーキ</h2>
                            <button id="strokeBtn" onclick="openStrokeModal()" class="absolute -right-10 top-2 w-8 h-8 bg-pink-100 text-pink-600 rounded-full flex items-center justify-center shadow-sm hover:bg-pink-200 hover:scale-110 transition-all hidden" title="Tập viết">
                                <i class="fas fa-pen-nib text-sm"></i>
                            </button>
                        </div>
                        <div class="flex flex-col items-center gap-1 cursor-pointer" onclick="speakCurrent()">
                            <span id="cardFurigana" class="text-xl text-indigo-600 font-medium ja-text">ケーキ</span>
                            <span id="cardMeaning" class="text-lg text-gray-500 font-medium">Bánh ngọt</span>
                        </div>
                    </div>
                </div>

                <!-- Shadowing Sentences -->
                <div class="w-full">
                    <div class="flex items-center gap-2 mb-4 px-1">
                        <div class="bg-pink-100 text-pink-600 p-1.5 rounded-lg text-sm"><i class="fas fa-comments"></i></div>
                        <h3 class="font-bold text-gray-700 text-lg">Hội thoại đời sống</h3>
                    </div>
                    <div id="sentenceList" class="space-y-4"></div>
                    
                    <!-- Empty State -->
                    <div id="emptyState" class="hidden flex-col items-center justify-center p-8 text-center bg-white rounded-2xl border border-dashed border-gray-300 text-gray-400">
                        <i class="fas fa-comment-dots text-4xl mb-2 text-gray-300"></i>
                        <p class="text-sm">Chưa có hội thoại mẫu cho từ này.</p>
                        <p class="text-xs text-gray-300 mt-1">(Dữ liệu đang cập nhật)</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- QUIZ MODE -->
        <div id="quiz-section" class="hidden flex-1 w-full overflow-y-auto scroller bg-slate-100 p-4 absolute inset-0 z-20">
            <div class="max-w-2xl mx-auto mt-4 md:mt-10 animate-fade-in">
                <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200">
                    <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white flex justify-between items-center relative overflow-hidden">
                        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10"></div>
                        <div class="relative z-10">
                            <h2 class="text-2xl font-bold flex items-center gap-2"><i class="fas fa-graduation-cap"></i> Thử Thách</h2>
                            <p class="text-indigo-100 text-sm">Nhìn Kanji - Đoán Hiragana</p>
                        </div>
                        <div class="text-right relative z-10 bg-white/10 p-2 rounded-lg backdrop-blur-sm">
                            <div class="text-[10px] text-indigo-100 uppercase font-bold tracking-wider">Điểm số</div>
                            <div class="text-3xl font-bold font-mono" id="score-display">0</div>
                        </div>
                    </div>
                    
                    <div class="p-6 md:p-10 text-center">
                        <div class="mb-8 relative">
                            <div class="text-xs text-gray-400 mb-2 uppercase font-bold tracking-widest">Từ này đọc là gì?</div>
                            <div id="quiz-kanji" class="text-6xl ja-text font-bold text-gray-800 mb-4 transition-all inline-block"></div>
                            <div id="quiz-meaning" class="text-lg text-indigo-600 font-bold mb-2"></div>
                        </div>
                        
                        <div class="relative max-w-md mx-auto mb-8">
                            <input type="text" id="quiz-input" class="w-full text-center text-2xl p-4 border-2 border-gray-300 rounded-xl focus:border-indigo-500 focus:ring-4 focus:ring-indigo-100 outline-none transition-all ja-text placeholder:text-gray-300" placeholder="nhập hiragana..." autocomplete="off">
                        </div>
                        
                        <div id="feedback-area" class="hidden rounded-xl p-5 bg-gray-50 border border-gray-200 text-left mb-6 animate-fade-in shadow-inner">
                            <div id="feedback-title" class="font-bold text-lg mb-2 flex items-center"></div>
                            <div class="text-gray-700 mb-3 flex items-center flex-wrap gap-2">
                                Đáp án đúng: <span id="correct-answer" class="font-bold text-xl text-indigo-600 px-3 py-1 bg-white border border-indigo-100 rounded-lg ja-text shadow-sm"></span>
                                <button onclick="playQuizAudio()" class="text-gray-400 hover:text-indigo-600 transition-colors w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-200 border border-transparent hover:border-gray-300"><i class="fas fa-volume-up"></i></button>
                            </div>
                        </div>
                        
                        <div>
                            <button id="btn-check" onclick="checkAnswer()" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3.5 px-10 rounded-xl shadow-lg transition active:scale-95 text-lg flex items-center justify-center gap-2 mx-auto">
                                <i class="fas fa-check"></i> Kiểm Tra
                            </button>
                            <button id="btn-next" onclick="nextQuestion()" class="hidden w-full md:w-auto bg-gray-800 hover:bg-gray-900 text-white font-bold py-3.5 px-10 rounded-xl shadow-lg transition active:scale-95 text-lg flex items-center justify-center gap-2 mx-auto">
                                Câu Tiếp Theo <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MOBILE BOTTOM BAR -->
        <div class="fixed bottom-0 left-0 right-0 glass px-4 py-3 pb-6 z-30 flex items-center justify-between gap-4 md:hidden shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] border-t border-gray-200">
            <button onclick="prevWord()" class="w-12 h-12 rounded-xl bg-white border border-gray-200 text-gray-600 flex items-center justify-center shadow-sm active:bg-gray-50 active:scale-95 transition">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button onclick="toggleDrawer()" class="flex-1 h-12 rounded-xl bg-indigo-600 text-white font-bold flex items-center justify-center shadow-lg gap-2 active:scale-95 transition active:bg-indigo-700">
                <i class="fas fa-list-ul"></i> Danh Sách
            </button>
            <button onclick="nextWord()" class="w-12 h-12 rounded-xl bg-white border border-gray-200 text-gray-600 flex items-center justify-center shadow-sm active:bg-gray-50 active:scale-95 transition">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- MODAL: GRAMMAR LIST -->
    <div id="grammarListModal" class="fixed inset-0 z-[60] hidden flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-gray-900/70 backdrop-blur-sm transition-opacity opacity-0" id="grammarListBackdrop" onclick="closeModal('grammarListModal')"></div>
        <div class="bg-white rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl transform transition-all scale-95 opacity-0 flex flex-col max-h-[85vh]" id="grammarListPanel">
            <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-indigo-50 rounded-t-2xl">
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-600 text-white p-2 rounded-lg shadow-sm"><i class="fas fa-book"></i></div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-800">Cẩm Nang Ngữ Pháp</h3>
                        <p class="text-xs text-gray-500">Thư viện ngữ pháp Day 5 (N5 - N4)</p>
                    </div>
                </div>
                <button onclick="closeModal('grammarListModal')" class="w-8 h-8 rounded-full hover:bg-white flex items-center justify-center text-gray-500 transition-colors"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-6 overflow-y-auto scroller bg-slate-50">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="grammarGrid"></div>
            </div>
            <div class="p-4 border-t border-gray-100 bg-white rounded-b-2xl flex justify-end">
                <button onclick="closeModal('grammarListModal')" class="px-6 py-2 bg-gray-800 text-white font-bold rounded-full text-sm transition active:scale-95 shadow-lg hover:bg-gray-700">Đã Hiểu</button>
            </div>
        </div>
    </div>

    <!-- MODAL: GRAMMAR DETAIL -->
    <div id="detailGrammarModal" class="fixed inset-0 z-[90] hidden flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity opacity-0" id="detailGrammarBackdrop" onclick="closeModal('detailGrammarModal')"></div>
        <div class="bg-white rounded-2xl w-full max-w-md relative z-10 shadow-2xl transform transition-all scale-95 opacity-0 flex flex-col" id="detailGrammarPanel">
            <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50/50 rounded-t-2xl">
                <div class="flex items-center gap-2">
                    <div class="bg-indigo-100 p-1.5 rounded-lg text-indigo-600"><i class="fas fa-info-circle"></i></div>
                    <h3 class="text-lg font-bold text-gray-800">Giải thích Ngữ pháp</h3>
                </div>
                <button onclick="closeModal('detailGrammarModal')" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times"></i></button>
            </div>
            <div class="p-6">
                <div class="bg-indigo-50 border border-indigo-100 rounded-xl p-3 text-center mb-4 shadow-sm">
                    <code class="text-lg font-bold text-indigo-700 font-mono" id="dgFormula"></code>
                </div>
                <div id="dgExplanation" class="text-gray-600 text-sm mb-4 space-y-3 leading-relaxed"></div>
            </div>
        </div>
    </div>

    <!-- MODAL: KANJI STROKE -->
    <div id="strokeModal" class="fixed inset-0 z-[80] hidden flex items-center justify-center px-4">
        <div class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm transition-opacity opacity-0" id="strokeBackdrop" onclick="closeModal('strokeModal')"></div>
        <div class="bg-white rounded-2xl w-full max-w-5xl relative z-10 shadow-2xl transform transition-all scale-95 opacity-0 flex flex-col max-h-[90vh]" id="strokePanel">
            <div class="p-4 border-b border-gray-100 flex justify-between items-center bg-pink-50 rounded-t-2xl">
                <h3 class="text-lg font-bold text-pink-700 flex items-center gap-2"><i class="fas fa-pen-nib"></i> Tập Viết & Chi Tiết Kanji</h3>
                <button onclick="closeModal('strokeModal')" class="w-8 h-8 rounded-full hover:bg-white flex items-center justify-center text-gray-500 transition-colors"><i class="fas fa-times text-lg"></i></button>
            </div>
            <div class="p-6 overflow-y-auto scroller bg-slate-50 flex-1">
                <div id="strokeTabs" class="flex justify-center gap-2 mb-6 flex-wrap"></div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="flex flex-col gap-6 text-center">
                        <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 relative">
                            <p class="text-xs text-gray-400 mb-2 font-bold uppercase tracking-wider">Mô phỏng nét viết</p>
                            <div id="strokeAnimContainer" class="w-48 h-48 mx-auto bg-white border border-gray-300 relative stroke-grid-box flex items-center justify-center rounded-lg cursor-pointer" onclick="replayStrokeAnimation()"></div>
                            <button onclick="replayStrokeAnimation()" class="absolute top-4 right-4 bg-pink-50 text-pink-600 w-8 h-8 rounded-full flex items-center justify-center hover:bg-pink-100 transition shadow-sm z-10"><i class="fas fa-redo text-sm"></i></button>
                            <p class="text-[10px] text-gray-400 mt-2">Nhấn vào ô để chạy lại</p>
                        </div>
                        <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 text-left">
                            <p class="text-xs text-gray-400 mb-3 font-bold uppercase tracking-wider text-center">Thứ tự từng nét</p>
                            <div id="strokeGridContainer" class="flex flex-wrap gap-2 justify-center"></div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 flex flex-col h-full text-left">
                        <div id="kanjiDetailContent">
                            <div class="flex items-center justify-between mb-6 border-b border-gray-100 pb-4">
                                <div><h2 id="detailKanji" class="text-6xl font-bold text-gray-800 ja-text mb-1 leading-none"></h2><div class="text-xs font-bold bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded inline-block mt-2" id="detailHanViet"></div></div>
                                <div class="text-right"><div class="text-2xl font-bold text-gray-600 capitalize" id="detailMeaning"></div></div>
                            </div>
                            <!-- Radicals -->
                            <div class="mb-4 bg-indigo-50 p-3 rounded-lg border border-indigo-100">
                                <span class="text-xs font-bold text-indigo-500 uppercase block mb-1"><i class="fas fa-layer-group mr-1"></i> Bộ thủ (Thành phần)</span>
                                <span class="text-sm font-medium text-indigo-900" id="detailRadicals">...</span>
                            </div>
                            <!-- On/Kun -->
                            <div class="grid grid-cols-2 gap-4 mb-6">
                                <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 flex justify-between items-center group cursor-pointer" onclick="document.getElementById('btnPlayOn').click()"><div class="flex flex-col"><span class="text-xs font-bold text-gray-400 uppercase">On</span><span class="text-lg font-bold text-indigo-600 ja-text" id="detailOn"></span></div><button id="btnPlayOn" class="text-indigo-300 group-hover:text-indigo-600"><i class="fas fa-volume-up"></i></button></div>
                                <div class="bg-slate-50 p-3 rounded-lg border border-slate-100 flex justify-between items-center group cursor-pointer" onclick="document.getElementById('btnPlayKun').click()"><div class="flex flex-col"><span class="text-xs font-bold text-gray-400 uppercase">Kun</span><span class="text-lg font-bold text-pink-600 ja-text" id="detailKun"></span></div><button id="btnPlayKun" class="text-pink-300 group-hover:text-pink-600"><i class="fas fa-volume-up"></i></button></div>
                            </div>
                            <!-- Tips -->
                            <div class="space-y-4 mb-6">
                                <div class="bg-green-50 p-4 rounded-lg border border-green-100">
                                    <h4 class="text-sm font-bold text-green-800 mb-2 flex items-center gap-2"><i class="fas fa-image"></i> Ghi nhớ hình ảnh</h4>
                                    <p class="text-sm text-green-700 leading-relaxed" id="detailTipImg"></p>
                                </div>
                                <div class="bg-orange-50 p-4 rounded-lg border border-orange-100">
                                    <h4 class="text-sm font-bold text-orange-800 mb-2 flex items-center gap-2"><i class="fas fa-music"></i> Mẹo nhớ âm thanh</h4>
                                    <div class="space-y-2">
                                        <p class="text-sm text-orange-700 flex items-start gap-2"><span class="font-bold text-[10px] bg-orange-200 px-1.5 py-0.5 rounded text-orange-800 min-w-[30px] text-center mt-0.5">ON</span> <span id="detailTipSoundOn"></span></p>
                                        <p class="text-sm text-orange-700 flex items-start gap-2"><span class="font-bold text-[10px] bg-pink-200 px-1.5 py-0.5 rounded text-pink-800 min-w-[30px] text-center mt-0.5">KUN</span> <span id="detailTipSoundKun"></span></p>
                                    </div>
                                </div>
                            </div>
                            <!-- Related Words -->
                            <div>
                                <h4 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-3">Từ vựng liên quan</h4>
                                <div class="space-y-2" id="detailWords"></div>
                            </div>
                        </div>
                        <div id="kanjiDetailEmpty" class="hidden h-full flex flex-col items-center justify-center text-center p-4 text-gray-400"><i class="fas fa-book-open text-4xl mb-3 opacity-30"></i><p class="text-sm">Chưa có dữ liệu chi tiết cho chữ Hán này.</p></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 1. GRAMMAR REPO (N5 - N4) ---
        const grammarRepo = {
            "o_kudasai": { title: "Hãy cho tôi...", formula: "N + を + ください", desc: "N5: Yêu cầu người khác đưa/làm gì cho mình (khi mua hàng, gọi món).", ex: "リンゴをください。" },
            "counter": { title: "Số đếm (Vật)", formula: "N + が + SL + あります", desc: "N5: Cách đếm đồ vật chung (hitotsu, futatsu...).", ex: "みかんが五つあります。" },
            "counter_mai": { title: "Đếm vật mỏng", formula: "N + が + SL(枚) + あります", desc: "N5: Đếm giấy, áo, đĩa... bằng 'mai'.", ex: "シャツを二枚買いました。" },
            "counter_dai": { title: "Đếm máy móc", formula: "N + が + SL(台) + あります", desc: "N5: Đếm xe, máy tính... bằng 'dai'.", ex: "自転車が一台あります。" },
            "counter_kai": { title: "Đếm số lần", formula: "V(từ điển) + ことが + SL(回) + ある", desc: "N5/N4: Đếm tần suất hành động.", ex: "一週間に一回映画を見ます。" },
            "dono_gurai": { title: "Bao lâu/Bao nhiêu", formula: "どのぐらい + V", desc: "N5: Hỏi về khoảng thời gian hoặc số lượng.", ex: "どのぐらいかかりますか。" },
            "kakari_masu": { title: "Tốn (Tiền/Thời gian)", formula: "Time/Money + かかります", desc: "N5: Biểu thị sự tiêu tốn thời gian hoặc tiền bạc.", ex: "3時間かかります。" },
            "period_ni": { title: "Tần suất", formula: "Period + に + SL + 回/個...", desc: "N5: Làm gì bao nhiêu lần trong một khoảng thời gian.", ex: "1ヶ月に2回映画を見ます。" },
            "dake": { title: "Chỉ", formula: "N + だけ", desc: "N5: Giới hạn phạm vi (chỉ có cái này, không có cái khác).", ex: "休みは日曜日だけです。" },
            "ga_imasu": { title: "Có (Người/Động vật)", formula: "N + が + います", desc: "N5: Sự tồn tại của vật sống.", ex: "兄弟が二人います。" },
            "ga_arimasu": { title: "Có (Đồ vật)", formula: "N + が + あります", desc: "N5: Sự tồn tại của vật không sống.", ex: "車があります。" },
            "ni_iku": { title: "Đi để làm gì", formula: "V(bỏ masu)/N + に行く", desc: "N5: Mục đích của chuyển động.", ex: "日本へ勉強に行きます。" },
            "mashou": { title: "Cùng làm nhé", formula: "Vましょう", desc: "N5: Rủ rê, đề nghị.", ex: "帰りましょう。" },
            "te_mo_ii": { title: "Làm...được không", formula: "Vてもいい", desc: "N5: Xin phép làm gì đó.", ex: "ここに入ってもいいですか。" },
            "te_kudasai": { title: "Hãy...", formula: "Vてください", desc: "N5: Yêu cầu, nhờ vả lịch sự.", ex: "書いてください。" },
            "ta_form": { title: "Thể quá khứ ngắn", formula: "Vた", desc: "N5: Dùng trong văn nói thân mật để kể lại chuyện quá khứ.", ex: "ご飯食べた？" },
            "nai_de": { title: "Xin đừng...", formula: "Vないで + ください", desc: "N5: Yêu cầu ai đó không làm gì.", ex: "ここで写真を撮らないでください。" },
            "volitional": { title: "Thể ý định", formula: "Vよう", desc: "N4: Dùng trong văn nói thân mật để rủ rê.", ex: "行こう！" },
            "tara_dou": { title: "Thử...xem sao", formula: "Vたらどう", desc: "N4: Đưa ra lời khuyên.", ex: "やってみたらどう？" },
            "wa_desu": { title: "Cấu trúc định danh", formula: "N1 は N2 です", desc: "N5: Khẳng định N1 là N2.", ex: "これはペンです。" },
            "yori_hodo": { title: "So sánh hơn/kém", formula: "N1 は N2 より Adj / N1 は N2 ほど Adj(nai)", desc: "N4/N3: So sánh mức độ giữa 2 đối tượng.", ex: "今日は昨日より暑いです。" },
            "toshite": { title: "Với tư cách là", formula: "N + として", desc: "N3: Biểu thị lập trường, tư cách.", ex: "医者として働いています。" },
            "zaru_wo_enai": { title: "Đành phải", formula: "Vない + ざるを得ない", desc: "N2: Không muốn nhưng bắt buộc phải làm.", ex: "嫌だが、行かざるを得ない。" },
            "te_simau": { title: "Hoàn thành/Lỡ làm", formula: "Vてしまう", desc: "N4: Làm xong hết hoặc lỡ làm điều không mong muốn.", ex: "忘れてしまいました。" },
            "te_form_cause": { title: "Vì...nên...", formula: "Vて / Adj(i)くて", desc: "N4: Chỉ nguyên nhân, lý do.", ex: "風邪を引いて、休みました。" },
            "you_ni": { title: "Cố gắng làm gì", formula: "Vる + ようにする", desc: "N3: Biểu thị nỗ lực tạo thói quen.", ex: "野菜を食べるようにしています。" },
            "tara": { title: "Nếu/Sau khi", formula: "Vたら", desc: "N4: Điều kiện giả định hoặc hành động nối tiếp.", ex: "雨が降ったら、行きません。" },
            "te_iru": { title: "Đang/Trạng thái", formula: "Vている", desc: "N5/N4: Đang diễn ra hoặc kết quả trạng thái.", ex: "帽子をかぶっています。" },
            "koto_ga_aru": { title: "Đã từng", formula: "Vた + ことが（ある）", desc: "N4: Kinh nghiệm trong quá khứ.", ex: "日本へ行ったことがあります。" },
            "nagara": { title: "Vừa... vừa...", formula: "V(bỏ masu) + ながら", desc: "N4: Hai hành động diễn ra đồng thời.", ex: "歩きながら話します。" },
            "tai": { title: "Muốn", formula: "Vたい", desc: "N5: Mong muốn làm gì đó.", ex: "水が飲みたいです。" },
            "to_omou": { title: "Nghĩ rằng", formula: "～と 思います", desc: "N4: Biểu thị suy nghĩ, phỏng đoán.", ex: "明日雨が降ると思います。" },
            "ba_yokatta": { title: "Giá mà...", formula: "Vば + よかった", desc: "N3: Hối tiếc về việc đã không làm.", ex: "もっと勉強すればよかった。" },
            "sou_da_visual": { title: "Trông có vẻ", formula: "Adj(bỏ i/na) + そうです", desc: "N4: Phỏng đoán dựa trên thị giác.", ex: "おいしそうです。" },
            "sou_da_hearsay": { title: "Nghe nói là", formula: "Vru/Adj + そうです", desc: "N4: Truyền đạt lại thông tin nghe được.", ex: "雨が降るそうです。" },
            "te_mo": { title: "Cho dù/Cũng được", formula: "Vても", desc: "N4: Nhượng bộ hoặc cho phép.", ex: "高くても買います。" },
            "shi_shi": { title: "Vừa...vừa... (Liệt kê)", formula: "～し、～し", desc: "N4: Liệt kê lý do, tính chất.", ex: "安いし、おいしいです。" },
            "koto_ni_suru": { title: "Quyết định (Chủ quan)", formula: "Vる + ことにする", desc: "N3: Tự mình quyết định làm gì.", ex: "明日から走ることにします。" },
            "v_mashita": { title: "Đã làm (Lịch sự)", formula: "Vました", desc: "N5: Quá khứ lịch sự.", ex: "買いました。" },
            "v_masu": { title: "Sẽ/Thường làm", formula: "Vます", desc: "N5: Thói quen hoặc tương lai.", ex: "毎日起きます。" },
            "nakucha": { title: "Phải... (Văn nói)", formula: "Vなくちゃ", desc: "N3: Dạng rút gọn của Vなければなりません.", ex: "もう行かなくちゃ。" },
            "mono_da": { title: "Hồi tưởng", formula: "Vた + ものだ", desc: "N2: Nhớ lại thói quen trong quá khứ.", ex: "よく遊んだものだ。" },
            "te_kuru": { title: "Đi rồi về/Thay đổi", formula: "Vてくる", desc: "N4: Đi làm gì đó rồi quay lại.", ex: "行ってくる。" },
            "te_morau": { title: "Được làm cho", formula: "Vてもらう", desc: "N4: Được ai đó làm gì cho mình (biết ơn).", ex: "教えてもらった。" },
            "datte": { title: "Nghe nói là...", formula: "～だって", desc: "N3: Văn nói thân mật dùng để trích dẫn lại lời nghe được.", ex: "雨だって。" },
            "to_iwareru": { title: "Được nói là", formula: "～と言われている", desc: "N4: Bị động, chỉ dư luận chung.", ex: "彼は天才だと言われている。" },
            "de_method": { title: "Bằng phương tiện/cách thức", formula: "N + で", desc: "N5: Làm bằng cái gì, bằng cách nào.", ex: "バスで行きます。" },
            "ni_time": { title: "Vào lúc", formula: "Time + に", desc: "N5: Thời điểm diễn ra hành động.", ex: "6時に起きます。" },
            "o_particle": { title: "Trợ từ O", formula: "N + を + V", desc: "N5: Chỉ đối tượng tác động của hành động.", ex: "ご飯を食べます。" },
            "de_place": { title: "Tại (Nơi chốn)", formula: "N(địa điểm) + で + V", desc: "N5: Hành động diễn ra tại địa điểm nào đó.", ex: "スーパーで買い物をします。" },
            "wo_kaimasu": { title: "Mua cái gì", formula: "N + を + 買う", desc: "N5: Hành động mua vật N.", ex: "新しいパソコンを買いました。" },
            "wa_doko": { title: "Ở đâu", formula: "N + は + どこですか", desc: "N5: Hỏi vị trí.", ex: "トイレはどこですか。" },
            "adverb": { title: "Phó từ (Tính từ)", formula: "Adj(i)く / Adj(na)に + V", desc: "N5/N4: Biến tính từ thành phó từ bổ nghĩa cho động từ.", ex: "早く起きます。" },
            "ndesu": { title: "Giải thích/Nhấn mạnh", formula: "V/Adj + んです", desc: "N4: Giải thích lý do, tình huống.", ex: "お腹が痛いんです。" },
            "nan_de": { title: "Tại sao/Bằng gì", formula: "何で", desc: "N5: Hỏi lý do hoặc phương tiện.", ex: "何で来ましたか。" },
            "yori": { title: "So sánh hơn", formula: "N1 は N2 より Adj", desc: "N5: N1 tính chất hơn N2.", ex: "車は自転車より速いです。" },
            "bakari": { title: "Toàn là...", formula: "N + ばかり", desc: "N3: Chỉ toàn là cái đó.", ex: "肉ばかり食べてはいけません。" },
            "hodo": { title: "Đến mức", formula: "V/N + ほど", desc: "N3: So sánh mức độ.", ex: "死ぬほど疲れた。" },
            "koto_wa_nai": { title: "Không cần phải", formula: "Vる + ことはない", desc: "N2: Không cần thiết làm V.", ex: "心配することはないよ。" },
            "yara_yara": { title: "Liệt kê (Nào là... nào là...)", formula: "AやらBやら", desc: "N2: Liệt kê ví dụ (thường hàm ý nhiều, lộn xộn).", ex: "宿題やらバイトやらで忙しい。" },
            "koto_ni_naru": { title: "Quyết định (Khách quan)", formula: "Vる + ことになる", desc: "N3: Được quyết định là.", ex: "来週、日本へ行くことになりました。" },
            "te_simau": { title: "Lỡ/Hoàn thành", formula: "Vてしまう", desc: "N4: Hối tiếc vì lỡ làm hoặc làm xong hết.", ex: "食べてしまった。" }
        };

        // --- 2. VOCABULARY DATA (Day 5: Counters & Shopping) ---
        const vocabData = [
            { "STT": 1, "Kanji": "", "Nghĩa": "Bánh ngọt", "Furigana": "ケーキ", "type": "food", "conv": { "polite": "ケーキを一つください。", "pVi": "Cho tôi một cái bánh ngọt.", "casual": "ケーキ、一つちょうだい。", "cVi": "Cho tớ một cái bánh.", "gIds": ["o_kudasai", "counter"] } },
            { "STT": 2, "Kanji": "", "Nghĩa": "Cả hai", "Furigana": "どちらも", "type": "noun", "conv": { "polite": "どちらも好きです。", "pVi": "Tôi thích cả hai.", "casual": "どっちも好き。", "cVi": "Thích cả hai.", "gIds": [] } },
            { "STT": 3, "Kanji": "掃除します", "Nghĩa": "Dọn dẹp", "Furigana": "そうじします", "type": "verb", "conv": { "polite": "部屋を掃除しました。", "pVi": "Tôi đã dọn phòng.", "casual": "部屋、掃除したよ。", "cVi": "Tớ dọn phòng rồi.", "gIds": ["ta_form"] } },
            { "STT": 4, "Kanji": "働きます", "Nghĩa": "Làm việc", "Furigana": "はたらきます", "type": "verb", "conv": { "polite": "毎日8時間働きます。", "pVi": "Mỗi ngày tôi làm việc 8 tiếng.", "casual": "毎日8時間働く。", "cVi": "Ngày nào cũng làm 8 tiếng.", "gIds": [] } },
            { "STT": 5, "Kanji": "選びます", "Nghĩa": "Chọn", "Furigana": "えらびます", "type": "verb", "conv": { "polite": "好きな方を選んでください。", "pVi": "Hãy chọn cái nào bạn thích.", "casual": "好きな方、選んで。", "cVi": "Chọn cái nào thích đi.", "gIds": ["te_kudasai"] } },
            { "STT": 6, "Kanji": "", "Nghĩa": "Mét", "Furigana": "メートル", "type": "counter", "conv": { "polite": "500メートルぐらい泳げます。", "pVi": "Tôi có thể bơi khoảng 500 mét.", "casual": "500メートルくらい泳げる。", "cVi": "Bơi được tầm 500 mét.", "gIds": [] } },
            { "STT": 7, "Kanji": "", "Nghĩa": "Gram", "Furigana": "グラム", "type": "counter", "conv": { "polite": "肉を200グラムください。", "pVi": "Cho tôi 200 gram thịt.", "casual": "肉、200グラムちょうだい。", "cVi": "Cho 200 gram thịt đi.", "gIds": ["o_kudasai"] } },
            { "STT": 8, "Kanji": "", "Nghĩa": "Tốn (tiền/thời gian)", "Furigana": "かかります", "type": "verb", "conv": { "polite": "時間がかかります。", "pVi": "Tốn thời gian lắm.", "casual": "時間かかるよ。", "cVi": "Mất thời gian đấy.", "gIds": ["kakari_masu"] } },
            { "STT": 9, "Kanji": "", "Nghĩa": "Khoảng", "Furigana": "ぐらい", "type": "noun", "conv": { "polite": "1時間ぐらいかかります。", "pVi": "Mất khoảng 1 tiếng.", "casual": "1時間くらいかかる。", "cVi": "Mất tầm 1 tiếng.", "gIds": ["kakari_masu"] } },
            { "STT": 10, "Kanji": "", "Nghĩa": "Bao lâu", "Furigana": "どのぐらい", "type": "noun", "conv": { "polite": "どのぐらいかかりますか。", "pVi": "Mất bao lâu?", "casual": "どのくらいかかる？", "cVi": "Mất bao lâu thế?", "gIds": ["dono_gurai"] } },
            { "STT": 11, "Kanji": "一つ", "Nghĩa": "1 cái", "Furigana": "ひとつ", "type": "counter", "conv": { "polite": "みかんを一つ食べました。", "pVi": "Tôi đã ăn 1 quả quýt.", "casual": "みかん、一つ食べた。", "cVi": "Ăn 1 quả quýt rồi.", "gIds": ["counter"] } },
            { "STT": 12, "Kanji": "二つ", "Nghĩa": "2 cái", "Furigana": "ふたつ", "type": "counter", "conv": { "polite": "問題が二つあります。", "pVi": "Có 2 vấn đề.", "casual": "問題が二つある。", "cVi": "Có 2 vấn đề.", "gIds": ["ga_arimasu"] } },
            { "STT": 13, "Kanji": "三つ", "Nghĩa": "3 cái", "Furigana": "みっつ", "type": "counter", "conv": { "polite": "三つください。", "pVi": "Cho tôi 3 cái.", "casual": "三つちょうだい。", "cVi": "Cho 3 cái đi.", "gIds": ["o_kudasai"] } },
            { "STT": 14, "Kanji": "四つ", "Nghĩa": "4 cái", "Furigana": "よっつ", "type": "counter", "conv": { "polite": "四つ残っています。", "pVi": "Còn lại 4 cái.", "casual": "四つ残ってる。", "cVi": "Còn 4 cái.", "gIds": ["te_iru"] } },
            { "STT": 15, "Kanji": "五つ", "Nghĩa": "5 cái", "Furigana": "いつつ", "type": "counter", "conv": { "polite": "星が五つ見えます。", "pVi": "Nhìn thấy 5 ngôi sao.", "casual": "星が五つ見える。", "cVi": "Thấy 5 ngôi sao kìa.", "gIds": [] } },
            { "STT": 16, "Kanji": "六つ", "Nghĩa": "6 cái", "Furigana": "むっつ", "type": "counter", "conv": { "polite": "六つ買いました。", "pVi": "Tôi đã mua 6 cái.", "casual": "六つ買った。", "cVi": "Mua 6 cái rồi.", "gIds": ["ta_form"] } },
            { "STT": 17, "Kanji": "七つ", "Nghĩa": "7 cái", "Furigana": "ななつ", "type": "counter", "conv": { "polite": "不思議が七つあります。", "pVi": "Có 7 điều kỳ lạ.", "casual": "不思議が七つある。", "cVi": "Có 7 điều lạ.", "gIds": ["ga_arimasu"] } },
            { "STT": 18, "Kanji": "八つ", "Nghĩa": "8 cái", "Furigana": "やっつ", "type": "counter", "conv": { "polite": "八つに切ってください。", "pVi": "Hãy cắt làm 8 miếng.", "casual": "八つに切って。", "cVi": "Cắt làm 8 đi.", "gIds": ["te_kudasai"] } },
            { "STT": 19, "Kanji": "九つ", "Nghĩa": "9 cái", "Furigana": "ここのつ", "type": "counter", "conv": { "polite": "ここのつ数えてください。", "pVi": "Hãy đếm đến 9.", "casual": "ここのつ数えて。", "cVi": "Đếm đến 9 đi.", "gIds": ["te_kudasai"] } },
            { "STT": 20, "Kanji": "十", "Nghĩa": "10 cái", "Furigana": "とお", "type": "counter", "conv": { "polite": "とおまで数えましょう。", "pVi": "Cùng đếm đến 10 nào.", "casual": "とおまで数えよう。", "cVi": "Đếm đến 10 đi.", "gIds": ["mashou", "volitional"] } },
            { "STT": 21, "Kanji": "", "Nghĩa": "Bao nhiêu cái", "Furigana": "いくつ", "type": "noun", "conv": { "polite": "椅子がいくつありますか。", "pVi": "Có bao nhiêu cái ghế?", "casual": "椅子、いくつある？", "cVi": "Có mấy cái ghế?", "gIds": ["ga_arimasu"] } },
            { "STT": 22, "Kanji": "〜回", "Nghĩa": "Lần", "Furigana": "かい", "type": "counter", "conv": { "polite": "一週間に一回テニスをします。", "pVi": "Tôi chơi tennis 1 lần 1 tuần.", "casual": "週一でテニスする。", "cVi": "Tuần chơi tennis 1 lần.", "gIds": ["period_ni"] } },
            { "STT": 23, "Kanji": "〜台", "Nghĩa": "Cái (máy móc)", "Furigana": "だい", "type": "counter", "conv": { "polite": "車が二台あります。", "pVi": "Có 2 chiếc ô tô.", "casual": "車が二台ある。", "cVi": "Có 2 cái xe.", "gIds": ["counter_dai", "ga_arimasu"] } },
            { "STT": 24, "Kanji": "〜枚", "Nghĩa": "Tờ/tấm", "Furigana": "まい", "type": "counter", "conv": { "polite": "シャツを三枚買いました。", "pVi": "Tôi đã mua 3 cái áo sơ mi.", "casual": "シャツ、三枚買った。", "cVi": "Mua 3 cái áo rồi.", "gIds": ["counter_mai", "ta_form"] } },
            { "STT": 25, "Kanji": "〜本", "Nghĩa": "Cây/chai", "Furigana": "ほん", "type": "counter", "conv": { "polite": "ビールを四本飲みました。", "pVi": "Tôi đã uống 4 chai bia.", "casual": "ビール四本飲んだ。", "cVi": "Uống 4 chai rồi.", "gIds": ["ta_form"] } },
            { "STT": 26, "Kanji": "手紙", "Nghĩa": "Bức thư", "Furigana": "てがみ", "type": "noun", "conv": { "polite": "手紙を出しましたか。", "pVi": "Bạn đã gửi thư chưa?", "casual": "手紙出した？", "cVi": "Gửi thư chưa?", "gIds": ["ta_form"] } },
            { "STT": 27, "Kanji": "", "Nghĩa": "Rác", "Furigana": "ごみ", "type": "noun", "conv": { "polite": "ごみを捨てないでください。", "pVi": "Xin đừng vứt rác.", "casual": "ごみ捨てないで。", "cVi": "Đừng vứt rác.", "gIds": ["nai_de"] } },
            { "STT": 28, "Kanji": "お寺", "Nghĩa": "Chùa", "Furigana": "おてら", "type": "place", "conv": { "polite": "お寺へ行きました。", "pVi": "Tôi đã đi chùa.", "casual": "お寺行った。", "cVi": "Đi chùa rồi.", "gIds": ["ta_form"] } },
            { "STT": 29, "Kanji": "郵便局", "Nghĩa": "Bưu điện", "Furigana": "ゆうびんきょく", "type": "place", "conv": { "polite": "郵便局へ荷物を出しに行きます。", "pVi": "Tôi đi bưu điện để gửi đồ.", "casual": "郵便局へ荷物出しに行く。", "cVi": "Ra bưu điện gửi đồ đây.", "gIds": ["ni_iku"] } },
            { "STT": 30, "Kanji": "", "Nghĩa": "TTTM", "Furigana": "デパート", "type": "place", "conv": { "polite": "デパートで靴を買います。", "pVi": "Tôi mua giày ở trung tâm thương mại.", "casual": "デパートで靴買う。", "cVi": "Mua giày ở TTTM.", "gIds": ["de_place"] } },
            { "STT": 31, "Kanji": "買い物します", "Nghĩa": "Mua sắm", "Furigana": "かいものします", "type": "verb", "conv": { "polite": "週末は買い物します。", "pVi": "Cuối tuần tôi đi mua sắm.", "casual": "週末、買い物する。", "cVi": "Cuối tuần đi mua đồ.", "gIds": [] } },
            { "STT": 32, "Kanji": "ごみを出します", "Nghĩa": "Đổ rác", "Furigana": "ごみをだします", "type": "verb", "conv": { "polite": "朝、ごみを出しました。", "pVi": "Sáng tôi đã đổ rác.", "casual": "朝、ごみ出したよ。", "cVi": "Sáng đổ rác rồi.", "gIds": ["ta_form"] } },
            { "STT": 33, "Kanji": "祈ります", "Nghĩa": "Cầu nguyện", "Furigana": "いのります", "type": "verb", "conv": { "polite": "平和を祈ります。", "pVi": "Tôi cầu nguyện cho hòa bình.", "casual": "平和を祈るよ。", "cVi": "Cầu cho hòa bình.", "gIds": [] } },
            { "STT": 34, "Kanji": "見学します", "Nghĩa": "Tham quan học tập", "Furigana": "けんがくします", "type": "verb", "conv": { "polite": "工場を見学します。", "pVi": "Tôi tham quan nhà máy.", "casual": "工場見学する。", "cVi": "Đi tham quan nhà máy.", "gIds": [] } },
            { "STT": 35, "Kanji": "一番", "Nghĩa": "Nhất/Số 1", "Furigana": "いちばん", "type": "noun", "conv": { "polite": "これが一番好きです。", "pVi": "Tôi thích cái này nhất.", "casual": "これ一番好き。", "cVi": "Thích cái này nhất.", "gIds": [] } },
            { "STT": 36, "Kanji": "世界", "Nghĩa": "Thế giới", "Furigana": "せかい", "type": "noun", "conv": { "polite": "世界中を旅行したいです。", "pVi": "Tôi muốn đi du lịch vòng quanh thế giới.", "casual": "世界中旅行したい。", "cVi": "Muốn đi vòng quanh thế giới.", "gIds": ["tai"] } },
            { "STT": 37, "Kanji": "季節", "Nghĩa": "Mùa", "Furigana": "きせつ", "type": "noun", "conv": { "polite": "好きな季節はいつですか。", "pVi": "Bạn thích mùa nào?", "casual": "好きな季節いつ？", "cVi": "Thích mùa nào?", "gIds": [] } },
            { "STT": 38, "Kanji": "春", "Nghĩa": "Mùa xuân", "Furigana": "はる", "type": "noun", "conv": { "polite": "春が来ました。", "pVi": "Mùa xuân đã đến.", "casual": "春が来たね。", "cVi": "Xuân về rồi.", "gIds": ["ta_form"] } },
            { "STT": 39, "Kanji": "夏", "Nghĩa": "Mùa hè", "Furigana": "なつ", "type": "noun", "conv": { "polite": "夏は暑いです。", "pVi": "Mùa hè nóng.", "casual": "夏は暑いね。", "cVi": "Hè nóng thật.", "gIds": [] } },
            { "STT": 40, "Kanji": "秋", "Nghĩa": "Mùa thu", "Furigana": "あき", "type": "noun", "conv": { "polite": "秋は涼しいです。", "pVi": "Mùa thu mát mẻ.", "casual": "秋は涼しいよ。", "cVi": "Thu mát mẻ mà.", "gIds": [] } },
            { "STT": 41, "Kanji": "冬", "Nghĩa": "Mùa đông", "Furigana": "ふゆ", "type": "noun", "conv": { "polite": "冬は寒いです。", "pVi": "Mùa đông lạnh.", "casual": "冬は寒い。", "cVi": "Đông lạnh lắm.", "gIds": [] } },
            { "STT": 42, "Kanji": "食べ物", "Nghĩa": "Đồ ăn", "Furigana": "たべもの", "type": "food", "conv": { "polite": "おいしい食べ物があります。", "pVi": "Có đồ ăn ngon.", "casual": "おいしい食べ物あるよ。", "cVi": "Có đồ ngon này.", "gIds": ["ga_arimasu"] } },
            { "STT": 43, "Kanji": "飲み物", "Nghĩa": "Đồ uống", "Furigana": "のみもの", "type": "food", "conv": { "polite": "飲み物を買いに行きます。", "pVi": "Tôi đi mua đồ uống.", "casual": "飲み物買いに行く。", "cVi": "Đi mua nước đây.", "gIds": ["ni_iku"] } },
            { "STT": 44, "Kanji": "乗り物", "Nghĩa": "Phương tiện", "Furigana": "のりもの", "type": "noun", "conv": { "polite": "どんな乗り物が好きですか。", "pVi": "Bạn thích phương tiện gì?", "casual": "どんな乗り物好き？", "cVi": "Thích xe gì?", "gIds": [] } },
            { "STT": 45, "Kanji": "", "Nghĩa": "Lớp học", "Furigana": "クラス", "type": "noun", "conv": { "polite": "クラスで一番背が高いです。", "pVi": "Cao nhất lớp.", "casual": "クラスで一番背が高い。", "cVi": "Cao nhất lớp đấy.", "gIds": [] } },
            { "STT": 46, "Kanji": "大変", "Nghĩa": "Vất vả", "Furigana": "たいへん", "type": "adj_na", "conv": { "polite": "それは大変ですね。", "pVi": "Thế thì vất vả nhỉ.", "casual": "それ、大変だね。", "cVi": "Vất vả thế.", "gIds": [] } },
            { "STT": 47, "Kanji": "嬉しい", "Nghĩa": "Vui mừng", "Furigana": "うれしい", "type": "adj_i", "conv": { "polite": "会えて嬉しいです。", "pVi": "Gặp được bạn tôi vui lắm.", "casual": "会えて嬉しい！", "cVi": "Gặp được cậu vui quá!", "gIds": [] } },
            { "STT": 48, "Kanji": "週末", "Nghĩa": "Cuối tuần", "Furigana": "しゅうまつ", "type": "noun", "conv": { "polite": "週末、何をしますか。", "pVi": "Cuối tuần bạn làm gì?", "casual": "週末、何する？", "cVi": "Cuối tuần làm gì?", "gIds": [] } },
            { "STT": 49, "Kanji": "面積", "Nghĩa": "Diện tích", "Furigana": "めんせき", "type": "noun", "conv": { "polite": "部屋の面積を測ります。", "pVi": "Tôi đo diện tích phòng.", "casual": "部屋の面積測る。", "cVi": "Đo diện tích phòng.", "gIds": [] } },
            { "STT": 50, "Kanji": "のどが渇きます", "Nghĩa": "Khát nước", "Furigana": "のどがかわきます", "type": "verb", "conv": { "polite": "のどが渇きました。", "pVi": "Tôi khát nước.", "casual": "のど渇いた。", "cVi": "Khát nước quá.", "gIds": ["ta_form"] } },
            { "STT": 51, "Kanji": "お腹が空きます", "Nghĩa": "Đói bụng", "Furigana": "おなかがすきます", "type": "verb", "conv": { "polite": "お腹が空きました。", "pVi": "Tôi đói bụng.", "casual": "お腹空いた。", "cVi": "Đói quá.", "gIds": ["ta_form"] } },
            { "STT": 52, "Kanji": "電気", "Nghĩa": "Điện/Đèn", "Furigana": "でんき", "type": "noun", "conv": { "polite": "電気を消してください。", "pVi": "Hãy tắt điện đi.", "casual": "電気消して。", "cVi": "Tắt đèn đi.", "gIds": ["te_kudasai"] } },
            { "STT": 53, "Kanji": "お風呂", "Nghĩa": "Bồn tắm", "Furigana": "おふろ", "type": "noun", "conv": { "polite": "お風呂に入りました。", "pVi": "Tôi đã tắm bồn.", "casual": "お風呂入った。", "cVi": "Tắm rồi.", "gIds": ["ta_form"] } },
            { "STT": 54, "Kanji": "鍵", "Nghĩa": "Chìa khóa", "Furigana": "かぎ", "type": "noun", "conv": { "polite": "鍵をかけましたか。", "pVi": "Bạn đã khóa cửa chưa?", "casual": "鍵かけた？", "cVi": "Khóa cửa chưa?", "gIds": ["ta_form"] } },
            { "STT": 55, "Kanji": "新聞", "Nghĩa": "Báo", "Furigana": "しんぶん", "type": "noun", "conv": { "polite": "毎朝、新聞を読みます。", "pVi": "Sáng nào tôi cũng đọc báo.", "casual": "毎朝、新聞読む。", "cVi": "Sáng nào cũng đọc báo.", "gIds": [] } },
            { "STT": 56, "Kanji": "雑誌", "Nghĩa": "Tạp chí", "Furigana": "ざっし", "type": "noun", "conv": { "polite": "雑誌を読んでいます。", "pVi": "Tôi đang đọc tạp chí.", "casual": "雑誌読んでる。", "cVi": "Đang đọc tạp chí.", "gIds": ["te_iru"] } },
            { "STT": 57, "Kanji": "", "Nghĩa": "Bật (điện)", "Furigana": "つけます", "type": "verb", "conv": { "polite": "電気をつけてください。", "pVi": "Hãy bật điện lên.", "casual": "電気つけて。", "cVi": "Bật đèn lên.", "gIds": ["te_kudasai"] } },
            { "STT": 58, "Kanji": "消します", "Nghĩa": "Tắt (điện)", "Furigana": "けします", "type": "verb", "conv": { "polite": "テレビを消しました。", "pVi": "Tôi đã tắt tivi.", "casual": "テレビ消した。", "cVi": "Tắt tivi rồi.", "gIds": ["ta_form"] } },
            { "STT": 59, "Kanji": "浴びます", "Nghĩa": "Tắm (sen)", "Furigana": "あびます", "type": "verb", "conv": { "polite": "シャワーを浴びます。", "pVi": "Tôi tắm vòi sen.", "casual": "シャワー浴びる。", "cVi": "Tắm đây.", "gIds": [] } },
            { "STT": 60, "Kanji": "入ります", "Nghĩa": "Vào (bồn)", "Furigana": "はいります", "type": "verb", "conv": { "polite": "お風呂に入ります。", "pVi": "Tôi vào bồn tắm (đi tắm).", "casual": "お風呂入る。", "cVi": "Đi tắm đây.", "gIds": [] } },
            { "STT": 61, "Kanji": "出かけます", "Nghĩa": "Ra ngoài", "Furigana": "でかけます", "type": "verb", "conv": { "polite": "これから出かけます。", "pVi": "Bây giờ tôi ra ngoài.", "casual": "これから出かける。", "cVi": "Giờ tớ ra ngoài.", "gIds": [] } },
            { "STT": 62, "Kanji": "鍵を掛けます", "Nghĩa": "Khóa cửa", "Furigana": "かぎをかけます", "type": "verb", "conv": { "polite": "ドアに鍵を掛けました。", "pVi": "Tôi đã khóa cửa.", "casual": "ドアに鍵かけた。", "cVi": "Khóa cửa rồi.", "gIds": ["ta_form"] } },
            { "STT": 63, "Kanji": "押します", "Nghĩa": "Ấn/Đẩy", "Furigana": "おします", "type": "verb", "conv": { "polite": "ボタンを押してください。", "pVi": "Hãy ấn nút.", "casual": "ボタン押して。", "cVi": "Ấn nút đi.", "gIds": ["te_kudasai"] } },
            { "STT": 64, "Kanji": "洗濯機", "Nghĩa": "Máy giặt", "Furigana": "せんたくき", "type": "noun", "conv": { "polite": "洗濯機を回します。", "pVi": "Tôi bật máy giặt.", "casual": "洗濯機回す。", "cVi": "Bật máy giặt đây.", "gIds": [] } },
            { "STT": 65, "Kanji": "", "Nghĩa": "Sau đó", "Furigana": "それから", "type": "noun", "conv": { "polite": "ご飯を食べて、それから映画を見ます。", "pVi": "Ăn cơm, sau đó xem phim.", "casual": "ご飯食べて、それから映画見る。", "cVi": "Ăn cơm xong rồi xem phim.", "gIds": ["te_form_cause"] } },
            { "STT": 66, "Kanji": "", "Nghĩa": "Hòa nhạc", "Furigana": "コンサート", "type": "noun", "conv": { "polite": "コンサートに行きたいです。", "pVi": "Tôi muốn đi hòa nhạc.", "casual": "コンサート行きたい。", "cVi": "Muốn đi xem hòa nhạc.", "gIds": ["tai"] } },
            { "STT": 67, "Kanji": "独身", "Nghĩa": "Độc thân", "Furigana": "どくしん", "type": "noun", "conv": { "polite": "彼は独身です。", "pVi": "Anh ấy độc thân.", "casual": "彼、独身だよ。", "cVi": "Hắn độc thân đấy.", "gIds": [] } },
            { "STT": 68, "Kanji": "資料", "Nghĩa": "Tài liệu", "Furigana": "しりょう", "type": "noun", "conv": { "polite": "資料をコピーしてください。", "pVi": "Hãy photo tài liệu.", "casual": "資料コピーして。", "cVi": "Photo tài liệu đi.", "gIds": ["te_kudasai"] } },
            { "STT": 69, "Kanji": "電話", "Nghĩa": "Điện thoại", "Furigana": "でんわ", "type": "noun", "conv": { "polite": "電話をかけてもいいですか。", "pVi": "Tôi gọi điện thoại được không?", "casual": "電話かけていい？", "cVi": "Gọi điện được không?", "gIds": ["te_mo_ii"] } },
            { "STT": 70, "Kanji": "予約", "Nghĩa": "Đặt trước", "Furigana": "よやく", "type": "noun", "conv": { "polite": "レストランを予約しました。", "pVi": "Tôi đã đặt nhà hàng.", "casual": "レストラン予約した。", "cVi": "Đặt nhà hàng rồi.", "gIds": ["ta_form"] } },
            { "STT": 71, "Kanji": "歯", "Nghĩa": "Răng", "Furigana": "は", "type": "noun", "conv": { "polite": "歯を磨きます。", "pVi": "Tôi đánh răng.", "casual": "歯磨く。", "cVi": "Đánh răng đây.", "gIds": [] } },
            { "STT": 72, "Kanji": "顔", "Nghĩa": "Mặt", "Furigana": "かお", "type": "noun", "conv": { "polite": "顔を洗ってください。", "pVi": "Hãy rửa mặt đi.", "casual": "顔洗って。", "cVi": "Rửa mặt đi.", "gIds": ["te_kudasai"] } },
            { "STT": 73, "Kanji": "試合", "Nghĩa": "Trận đấu", "Furigana": "しあい", "type": "noun", "conv": { "polite": "試合に出ます。", "pVi": "Tôi tham gia trận đấu.", "casual": "試合に出る。", "cVi": "Tham gia đấu.", "gIds": [] } },
            { "STT": 74, "Kanji": "", "Nghĩa": "Báo cáo", "Furigana": "レポート", "type": "noun", "conv": { "polite": "レポートを出さなければなりません。", "pVi": "Phải nộp báo cáo.", "casual": "レポート出さなきゃ。", "cVi": "Phải nộp báo cáo.", "gIds": ["nakucha"] } },
            { "STT": 75, "Kanji": "砂糖", "Nghĩa": "Đường", "Furigana": "さとう", "type": "food", "conv": { "polite": "砂糖を入れますか。", "pVi": "Bạn có cho đường vào không?", "casual": "砂糖入れる？", "cVi": "Cho đường không?", "gIds": [] } },
            { "STT": 76, "Kanji": "塩", "Nghĩa": "Muối", "Furigana": "しお", "type": "food", "conv": { "polite": "塩を取ってください。", "pVi": "Lấy giúp tôi lọ muối.", "casual": "塩取って。", "cVi": "Lấy hộ lọ muối.", "gIds": ["te_kudasai"] } },
            { "STT": 77, "Kanji": "", "Nghĩa": "Nước tương", "Furigana": "しょうゆ", "type": "food", "conv": { "polite": "しょうゆをかけます。", "pVi": "Chan nước tương.", "casual": "しょうゆかける。", "cVi": "Chan nước tương.", "gIds": [] } },
            { "STT": 78, "Kanji": "住所", "Nghĩa": "Địa chỉ", "Furigana": "じゅうしょ", "type": "noun", "conv": { "polite": "住所を教えてください。", "pVi": "Hãy cho tôi biết địa chỉ.", "casual": "住所教えて。", "cVi": "Cho xin địa chỉ đi.", "gIds": ["te_kudasai"] } },
            { "STT": 79, "Kanji": "交差点", "Nghĩa": "Ngã tư", "Furigana": "こうさてん", "type": "place", "conv": { "polite": "交差点を右へ曲がってください。", "pVi": "Hãy rẽ phải ở ngã tư.", "casual": "交差点を右に曲がって。", "cVi": "Rẽ phải ở ngã tư.", "gIds": ["te_kudasai"] } },
            { "STT": 80, "Kanji": "信号", "Nghĩa": "Đèn giao thông", "Furigana": "しんごう", "type": "noun", "conv": { "polite": "信号を見て渡ります。", "pVi": "Nhìn đèn tín hiệu rồi sang đường.", "casual": "信号見て渡る。", "cVi": "Nhìn đèn rồi sang.", "gIds": [] } },
            { "STT": 81, "Kanji": "曲がります", "Nghĩa": "Rẽ/Quẹo", "Furigana": "まがります", "type": "verb", "conv": { "polite": "角を左へ曲がります。", "pVi": "Rẽ trái ở góc đường.", "casual": "角を左へ曲がる。", "cVi": "Rẽ trái ở góc.", "gIds": [] } },
            { "STT": 82, "Kanji": "気を付けます", "Nghĩa": "Chú ý", "Furigana": "きをつけます", "type": "verb", "conv": { "polite": "車に気を付けてください。", "pVi": "Hãy cẩn thận xe cộ.", "casual": "車に気をつけて。", "cVi": "Cẩn thận xe cộ.", "gIds": ["te_kudasai"] } },
            { "STT": 83, "Kanji": "急ぎます", "Nghĩa": "Vội/Gấp", "Furigana": "いそぎます", "type": "verb", "conv": { "polite": "急ぎましょう。", "pVi": "Chúng ta nhanh lên nào.", "casual": "急ごう。", "cVi": "Nhanh lên.", "gIds": ["mashou", "volitional"] } },
            { "STT": 84, "Kanji": "止めます", "Nghĩa": "Dừng", "Furigana": "とめます", "type": "verb", "conv": { "polite": "車を止めてください。", "pVi": "Hãy dừng xe lại.", "casual": "車止めて。", "cVi": "Dừng xe lại đi.", "gIds": ["te_kudasai"] } },
            { "STT": 85, "Kanji": "入れます", "Nghĩa": "Cho vào", "Furigana": "いれます", "type": "verb", "conv": { "polite": "カバンに本を入れます。", "pVi": "Tôi cho sách vào cặp.", "casual": "カバンに本入れる。", "cVi": "Cho sách vào cặp.", "gIds": [] } },
            { "STT": 86, "Kanji": "雨がやみます", "Nghĩa": "Tạnh mưa", "Furigana": "あめがやみます", "type": "verb", "conv": { "polite": "もうすぐ雨がやむでしょう。", "pVi": "Mưa chắc sắp tạnh rồi.", "casual": "もうすぐ雨やむよ。", "cVi": "Mưa sắp tạnh rồi.", "gIds": [] } },
            { "STT": 87, "Kanji": "磨きます", "Nghĩa": "Đánh răng/Mài", "Furigana": "みがきます", "type": "verb", "conv": { "polite": "靴を磨きました。", "pVi": "Tôi đã đánh giày.", "casual": "靴磨いた。", "cVi": "Đánh giày rồi.", "gIds": ["ta_form"] } }
        ];

        // --- 3. KANJI DETAILS (Day 5) ---
        const kanjiDetails = {
            "掃": { hanviet: "TẢO", mean: "Quét dọn", on: "ソウ", kun: "は.く", radicals: "Thủ (扌) + Trử (帚)", tipImg: "Tay (**扌**) cầm cái chổi (**帚**) quét.", tipSoundOn: "**Sou**ji quét nhà.", tipSoundKun: "**Ha**ku quét.", words: [{w:"掃除 (そうじ)", m:"Dọn dẹp"}, {w:"清掃 (せいそう)", m:"Vệ sinh"}] },
            "除": { hanviet: "TRỪ", mean: "Loại bỏ", on: "ジョ, ジ", kun: "のぞ.く", radicals: "Phụ (阝) + Dư (余)", tipImg: "Ở gò đất (**阝**) dư (**余**) thừa thì loại bỏ.", tipSoundOn: "**Jo** (Giơ) tay loại bỏ.", tipSoundKun: "**Nozo**ku trừ đi.", words: [{w:"掃除 (そうじ)", m:"Dọn dẹp"}, {w:"削除 (さくじょ)", m:"Xóa bỏ"}] },
            "働": { hanviet: "ĐỘNG", mean: "Làm việc", on: "ドウ", kun: "はたら.く", radicals: "Nhân (亻) + Động (動)", tipImg: "Người (**亻**) dùng sức (**力**) chuyển động (**重**).", tipSoundOn: "**Dou** động.", tipSoundKun: "**Hataraku** làm việc.", words: [{w:"働きます (はたらきます)", m:"Làm việc"}, {w:"労働 (ろうどう)", m:"Lao động"}] },
            "選": { hanviet: "TUYỂN", mean: "Chọn", on: "セン", kun: "えら.ぶ", radicals: "Xước (⻌) + Tốn (巽)", tipImg: "Hai con rắn (**己**) cùng đi (**⻌**) thi tuyển.", tipSoundOn: "**Sen** tuyển.", tipSoundKun: "**Erabu** chọn lựa.", words: [{w:"選びます (えらびます)", m:"Chọn"}, {w:"選挙 (せんきょ)", m:"Bầu cử"}] },
            "回": { hanviet: "HỒI", mean: "Lần/Vòng", on: "カイ", kun: "まわ.る", radicals: "Vi (囗) + Khẩu (口)", tipImg: "Hai cái miệng (**口**) xoay vòng.", tipSoundOn: "**Kai** (cái) lần.", tipSoundKun: "**Mawa**ru xoay.", words: [{w:"〜回 (かい)", m:"Lần"}, {w:"回復 (かいふく)", m:"Hồi phục"}] },
            "台": { hanviet: "ĐÀI", mean: "Cái (máy)", on: "ダイ, タイ", kun: "", radicals: "Tư (厶) + Khẩu (口)", tipImg: "Cái miệng (**口**) nói chuyện riêng (**ム**) trên đài.", tipSoundOn: "**Dai** đài.", tipSoundKun: "", words: [{w:"〜台 (だい)", m:"Cái (máy)"}, {w:"台所 (だいどころ)", m:"Nhà bếp"}] },
            "枚": { hanviet: "MAI", mean: "Tờ/Tấm", on: "マイ", kun: "", radicals: "Mộc (木) + Phộc (攵)", tipImg: "Cây (**木**) bị đánh (**攵**) thành từng tấm mỏng.", tipSoundOn: "**Mai** (mái) nhà lợp từng tấm.", tipSoundKun: "", words: [{w:"〜枚 (まい)", m:"Tờ/Tấm"}, {w:"枚数 (まいすう)", m:"Số tờ"}] },
            "本": { hanviet: "BẢN", mean: "Sách/Cây/Cái", on: "ホン", kun: "もと", radicals: "Mộc (木) + Nhất (一)", tipImg: "Gốc cây (**木**) được đánh dấu.", tipSoundOn: "**Hon** (hôn) vào sách.", tipSoundKun: "**Moto** nguồn gốc.", words: [{w:"〜本 (ほん)", m:"Cái (thon dài)"}, {w:"本 (ほん)", m:"Sách"}] },
            "手": { hanviet: "THỦ", mean: "Tay", on: "シュ", kun: "て", radicals: "Thủ (手)", tipImg: "Hình bàn tay xòe ra.", tipSoundOn: "**Shu** thủ.", tipSoundKun: "**Te** tay.", words: [{w:"手紙 (てがみ)", m:"Thư"}, {w:"手 (て)", m:"Tay"}] },
            "紙": { hanviet: "CHỈ", mean: "Giấy", on: "シ", kun: "かみ", radicals: "Mịch (糸) + Thị (氏)", tipImg: "Sợi chỉ (**糸**) dệt thành giấy thị (**氏**).", tipSoundOn: "**Shi** si.", tipSoundKun: "**Kami** giấy.", words: [{w:"手紙 (てがみ)", m:"Thư"}, {w:"紙 (かみ)", m:"Giấy"}] },
            "寺": { hanviet: "TỰ", mean: "Chùa", on: "ジ", kun: "てら", radicals: "Thổ (土) + Thốn (寸)", tipImg: "Đất (**土**) có thốn (**寸**) cỏ là chùa.", tipSoundOn: "**Ji** tự.", tipSoundKun: "**Tera** chùa.", words: [{w:"お寺 (おてら)", m:"Chùa"}, {w:"寺院 (じいん)", m:"Đền thờ"}] },
            "郵": { hanviet: "BƯU", mean: "Bưu chính", on: "ユウ", kun: "", radicals: "Thùy (垂) + Phụ (阝)", tipImg: "Vùng đất (**阝**) xa xôi (**垂**) cần gửi thư.", tipSoundOn: "**Yuu** bưu điện.", tipSoundKun: "", words: [{w:"郵便局 (ゆうびんきょく)", m:"Bưu điện"}, {w:"郵送 (ゆうそう)", m:"Gửi thư"}] },
            "便": { hanviet: "TIỆN", mean: "Tiện/Thư", on: "ベン, ビン", kun: "たよ.り", radicals: "Nhân (亻) + Canh (更)", tipImg: "Người (**亻**) canh (**更**) cửa rất tiện.", tipSoundOn: "**Ben** tiện.", tipSoundKun: "**Tayo**ri tin tức.", words: [{w:"郵便局 (ゆうびんきょく)", m:"Bưu điện"}, {w:"便利 (べんり)", m:"Tiện lợi"}] },
            "局": { hanviet: "CỤC", mean: "Cục/Phòng", on: "キョク", kun: "", radicals: "Thi (尸) + Bao (勹) + Khẩu (口)", tipImg: "Xác chết (**尸**) trong cái bao (**勹**) ở cục cảnh sát.", tipSoundOn: "**Kyoku** cục.", tipSoundKun: "", words: [{w:"郵便局 (ゆうびんきょく)", m:"Bưu điện"}, {w:"薬局 (やっきょく)", m:"Hiệu thuốc"}] },
            "買": { hanviet: "MÃI", mean: "Mua", on: "バイ", kun: "か.う", radicals: "Võng (罒) + Bối (貝)", tipImg: "Lưới (**罒**) chụp tiền (**貝**) để mua.", tipSoundOn: "**Bai** mãi mãi.", tipSoundKun: "**Ka**u mua.", words: [{w:"買い物 (かいもの)", m:"Mua sắm"}, {w:"買います (かいます)", m:"Mua"}] },
            "物": { hanviet: "VẬT", mean: "Đồ vật", on: "ブツ, モツ", kun: "もの", radicals: "Ngưu (牛) + Vật (勿)", tipImg: "Con bò (**牛**) chê không (**勿**) phải đồ vật.", tipSoundOn: "**Butsu** bụt.", tipSoundKun: "**Mono** vật.", words: [{w:"買い物 (かいもの)", m:"Mua sắm"}, {w:"荷物 (にもつ)", m:"Hành lý"}] },
            "出": { hanviet: "XUẤT", mean: "Ra/Nộp", on: "シュツ", kun: "だ.す", radicals: "Khảm (凵)", tipImg: "Hai ngọn núi chồng lên nhau xuất hiện.", tipSoundOn: "**Shutsu** xuất.", tipSoundKun: "**Da**su đưa ra.", words: [{w:"出します (だします)", m:"Nộp/Đổ (rác)"}, {w:"出口 (でぐち)", m:"Cửa ra"}] },
            "祈": { hanviet: "KỲ", mean: "Cầu nguyện", on: "キ", kun: "いの.る", radicals: "Kỳ (礻) + Cân (斤)", tipImg: "Thần đất (**礻**) cầm rìu (**斤**) cầu nguyện.", tipSoundOn: "**Ki** kỳ.", tipSoundKun: "**Ino**ru cầu.", words: [{w:"祈ります (いのります)", m:"Cầu nguyện"}, {w:"祈願 (きがん)", m:"Lời cầu nguyện"}] },
            "見": { hanviet: "KIẾN", mean: "Nhìn", on: "ケン", kun: "み.る", radicals: "Mục (目)", tipImg: "Mắt trên chân đi kiến tập.", tipSoundOn: "**Ken**gaku kiến tập.", tipSoundKun: "**Mi**ru nhìn.", words: [{w:"見学 (けんがく)", m:"Tham quan học tập"}, {w:"見ます (みます)", m:"Nhìn"}] },
            "学": { hanviet: "HỌC", mean: "Học", on: "ガク", kun: "まな.ぶ", radicals: "Tử (子)", tipImg: "Đứa trẻ đội mũ đi học.", tipSoundOn: "**Gaku** học.", tipSoundKun: "**Mana**bu học.", words: [{w:"見学 (けんがく)", m:"Tham quan học tập"}, {w:"学校 (がっこう)", m:"Trường học"}] },
            "番": { hanviet: "PHIÊN", mean: "Số/Lượt", on: "バン", kun: "", radicals: "Biện (釆) + Điền (田)", tipImg: "Gạo (**米**) trên ruộng (**田**) được đánh số.", tipSoundOn: "**Ban** số.", tipSoundKun: "", words: [{w:"一番 (いちばん)", m:"Nhất/Số 1"}, {w:"交番 (こうばん)", m:"Đồn cảnh sát"}] },
            "世": { hanviet: "THẾ", mean: "Thế giới", on: "セイ, セ", kun: "よ", radicals: "Nhất (一)", tipImg: "Ba mươi (**卅**) năm là một thế hệ.", tipSoundOn: "**Se**kai thế giới.", tipSoundKun: "**Yo** thế gian.", words: [{w:"世界 (せかい)", m:"Thế giới"}, {w:"世話 (せわ)", m:"Chăm sóc"}] },
            "界": { hanviet: "GIỚI", mean: "Giới hạn", on: "カイ", kun: "", radicals: "Điền (田) + Giới (介)", tipImg: "Ruộng (**田**) bị giới (**介**) hạn.", tipSoundOn: "**Kai** giới.", tipSoundKun: "", words: [{w:"世界 (せかい)", m:"Thế giới"}, {w:"限界 (げんかい)", m:"Giới hạn"}] },
            "季": { hanviet: "QUÝ", mean: "Mùa", on: "キ", kun: "", radicals: "Hòa (禾) + Tử (子)", tipImg: "Cây lúa (**禾**) non trẻ (**子**) theo mùa.", tipSoundOn: "**Ki**setsu mùa.", tipSoundKun: "", words: [{w:"季節 (きせつ)", m:"Mùa"}, {w:"四季 (しき)", m:"Bốn mùa"}] },
            "節": { hanviet: "TIẾT", mean: "Tiết/Mùa", on: "セツ", kun: "ふし", radicals: "Trúc (竹) + Tức (即)", tipImg: "Tre (**竹**) tức (**即**) khí tiết.", tipSoundOn: "**Setsu** tiết.", tipSoundKun: "**Fushi** đốt tre.", words: [{w:"季節 (きせつ)", m:"Mùa"}, {w:"調節 (ちょうせつ)", m:"Điều tiết"}] },
            "春": { hanviet: "XUÂN", mean: "Mùa xuân", on: "シュン", kun: "はる", radicals: "Nhật (日)", tipImg: "Ba người (**三**) ngắm mặt trời (**日**) mùa xuân.", tipSoundOn: "**Shun** xuân.", tipSoundKun: "**Haru** xuân.", words: [{w:"春 (はる)", m:"Mùa xuân"}, {w:"青春 (せいしゅん)", m:"Thanh xuân"}] },
            "夏": { hanviet: "HẠ", mean: "Mùa hè", on: "カ", kun: "なつ", radicals: "Hạ (夂)", tipImg: "Trăm (**百**) người đi lại (**夂**) mùa hè.", tipSoundOn: "**Ka** ca.", tipSoundKun: "**Natsu** hạ.", words: [{w:"夏 (なつ)", m:"Mùa hè"}, {w:"夏休み (なつやすみ)", m:"Nghỉ hè"}] },
            "秋": { hanviet: "THU", mean: "Mùa thu", on: "シュウ", kun: "あき", radicals: "Hòa (禾) + Hỏa (火)", tipImg: "Cây lúa (**禾**) chín vàng như lửa (**火**) mùa thu.", tipSoundOn: "**Shuu** thu.", tipSoundKun: "**Aki** thu.", words: [{w:"秋 (あき)", m:"Mùa thu"}, {w:"秋分 (しゅうぶん)", m:"Thu phân"}] },
            "冬": { hanviet: "ĐÔNG", mean: "Mùa đông", on: "トウ", kun: "ふゆ", radicals: "Băng (冫) + Phộc (夂)", tipImg: "Bước đi (**夂**) trên băng (**冫**) mùa đông.", tipSoundOn: "**Tou** đông.", tipSoundKun: "**Fuyu** đông.", words: [{w:"冬 (ふゆ)", m:"Mùa đông"}, {w:"冬休み (ふゆやすみ)", m:"Nghỉ đông"}] },
            "食": { hanviet: "THỰC", mean: "Ăn", on: "ショク", kun: "た.べる", radicals: "Thực (食)", tipImg: "Người tốt (**良**) che mũ (人) ăn.", tipSoundOn: "**Shoku** thực.", tipSoundKun: "**Ta**beru ăn.", words: [{w:"食べ物 (たべもの)", m:"Đồ ăn"}, {w:"食堂 (しょくどう)", m:"Nhà ăn"}] },
            "飲": { hanviet: "ẨM", mean: "Uống", on: "イン", kun: "の.む", radicals: "Thực (饣) + Khiếm (欠)", tipImg: "Ăn (**食**) thiếu (**欠**) nước phải uống.", tipSoundOn: "**In** ẩm.", tipSoundKun: "**No**mu uống.", words: [{w:"飲み物 (のみもの)", m:"Đồ uống"}, {w:"飲食店 (いんしょくてん)", m:"Nhà hàng"}] },
            "乗": { hanviet: "THỪA", mean: "Lên xe", on: "ジョウ", kun: "の.る", radicals: "Thiên (千) + Mộc (木)", tipImg: "Cây lúa (**禾**) trên xe.", tipSoundOn: "**Jou** thừa.", tipSoundKun: "**No**ru lên xe.", words: [{w:"乗り物 (のりもの)", m:"Phương tiện"}, {w:"乗車 (じょうしゃ)", m:"Lên tàu"}] },
            "変": { hanviet: "BIẾN", mean: "Biến đổi/Vất vả", on: "ヘン", kun: "か.わる", radicals: "Diệc (亦) + Phộc (攵)", tipImg: "Cũng (**亦**) đánh nhẹ (**攵**) để thay đổi.", tipSoundOn: "**Hen** biến.", tipSoundKun: "**Ka**waru thay đổi.", words: [{w:"大変 (たいへん)", m:"Vất vả"}, {w:"変化 (へんか)", m:"Biến hóa"}] },
            "嬉": { hanviet: "HI", mean: "Vui mừng", on: "キ", kun: "うれ.しい", radicals: "Nữ (女) + Hỉ (喜)", tipImg: "Phụ nữ (**女**) vui mừng (**喜**) rỡ.", tipSoundOn: "**Ki** hỉ.", tipSoundKun: "**Ure**shii vui.", words: [{w:"嬉しい (うれしい)", m:"Vui mừng"}] },
            "週": { hanviet: "CHU", mean: "Tuần", on: "シュウ", kun: "", radicals: "Xước (⻌) + Chu (周)", tipImg: "Đi vòng quanh (**周**) một tuần.", tipSoundOn: "**Shuu** tuần.", tipSoundKun: "", words: [{w:"週末 (しゅうまつ)", m:"Cuối tuần"}, {w:"来週 (らいしゅう)", m:"Tuần sau"}] },
            "末": { hanviet: "MẠT", mean: "Cuối", on: "マツ", kun: "すえ", radicals: "Mộc (木)", tipImg: "Cây (**木**) có ngọn dài hơn gốc.", tipSoundOn: "**Matsu** mạt.", tipSoundKun: "**Sue** cuối.", words: [{w:"週末 (しゅうまつ)", m:"Cuối tuần"}, {w:"月末 (げつまつ)", m:"Cuối tháng"}] },
            "面": { hanviet: "DIỆN", mean: "Mặt", on: "メン", kun: "おも", radicals: "Diện (面)", tipImg: "Mặt trong khung.", tipSoundOn: "**Men** diện.", tipSoundKun: "**Omo** mặt.", words: [{w:"面積 (めんせき)", m:"Diện tích"}, {w:"画面 (がめん)", m:"Màn hình"}] },
            "積": { hanviet: "TÍCH", mean: "Tích tụ", on: "セキ", kun: "つ.む", radicals: "Hòa (禾) + Trách (責)", tipImg: "Lúa (**禾**) chất trách (**責**) đống tích tụ.", tipSoundOn: "**Seki** tích.", tipSoundKun: "**Tsu**mu chất.", words: [{w:"面積 (めんせき)", m:"Diện tích"}, {w:"積雪 (せきせつ)", m:"Tuyết phủ"}] },
            "腹": { hanviet: "PHÚC", mean: "Bụng", on: "フク", kun: "はら, おなか", radicals: "Nhục (月) + Phục (复)", tipImg: "Phần cơ thể (**月**) phục (**复**) hồi là bụng.", tipSoundOn: "**Fuku** phúc.", tipSoundKun: "**Onaka** bụng.", words: [{w:"お腹 (おなか)", m:"Bụng"}, {w:"空腹 (くうふく)", m:"Đói bụng"}] },
            "空": { hanviet: "KHÔNG", mean: "Trống rỗng", on: "クウ", kun: "す.く", radicals: "Huyệt (穴) + Công (工)", tipImg: "Dưới hang (**穴**) thợ (**工**) làm việc không trung.", tipSoundOn: "**Kuu** không.", tipSoundKun: "**Su**ku trống.", words: [{w:"空きます (すきます)", m:"Trống/Đói"}, {w:"空気 (くうき)", m:"Không khí"}] },
            "電": { hanviet: "ĐIỆN", mean: "Điện", on: "デン", kun: "", radicals: "Vũ (雨)", tipImg: "Mưa (**雨**) có sét.", tipSoundOn: "**Den** điện.", tipSoundKun: "", words: [{w:"電気 (でんき)", m:"Điện/Đèn"}, {w:"電話 (でんわ)", m:"Điện thoại"}] },
            "気": { hanviet: "KHÍ", mean: "Khí chất", on: "キ", kun: "", radicals: "Khí (气) + Mễ (米)", tipImg: "Hơi nước (**气**) bốc lên từ gạo (**米**).", tipSoundOn: "**Ki** khí.", tipSoundKun: "", words: [{w:"電気 (でんき)", m:"Điện"}, {w:"元気 (げんき)", m:"Khỏe mạnh"}] },
            "風": { hanviet: "PHONG", mean: "Gió", on: "フウ", kun: "かぜ", radicals: "Phong (風)", tipImg: "Con sâu (**虫**) trong gió.", tipSoundOn: "**Fuu** phong.", tipSoundKun: "**Kaze** gió.", words: [{w:"お風呂 (おふろ)", m:"Bồn tắm"}, {w:"台風 (たいふう)", m:"Bão"}] },
            "呂": { hanviet: "LỮ", mean: "Xương sống", on: "ロ", kun: "", radicals: "Khẩu (口)", tipImg: "Hai đốt xương sống.", tipSoundOn: "**Ro** lữ.", tipSoundKun: "", words: [{w:"お風呂 (おふろ)", m:"Bồn tắm"}] },
            "鍵": { hanviet: "KIỆN", mean: "Chìa khóa", on: "ケン", kun: "かぎ", radicals: "Kim (金) + Kiến (建)", tipImg: "Kim loại (**金**) kiến (**建**) thiết chìa khóa.", tipSoundOn: "**Ken** kiện.", tipSoundKun: "**Kagi** khóa.", words: [{w:"鍵 (かぎ)", m:"Chìa khóa"}] },
            "新": { hanviet: "TÂN", mean: "Mới", on: "シン", kun: "あたら.しい", radicals: "Lập (立) + Mộc (木) + Cân (斤)", tipImg: "Rìu (**斤**) đẽo cây (**木**) đứng (**立**) làm đồ mới.", tipSoundOn: "**Shin** tân.", tipSoundKun: "**Atara**shii mới.", words: [{w:"新聞 (しんぶん)", m:"Báo"}, {w:"新年 (しんねん)", m:"Năm mới"}] },
            "聞": { hanviet: "VĂN", mean: "Nghe", on: "ブン", kun: "き.く", radicals: "Môn (門) + Nhĩ (耳)", tipImg: "Tai (**耳**) ở cổng (**門**) nghe tin.", tipSoundOn: "**Bun** văn.", tipSoundKun: "**Ki**ku nghe.", words: [{w:"新聞 (しんぶん)", m:"Báo"}, {w:"見聞 (けんぶん)", m:"Kiến thức"}] },
            "雑": { hanviet: "TẠP", mean: "Tạp nham", on: "ザツ", kun: "", radicals: "Chuy (隹) + Mộc (木)", tipImg: "Chín (**九**) con chim đậu trên cây (**木**) tạp nham.", tipSoundOn: "**Zatsu** tạp.", tipSoundKun: "", words: [{w:"雑誌 (ざっし)", m:"Tạp chí"}, {w:"複雑 (ふくざつ)", m:"Phức tạp"}] },
            "誌": { hanviet: "CHÍ", mean: "Ghi chép", on: "シ", kun: "", radicals: "Ngôn (言) + Chí (志)", tipImg: "Lời nói (**言**) ghi chép ý chí (**志**).", tipSoundOn: "**Shi** chí.", tipSoundKun: "", words: [{w:"雑誌 (ざっし)", m:"Tạp chí"}, {w:"日誌 (にっし)", m:"Nhật ký"}] },
            "消": { hanviet: "TIÊU", mean: "Tắt/Xóa", on: "ショウ", kun: "け.す", radicals: "Thủy (氵) + Tiêu (肖)", tipImg: "Nước (**氵**) tiêu (**肖**) tan lửa.", tipSoundOn: "**Shou** tiêu.", tipSoundKun: "**Ke**su tắt.", words: [{w:"消します (けします)", m:"Tắt"}, {w:"消防車 (しょうぼうしゃ)", m:"Xe cứu hỏa"}] },
            "浴": { hanviet: "DỤC", mean: "Tắm", on: "ヨク", kun: "あ.びる", radicals: "Thủy (氵) + Cốc (谷)", tipImg: "Nước (**氵**) chảy trong thung lũng (**谷**) để tắm.", tipSoundOn: "**Yoku** dục.", tipSoundKun: "**Abi**ru tắm.", words: [{w:"浴びます (あびます)", m:"Tắm (vòi sen)"}, {w:"浴室 (よくしつ)", m:"Phòng tắm"}] },
            "入": { hanviet: "NHẬP", mean: "Vào", on: "ニュウ", kun: "はい.る", radicals: "Nhập (入)", tipImg: "Người đi vào.", tipSoundOn: "**Nyuu** nhập.", tipSoundKun: "**Hai**ru vào.", words: [{w:"入ります (はいります)", m:"Vào/Tắm bồn"}, {w:"入口 (いりぐち)", m:"Cửa vào"}] },
            "掛": { hanviet: "QUẢI", mean: "Treo/Khóa", on: "カイ", kun: "か.ける", radicals: "Thủ (扌) + Quải (卦)", tipImg: "Tay (**扌**) cầm quẻ (**卦**) treo lên.", tipSoundOn: "**Kai** quải.", tipSoundKun: "**Ka**keru khóa.", words: [{w:"掛けます (かけます)", m:"Khóa (cửa)"}] },
            "押": { hanviet: "ÁP", mean: "Ấn/Đẩy", on: "オウ", kun: "お.す", radicals: "Thủ (扌) + Giáp (甲)", tipImg: "Tay (**扌**) ấn cái giáp (**甲**).", tipSoundOn: "**Ou** áp.", tipSoundKun: "**O**su ấn.", words: [{w:"押します (おします)", m:"Ấn/Đẩy"}] },
            "洗": { hanviet: "TẨY", mean: "Rửa", on: "セン", kun: "あら.う", radicals: "Thủy (氵) + Tiên (先)", tipImg: "Nước (**氵**) tẩy sạch trước (**先**).", tipSoundOn: "**Sen** tẩy.", tipSoundKun: "**Ara**u rửa.", words: [{w:"洗濯 (せんたく)", m:"Giặt giũ"}, {w:"洗います (あらいます)", m:"Rửa"}] },
            "濯": { hanviet: "TRẠC", mean: "Giặt", on: "タク", kun: "", radicals: "Thủy (氵) + Địch (翟)", tipImg: "Nước (**氵**) giặt lông chim (**翟**).", tipSoundOn: "**Taku** trạc.", tipSoundKun: "", words: [{w:"洗濯機 (せんたくき)", m:"Máy giặt"}] },
            "機": { hanviet: "CƠ", mean: "Máy", on: "キ", kun: "はた", radicals: "Mộc (木) + Cơ (幾)", tipImg: "Cây (**木**) bên mấy (**幾**) cái máy.", tipSoundOn: "**Ki** cơ.", tipSoundKun: "**Hata** cơ.", words: [{w:"洗濯機 (せんたくき)", m:"Máy giặt"}, {w:"機械 (きかい)", m:"Cơ khí"}] },
            "独": { hanviet: "ĐỘC", mean: "Một mình", on: "ドク", kun: "ひと.り", radicals: "Khuyển (犭) + Trùng (虫)", tipImg: "Con chó (**犭**) bị con sâu (**虫**) cắn một mình.", tipSoundOn: "**Doku** độc.", tipSoundKun: "**Hito**ri một mình.", words: [{w:"独身 (どくしん)", m:"Độc thân"}, {w:"独特 (どくとく)", m:"Độc đáo"}] },
            "身": { hanviet: "THÂN", mean: "Thân thể", on: "シン", kun: "み", radicals: "Thân (身)", tipImg: "Thân thể mang bầu.", tipSoundOn: "**Shin** thân.", tipSoundKun: "**Mi** thân.", words: [{w:"独身 (どくしん)", m:"Độc thân"}, {w:"身体 (しんたい)", m:"Cơ thể"}] },
            "資": { hanviet: "TƯ", mean: "Tư liệu/Vốn", on: "シ", kun: "", radicals: "Thứ (次) + Bối (貝)", tipImg: "Tiền (**貝**) thứ (**次**) yếu là vốn.", tipSoundOn: "**Shi** tư.", tipSoundKun: "", words: [{w:"資料 (しりょう)", m:"Tài liệu"}, {w:"資本 (しほん)", m:"Tư bản"}] },
            "料": { hanviet: "LIỆU", mean: "Nguyên liệu", on: "リョウ", kun: "", radicals: "Mễ (米) + Đấu (斗)", tipImg: "Gạo (**米**) đong đấu (**斗**) làm nguyên liệu.", tipSoundOn: "**Ryou** liệu.", tipSoundKun: "", words: [{w:"資料 (しりょう)", m:"Tài liệu"}, {w:"料理 (りょうり)", m:"Món ăn"}] },
            "話": { hanviet: "THOẠI", mean: "Nói chuyện", on: "ワ", kun: "はな.す", radicals: "Ngôn (言) + Thiệt (舌)", tipImg: "Lời nói (**言**) bằng lưỡi (**舌**).", tipSoundOn: "**Wa** thoại.", tipSoundKun: "**Hana**su nói.", words: [{w:"電話 (でんわ)", m:"Điện thoại"}, {w:"会話 (かいわ)", m:"Hội thoại"}] },
            "予": { hanviet: "DỰ", mean: "Dự báo", on: "ヨ", kun: "", radicals: "Dự (予)", tipImg: "Cái mâu (**矛**) dự báo chiến tranh.", tipSoundOn: "**Yo** dự.", tipSoundKun: "", words: [{w:"予約 (よやく)", m:"Đặt trước"}, {w:"予定 (よてい)", m:"Dự định"}] },
            "約": { hanviet: "ƯỚC", mean: "Lời hứa", on: "ヤク", kun: "", radicals: "Mịch (糸) + Chước (勺)", tipImg: "Sợi chỉ (**糸**) buộc cái muôi (**勺**) là lời hứa.", tipSoundOn: "**Yaku** ước.", tipSoundKun: "", words: [{w:"予約 (よやく)", m:"Đặt trước"}, {w:"約束 (やくそく)", m:"Lời hứa"}] },
            "歯": { hanviet: "XỈ", mean: "Răng", on: "シ", kun: "は", radicals: "Xỉ (歯)", tipImg: "Dừng (**止**) lại để nhe răng.", tipSoundOn: "**Shi** xỉ.", tipSoundKun: "**Ha** răng.", words: [{w:"歯 (は)", m:"Răng"}, {w:"歯科 (しか)", m:"Nha khoa"}] },
            "顔": { hanviet: "NHAN", mean: "Mặt", on: "ガン", kun: "かお", radicals: "Nhan (彦) + Hiệt (頁)", tipImg: "Đầu (**頁**) có nhan sắc (**彦**).", tipSoundOn: "**Gan** nhan.", tipSoundKun: "**Kao** mặt.", words: [{w:"顔 (かお)", m:"Khuôn mặt"}, {w:"洗顔 (せんがん)", m:"Rửa mặt"}] },
            "試": { hanviet: "THÍ", mean: "Thử", on: "シ", kun: "ため.す", radicals: "Ngôn (言) + Thức (式)", tipImg: "Lời nói (**言**) theo thức (**式**) là thi thử.", tipSoundOn: "**Shi** thí.", tipSoundKun: "**Tame**su thử.", words: [{w:"試合 (しあい)", m:"Trận đấu"}, {w:"試験 (しけん)", m:"Kỳ thi"}] },
            "合": { hanviet: "HỢP", mean: "Hợp/Gặp", on: "ゴウ", kun: "あ.う", radicals: "Nhân (人) + Nhất (一) + Khẩu (口)", tipImg: "Một (**一**) người (**人**) miệng (**口**) hợp lại.", tipSoundOn: "**Gou** hợp.", tipSoundKun: "**A**u hợp.", words: [{w:"試合 (しあい)", m:"Trận đấu"}, {w:"間に合う (まにあう)", m:"Kịp giờ"}] },
            "砂": { hanviet: "SA", mean: "Cát", on: "サ", kun: "すな", radicals: "Thạch (石) + Thiểu (少)", tipImg: "Đá (**石**) nhỏ thiếu (**少**) là cát.", tipSoundOn: "**Sa** sa.", tipSoundKun: "**Suna** cát.", words: [{w:"砂糖 (さとう)", m:"Đường"}, {w:"砂漠 (さばく)", m:"Sa mạc"}] },
            "糖": { hanviet: "ĐƯỜNG", mean: "Đường ăn", on: "トウ", kun: "", radicals: "Mễ (米) + Đường (唐)", tipImg: "Gạo (**米**) nhà đường (**唐**) rất ngọt.", tipSoundOn: "**Tou** đường.", tipSoundKun: "", words: [{w:"砂糖 (さとう)", m:"Đường"}] },
            "塩": { hanviet: "DIÊM", mean: "Muối", on: "エン", kun: "しお", radicals: "Thổ (土) + Nhân (亻) + Mãnh (皿)", tipImg: "Người nằm (**亻**) trên đất (**土**) ăn muối trong đĩa (**皿**).", tipSoundOn: "**En** diêm.", tipSoundKun: "**Shio** muối.", words: [{w:"塩 (しお)", m:"Muối"}, {w:"食塩 (しょくえん)", m:"Muối ăn"}] },
            "油": { hanviet: "DU", mean: "Dầu", on: "ユ", kun: "あぶら", radicals: "Thủy (氵) + Do (由)", tipImg: "Nước (**氵**) do (**由**) dầu tạo ra.", tipSoundOn: "**Yu** du.", tipSoundKun: "**Abura** dầu.", words: [{w:"醤油 (しょうゆ)", m:"Nước tương"}, {w:"石油 (せきゆ)", m:"Dầu mỏ"}] },
            "住": { hanviet: "TRÚ", mean: "Sống", on: "ジュウ", kun: "す.む", radicals: "Nhân (亻) + Chủ (主)", tipImg: "Người (**亻**) làm chủ (**主**) nơi ở.", tipSoundOn: "**Juu** trú.", tipSoundKun: "**Su**mu sống.", words: [{w:"住所 (じゅうしょ)", m:"Địa chỉ"}, {w:"住みます (すみます)", m:"Sống"}] },
            "所": { hanviet: "SỞ", mean: "Nơi chốn", on: "ショ", kun: "ところ", radicals: "Hộ (戸) + Cân (斤)", tipImg: "Cửa (**戸**) có rìu (**斤**) canh giữ.", tipSoundOn: "**Sho** sở.", tipSoundKun: "**Tokoro** nơi.", words: [{w:"住所 (じゅうしょ)", m:"Địa chỉ"}, {w:"場所 (ばしょ)", m:"Nơi chốn"}] },
            "差": { hanviet: "SAI", mean: "Khác biệt", on: "サ", kun: "さ.す", radicals: "Dương (⺶) + Công (工)", tipImg: "Dê (**⺶**) làm việc công (**工**) bị sai.", tipSoundOn: "**Sa** sai.", tipSoundKun: "**Sa**su chỉ.", words: [{w:"交差点 (こうさてん)", m:"Ngã tư"}, {w:"差別 (さべつ)", m:"Phân biệt"}] },
            "点": { hanviet: "ĐIỂM", mean: "Điểm", on: "テン", kun: "", radicals: "Hỏa (灬) + Chiếm (占)", tipImg: "Chiếm (**占**) lấy lửa (**灬**) là điểm nóng.", tipSoundOn: "**Ten** điểm.", tipSoundKun: "", words: [{w:"交差点 (こうさてん)", m:"Ngã tư"}, {w:"点数 (てんすう)", m:"Điểm số"}] },
            "信": { hanviet: "TÍN", mean: "Tin tưởng", on: "シン", kun: "", radicals: "Nhân (亻) + Ngôn (言)", tipImg: "Lời nói (**言**) của người (**亻**) có uy tín.", tipSoundOn: "**Shin** tín.", tipSoundKun: "", words: [{w:"信号 (しんごう)", m:"Đèn giao thông"}, {w:"信用 (しんよう)", m:"Tin dùng"}] },
            "号": { hanviet: "HIỆU", mean: "Số hiệu", on: "ゴウ", kun: "", radicals: "Khẩu (口) + Khuy (丂)", tipImg: "Miệng (**口**) kêu gào số 5.", tipSoundOn: "**Gou** hiệu.", tipSoundKun: "", words: [{w:"信号 (しんごう)", m:"Đèn giao thông"}, {w:"番号 (ばんごう)", m:"Số hiệu"}] },
            "曲": { hanviet: "KHÚC", mean: "Cong/Rẽ", on: "キョク", kun: "ま.がる", radicals: "Điền (田)", tipImg: "Ruộng (**田**) bị uốn cong.", tipSoundOn: "**Kyoku** khúc.", tipSoundKun: "**Ma**garu rẽ.", words: [{w:"曲がります (まがります)", m:"Rẽ/Quẹo"}, {w:"曲 (きょく)", m:"Ca khúc"}] },
            "付": { hanviet: "PHÓ", mean: "Gắn vào", on: "フ", kun: "つ.ける", radicals: "Nhân (亻) + Thốn (寸)", tipImg: "Người (**亻**) trao tấc (**寸**) lòng.", tipSoundOn: "**Fu** phó.", tipSoundKun: "**Tsu**keru gắn.", words: [{w:"気を付けます (きをつけます)", m:"Chú ý"}, {w:"受付 (うけつけ)", m:"Lễ tân"}] },
            "急": { hanviet: "CẤP", mean: "Vội", on: "キュウ", kun: "いそ.ぐ", radicals: "Tâm (心) + Trừ (刍)", tipImg: "Tim (**心**) bị đè nén (**刍**) rất gấp.", tipSoundOn: "**Kyuu** cấp.", tipSoundKun: "**Iso**gu vội.", words: [{w:"急ぎます (いそぎます)", m:"Vội/Gấp"}, {w:"急行 (きゅうこう)", m:"Tàu tốc hành"}] },
            "止": { hanviet: "CHỈ", mean: "Dừng", on: "シ", kun: "と.める", radicals: "Chỉ (止)", tipImg: "Dấu chân dừng lại.", tipSoundOn: "**Shi** chỉ.", tipSoundKun: "**To**meru dừng.", words: [{w:"止めます (とめます)", m:"Dừng xe"}, {w:"中止 (ちゅうし)", m:"Hủy bỏ"}] },
            "雨": { hanviet: "VŨ", mean: "Mưa", on: "ウ", kun: "あめ", radicals: "Vũ (雨)", tipImg: "Những hạt mưa rơi.", tipSoundOn: "**U** vũ.", tipSoundKun: "**Ame** mưa.", words: [{w:"雨 (あめ)", m:"Mưa"}, {w:"雨季 (うき)", m:"Mùa mưa"}] },
            "磨": { hanviet: "MA", mean: "Mài", on: "マ", kun: "みが.く", radicals: "Thạch (石) + Ma (麻)", tipImg: "Cây gai (**麻**) mài lên đá (**石**).", tipSoundOn: "**Ma** ma.", tipSoundKun: "**Miga**ku đánh răng.", words: [{w:"磨きます (みがきます)", m:"Đánh răng/Mài"}, {w:"研磨 (けんま)", m:"Mài giũa"}] }
        };

        // --- 4. APP LOGIC (Standard Day 1 Logic) ---
        let currentIndex = 0; 
        let currentQuizItem = null; 
        let score = 0; 
        let currentStrokeSvg = null;

        function init() {
            renderList();
            renderGrammarMenu();
            loadWord(0);
            
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', e => { 
                    const t = e.target.value.toLowerCase(); 
                    document.querySelectorAll('.vocab-item').forEach(el => el.style.display = el.innerText.toLowerCase().includes(t) ? 'block' : 'none'); 
                });
            }

            const mobileSearchInput = document.getElementById('mobileSearchInput');
            if (mobileSearchInput) {
                mobileSearchInput.addEventListener('input', e => { 
                    const t = e.target.value.toLowerCase(); 
                    document.querySelectorAll('.vocab-item').forEach(el => el.style.display = el.innerText.toLowerCase().includes(t) ? 'block' : 'none'); 
                });
            }

            const quizInput = document.getElementById('quiz-input');
            if (quizInput) {
                quizInput.addEventListener('keypress', e => { if(e.key === 'Enter') checkAnswer(); });
            }
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`tab-${tab}`).classList.add('active');
            document.getElementById('learn-section').classList.toggle('hidden', tab !== 'learn');
            document.getElementById('quiz-section').classList.toggle('hidden', tab !== 'quiz');
            if(tab === 'quiz') nextQuestion();
        }

        function renderList() {
            const listD = document.getElementById('vocabList'); 
            const listM = document.getElementById('mobileVocabList');
            const html = vocabData.map((item, i) => `
                <div class="vocab-item p-3 border-b hover:bg-gray-50 cursor-pointer rounded-lg mx-1 my-1" data-index="${i}" onclick="loadWord(${i}); if(window.innerWidth < 768) toggleDrawer();">
                    <div class="flex justify-between font-bold items-center">
                        <span class="text-gray-800 ja-text">${item.Kanji || item.Furigana}</span>
                        <span class="text-gray-300 text-xs font-mono">#${item.STT}</span>
                    </div>
                    <div class="text-xs text-gray-500 mt-1 truncate">${item.Nghĩa}</div>
                </div>`).join('');
            if (listD) listD.innerHTML = html;
            if (listM) listM.innerHTML = html;
        }

        function loadWord(idx) {
            currentIndex = idx; 
            const word = vocabData[idx];
            document.querySelectorAll('.vocab-item').forEach(el => el.classList.remove('active'));
            document.querySelectorAll(`.vocab-item[data-index="${idx}"]`).forEach(el => el.classList.add('active'));
            
            const activeItem = document.querySelector(`.vocab-item[data-index="${idx}"]`);
            if (activeItem) activeItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

            document.getElementById('headerProgress').innerText = `${idx+1}/${vocabData.length}`;
            document.getElementById('wordIndex').innerText = `#${word.STT}`;
            document.getElementById('cardKanji').innerText = word.Kanji || word.Furigana;
            document.getElementById('cardFurigana').innerText = word.Furigana;
            document.getElementById('cardMeaning').innerText = word.Nghĩa;
            document.getElementById('wordType').innerText = word.type.toUpperCase();
            
            const hasKanji = word.Kanji && word.Kanji !== word.Furigana;
            document.getElementById('strokeBtn').classList.toggle('hidden', !hasKanji);
            
            renderShadowing(word);
        }

        function renderShadowing(word) {
            const cont = document.getElementById('sentenceList'); 
            cont.innerHTML = '';
            
            if(!word.conv) { 
                document.getElementById('emptyState').classList.remove('hidden'); 
                return; 
            }
            document.getElementById('emptyState').classList.add('hidden');
            
            const types = [
                { k:'polite', l:'Lịch sự', m:word.conv.pVi, i:'user-tie', c:'indigo' }, 
                { k:'casual', l:'Thân mật', m:word.conv.cVi, i:'comments', c:'pink' }
            ];
            
            types.forEach(t => {
                const grammarBtn = word.conv.gIds && word.conv.gIds.length > 0 
                    ? `<button onclick="openExplan('${word.conv.gIds.join(',')}')" class="text-xs text-indigo-500 hover:text-indigo-700 font-bold px-2 py-1 rounded hover:bg-indigo-50 transition"><i class="fas fa-info-circle"></i> Ngữ pháp</button>`
                    : '';

                cont.innerHTML += `
                    <div class="shadow-card bg-white rounded-2xl p-4 border border-gray-100">
                        <div class="flex justify-between border-b border-gray-100 pb-2 mb-3">
                            <div class="flex gap-2 items-center">
                                <div class="bg-${t.c}-50 p-1.5 rounded text-${t.c}-600"><i class="fas fa-${t.i}"></i></div>
                                <span class="text-xs font-bold text-gray-400 uppercase tracking-wide">${t.l}</span>
                            </div>
                            ${grammarBtn}
                        </div>
                        <div class="flex justify-between items-start gap-3">
                            <div>
                                <div class="text-lg md:text-xl ja-text font-medium text-gray-800 mb-1 cursor-pointer hover:text-indigo-600 transition-colors" onclick="speakText('${word.conv[t.k]}')">${word.conv[t.k]}</div>
                                <div class="text-sm text-gray-500 italic">${t.m}</div>
                            </div>
                            <button onclick="speakText('${word.conv[t.k]}')" class="audio-btn text-${t.c}-400 hover:text-${t.c}-600 p-2 rounded-full hover:bg-${t.c}-50 transition-colors flex-shrink-0">
                                <i class="fas fa-volume-up text-xl"></i>
                            </button>
                        </div>
                    </div>`;
            });
        }

        function openExplan(idsStr) {
            const ids = idsStr.split(','); 
            const f = document.getElementById('dgFormula'); 
            const e = document.getElementById('dgExplanation');
            
            f.innerText = ids.map(id => grammarRepo[id] ? grammarRepo[id].formula : "N/A").join("  /  ");
            e.innerHTML = ids.map(id => {
                if (!grammarRepo[id]) return `<div class="text-red-500">Missing grammar: ${id}</div>`;
                return `
                <div class="pb-2 border-b border-gray-100 last:border-0">
                    <strong class="text-indigo-700 block mb-1">${grammarRepo[id].title} <span class="text-xs font-normal text-gray-400">(${grammarRepo[id].desc.split(':')[0]})</span></strong>
                    <p>${grammarRepo[id].desc.split(':').slice(1).join(':') || grammarRepo[id].desc}</p>
                    <p class="text-xs text-gray-400 mt-1 italic">Vd: ${grammarRepo[id].ex}</p>
                </div>`;
            }).join("");
            
            showModal('detailGrammarModal');
        }

        function renderGrammarMenu() {
            const grid = document.getElementById('grammarGrid'); 
            grid.innerHTML = '';
            Object.keys(grammarRepo).forEach(key => {
                const r = grammarRepo[key];
                grid.innerHTML += `
                    <div class="bg-white p-4 rounded-xl border border-gray-100 flex flex-col justify-between hover:shadow-md transition cursor-pointer" onclick="speakText('${r.ex}')">
                        <div>
                            <div class="font-bold text-sm text-indigo-600 mb-1 flex items-center gap-2"><i class="fas fa-tag text-xs"></i> ${r.title}</div>
                            <code class="text-xs block bg-gray-50 p-1.5 rounded mb-2 border border-gray-200 font-mono text-gray-700">${r.formula}</code>
                            <p class="text-xs text-gray-500 mb-2 line-clamp-2">${r.desc}</p>
                        </div>
                        <div class="bg-indigo-50 p-2 rounded flex justify-between items-center gap-2 mt-2">
                            <span class="text-[11px] font-medium text-indigo-800 ja-text truncate">${r.ex}</span>
                            <i class="fas fa-volume-up text-indigo-400 text-xs"></i>
                        </div>
                    </div>`;
            });
        }

        function showModal(id) { 
            const modal = document.getElementById(id);
            modal.classList.remove('hidden'); 
            setTimeout(() => { 
                document.getElementById(id.replace('Modal','Backdrop')).classList.remove('opacity-0'); 
                document.getElementById(id.replace('Modal','Panel')).classList.remove('opacity-0', 'scale-95'); 
            }, 10); 
        }
        function closeModal(id) { 
            const b = document.getElementById(id.replace('Modal','Backdrop')); 
            const p = document.getElementById(id.replace('Modal','Panel'));
            if(b) b.classList.add('opacity-0'); 
            if(p) p.classList.add('opacity-0', 'scale-95');
            setTimeout(() => document.getElementById(id).classList.add('hidden'), 200); 
        }
        function openGrammarList() { showModal('grammarListModal'); }

        async function openStrokeModal(char) {
            const word = vocabData[currentIndex]; 
            const kanjis = word.Kanji.match(/[\u4e00-\u9faf]/g) || [];
            if(kanjis.length === 0) return;
            const target = char || kanjis[0];
            const tabs = document.getElementById('strokeTabs'); 
            tabs.innerHTML = '';
            if(kanjis.length > 1) {
                kanjis.forEach(k => {
                    const b = document.createElement('button'); 
                    b.innerText = k;
                    b.className = `w-12 h-12 text-xl rounded-xl font-bold border transition ja-text ${k===target ? 'bg-pink-600 text-white border-pink-600 shadow-lg' : 'bg-white text-gray-600 border-gray-200 hover:bg-gray-50'}`;
                    b.onclick = () => showKanjiStroke(k); 
                    tabs.appendChild(b);
                });
            }
            showModal('strokeModal'); 
            await showKanjiStroke(target);
        }

        async function showKanjiStroke(k) {
            const d = kanjiDetails[k]; 
            const c = document.getElementById('kanjiDetailContent'); 
            const e = document.getElementById('kanjiDetailEmpty');
            if(d) {
                c.classList.remove('hidden'); e.classList.add('hidden');
                document.getElementById('detailKanji').innerText = k; 
                document.getElementById('detailHanViet').innerText = d.hanviet || '?';
                document.getElementById('detailMeaning').innerText = d.mean || ''; 
                document.getElementById('detailOn').innerText = d.on || '-'; 
                document.getElementById('detailKun').innerText = d.kun || '-';
                document.getElementById('detailRadicals').innerText = d.radicals || '...';
                
                const fmt = s => s.replace(/\*\*(.*?)\*\*/g, '<span class="font-bold text-gray-900">$1</span>');
                document.getElementById('detailTipImg').innerHTML = fmt(d.tipImg || ''); 
                document.getElementById('detailTipSoundOn').innerHTML = fmt(d.tipSoundOn || ''); 
                document.getElementById('detailTipSoundKun').innerHTML = fmt(d.tipSoundKun || '');
                
                document.getElementById('btnPlayOn').onclick = () => speakText(d.on);
                document.getElementById('btnPlayKun').onclick = () => speakText(d.kun);

                const wc = document.getElementById('detailWords'); 
                wc.innerHTML = '';
                if(d.words) {
                    d.words.forEach(w => wc.innerHTML += `<div class="flex justify-between items-center bg-gray-50 p-2 rounded hover:bg-gray-100 cursor-pointer border border-transparent hover:border-gray-200 transition" onclick="speakText('${w.w}')"><span class="text-lg font-bold text-indigo-700 ja-text">${w.w}</span><span class="text-xs text-gray-500 font-medium">${w.m}</span></div>`);
                }
            } else { 
                c.classList.add('hidden'); e.classList.remove('hidden'); 
            }
            const anim = document.getElementById('strokeAnimContainer'); 
            const grid = document.getElementById('strokeGridContainer');
            anim.innerHTML = '<i class="fas fa-spinner fa-spin text-gray-300 text-2xl"></i>'; 
            grid.innerHTML = '';
            try {
                const r = await fetch(`https://cdn.jsdelivr.net/gh/KanjiVG/kanjivg/kanji/${getKanjiHex(k)}.svg`);
                if(!r.ok) throw new Error();
                const svgText = await r.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(svgText, "image/svg+xml");
                doc.querySelectorAll('path').forEach(p => p.setAttribute('style', 'opacity:0; stroke:#333; stroke-width:3; fill:none; stroke-linecap:round; stroke-linejoin:round;')); 
                anim.innerHTML = new XMLSerializer().serializeToString(doc.documentElement);
                const mainSvg = anim.querySelector('svg');
                mainSvg.setAttribute('width','100%'); mainSvg.setAttribute('height','100%');
                currentStrokeSvg = mainSvg;
                replayStrokeAnimation();
                const cleanDoc = parser.parseFromString(svgText, "image/svg+xml"); 
                cleanDoc.querySelectorAll('path').forEach((p, i) => {
                    const b = document.createElement('div'); 
                    b.className = "w-16 h-16 stroke-grid-box flex items-center justify-center rounded bg-white shadow-sm";
                    const clone = cleanDoc.documentElement.cloneNode(true);
                    clone.setAttribute('width','100%'); clone.setAttribute('height','100%');
                    clone.querySelectorAll('path').forEach((pp, idx) => {
                        pp.style.fill="none"; pp.style.strokeLinecap="round"; pp.style.strokeLinejoin="round";
                        if(idx<i) { pp.style.stroke="#e5e7eb"; pp.style.strokeWidth="3"; }
                        else if(idx===i) { pp.style.stroke="#db2777"; pp.style.strokeWidth="4"; } 
                        else pp.style.display="none";
                    });
                    b.appendChild(clone); grid.appendChild(b);
                });
            } catch(e) { anim.innerHTML = "<span class='text-xs text-red-400'>Lỗi tải nét viết</span>"; }
        }

        function replayStrokeAnimation() {
            if(!currentStrokeSvg) return;
            const paths = currentStrokeSvg.querySelectorAll('path');
            paths.forEach(p => { p.style.transition='none'; p.style.opacity='0'; });
            void currentStrokeSvg.offsetWidth;
            let delay = 0;
            paths.forEach(p => {
                const len = p.getTotalLength();
                p.style.strokeDasharray = len; p.style.strokeDashoffset = len; p.style.opacity = '1';
                setTimeout(() => { p.style.transition = `stroke-dashoffset 0.6s ease-in-out`; p.style.strokeDashoffset = '0'; }, delay * 1000);
                delay += 0.6;
            });
        }

        function getKanjiHex(k) { return k.charCodeAt(0).toString(16).padStart(5, '0'); }
        function speakText(t) { if ('speechSynthesis' in window) { const u = new SpeechSynthesisUtterance(t); u.lang = 'ja-JP'; u.rate = 0.9; speechSynthesis.speak(u); } }
        function speakCurrent() { speakText(vocabData[currentIndex].Furigana); }
        function toggleDrawer() { const d = document.getElementById('mobileDrawer'); const c = document.getElementById('drawerContent'); const b = document.getElementById('drawerBackdrop'); if(d.classList.contains('pointer-events-none')) { d.classList.remove('pointer-events-none'); c.classList.remove('-translate-x-full'); b.classList.remove('opacity-0'); } else { c.classList.add('-translate-x-full'); b.classList.add('opacity-0'); setTimeout(() => d.classList.add('pointer-events-none'), 300); } }

        function nextQuestion() {
            document.getElementById('feedback-area').classList.add('hidden'); document.getElementById('btn-check').classList.remove('hidden'); document.getElementById('btn-next').classList.add('hidden');
            document.getElementById('quiz-kanji').className = "text-6xl ja-text font-bold text-gray-800 mb-4 transition-all inline-block";
            const inp = document.getElementById('quiz-input'); inp.value = ''; inp.disabled = false; inp.focus();
            const valid = vocabData.filter(v => v.Furigana !== "...");
            currentQuizItem = valid[Math.floor(Math.random() * valid.length)];
            document.getElementById('quiz-kanji').innerText = currentQuizItem.Kanji || currentQuizItem.Furigana;
            document.getElementById('quiz-meaning').innerText = currentQuizItem.Nghĩa;
        }
        function checkAnswer() {
            const inp = document.getElementById('quiz-input'); if(!inp.value.trim()) return;
            inp.disabled = true; 
            const correct = inp.value.trim() === currentQuizItem.Furigana;
            const k = document.getElementById('quiz-kanji'); const fbTitle = document.getElementById('feedback-title'); const fbArea = document.getElementById('feedback-area');
            if(correct) { 
                score += 10; k.classList.add("text-green-600", "correct-anim"); 
                fbTitle.innerHTML = '<span class="text-green-600"><i class="fas fa-check-circle mr-2"></i> Chính xác!</span>';
                fbArea.className = fbArea.className.replace("bg-red-50 border-red-200", "") + " bg-green-50 border-green-200";
                speakText(currentQuizItem.Furigana); 
            } else { 
                score = Math.max(0, score - 5); k.classList.add("text-red-500", "wrong-anim"); 
                fbTitle.innerHTML = '<span class="text-red-600"><i class="fas fa-times-circle mr-2"></i> Sai rồi!</span>';
                fbArea.className = fbArea.className.replace("bg-green-50 border-green-200", "") + " bg-red-50 border-red-200";
            }
            document.getElementById('score-display').innerText = score; document.getElementById('correct-answer').innerText = currentQuizItem.Furigana;
            document.getElementById('feedback-area').classList.remove('hidden'); document.getElementById('btn-check').classList.add('hidden'); document.getElementById('btn-next').classList.remove('hidden');
        }
        function playQuizAudio() { if(currentQuizItem) speakText(currentQuizItem.Furigana); }
        function prevWord() { if(currentIndex > 0) loadWord(currentIndex - 1); }
        function nextWord() { if(currentIndex < vocabData.length - 1) loadWord(currentIndex + 1); }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
