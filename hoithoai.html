<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Danh mục Hội thoại - Học Tiếng Nhật Siêu Tốc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f8f9fa;
        }
        .jp-font {
            font-family: 'Noto Sans JP', sans-serif;
        }
        .lesson-link {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        .lesson-link:hover {
            transform: translateY(-4px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1);
            border-color: #38bdf8;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto px-4 py-8 md:py-16 max-w-5xl">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-sky-700 jp-font">会話一覧</h1>
            <h2 class="text-2xl md:text-3xl font-bold text-gray-700 mt-2">Danh sách bài học Hội thoại</h2>
            <a href="index.html" class="text-sky-600 hover:text-sky-800 mt-4 inline-block">&larr; Quay về trang chủ</a>
        </header>

        <main>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6">
                
<style>
    .lesson-link.completed {
        background-color: #f0fdf4; /* Màu nền xanh lá nhạt */
        border-color: #16a34a; /* Viền xanh lá */
    }
    .lesson-link.completed .checkmark {
        display: block;
    }
</style>

<div class="mb-8 text-center">
    <h3 id="progress-counter" class="text-xl font-bold text-gray-700"></h3>
</div>

<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 md:gap-6">
    <script>
        const categoryPrefix = 'kaiwaday'; // Đặt tiền tố cho danh mục này
        let completedCount = 0;

        for (let i = 1; i <= 30; i++) {
            const lessonId = `${categoryPrefix}${i}`;
            const fileName = `${categoryPrefix}${i}.html`; // QUAN TRỌNG: Sửa lại cho khớp tên file của bạn
            
            const isCompleted = isLessonComplete(lessonId);
            if (isCompleted) {
                completedCount++;
            }
            
            const completedClass = isCompleted ? 'completed' : '';
            const checkmark = isCompleted ? '<span class="checkmark text-green-500 font-bold">✔</span>' : '';

            document.write(`
                <a href="${fileName}" class="lesson-link bg-white p-4 rounded-lg flex flex-col items-center justify-center text-center aspect-square ${completedClass}">
                    ${checkmark}
                    <span class="text-sm text-gray-400">Ngày</span>
                    <span class="text-4xl font-bold text-sky-600">${i}</span>
                </a>
            `);
        }
        
        // Cập nhật bộ đếm tiến độ
        document.getElementById('progress-counter').innerText = `Đã hoàn thành: ${completedCount} / 30 bài`;
    </script>
</div>

            </div>
        </main>

        <footer class="text-center mt-16 text-gray-400 text-sm">
            <p>&copy; 2025 Tiếng Nhật Siêu Tốc. All rights reserved.</p>
        </footer>

    </div>
<script>
    const PROGRESS_KEY = 'tiengNhatSieuTocProgress';

    // Hàm để lấy dữ liệu tiến độ từ localStorage
    function getProgress() {
        const data = localStorage.getItem(PROGRESS_KEY);
        return data ? JSON.parse(data) : {};
    }

    // Hàm kiểm tra xem một bài học đã hoàn thành chưa
    function isLessonComplete(lessonId) {
        const progress = getProgress();
        return progress[lessonId] === true;
    }
</script>
</body>
</html>
