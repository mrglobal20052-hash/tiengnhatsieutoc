<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AzaKanji - Flashcard Tr·ª£ Ph√≥ T·ª´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-yellow: #FFD93D;
            --primary-red: #FF6B6B;
            --primary-blue: #4facfe;
            --bg-gradient: linear-gradient(135deg, #FFF9E3 0%, #FFFFFF 100%);
            --card-shadow: 0 20px 40px rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .kanji-font {
            font-family: 'Noto Sans JP', sans-serif;
        }

        .glow-aura {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(255, 217, 61, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
            z-index: -1;
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.3; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.5; }
        }

        .perspective-container {
            perspective: 2000px;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            transform-style: preserve-3d;
            cursor: pointer;
        }

        .is-flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
            box-shadow: var(--card-shadow);
            border: 4px solid white;
        }

        .card-front {
            background: white;
            border: 6px solid var(--primary-yellow);
        }
        
        /* Dynamic border color based on type */
        .type-particle .card-front { border-color: var(--primary-blue); }
        .type-adverb .card-front { border-color: var(--primary-yellow); }

        .card-back {
            background: var(--primary-yellow);
            transform: rotateY(180deg);
        }
        
        .type-particle .card-back { background: #e0f2fe; } /* Light Blue */
        .type-adverb .card-back { background: #fffbeb; } /* Light Yellow */

        .word-main {
            font-size: 3rem;
            font-weight: 800;
            line-height: 1.2;
            margin-bottom: 0.5rem;
        }
        
        .type-particle .word-main { color: #0284c7; }
        .type-adverb .word-main { color: #d97706; }

        .level-tag {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: #FF6B6B;
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .meaning-box {
            background: #FFF5CC;
            padding: 0.8rem 2rem;
            border-radius: 999px;
            color: #856404;
            font-weight: 700;
            font-size: 1.1rem;
            max-width: 90%;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .type-particle .meaning-box { background: #bae6fd; color: #0369a1; }

        .example-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1.2rem;
            padding: 1rem;
            width: 100%;
            transition: all 0.3s ease;
            text-align: left;
            position: relative;
            margin-bottom: 0.8rem;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .speaker-btn {
            position: absolute;
            right: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            color: #FF6B6B;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 50;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border: 2px solid #fee2e2;
            transition: transform 0.2s;
        }

        .speaker-btn:active {
            transform: translateY(-50%) scale(0.9);
            background: #FF6B6B;
            color: white;
        }

        .floating {
            animation: floating 4s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        .scroll-box {
            overflow-y: auto;
            max-height: 100%;
            width: 100%;
            padding: 0.2rem;
        }
        
        /* Category Tabs */
        .category-btn {
            padding: 0.5rem 1rem;
            border-radius: 99px;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .cat-active {
            background: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        
        /* Shuffle Animation */
        .shaking {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center p-4 min-h-screen">
    <div class="glow-aura"></div>

    <!-- Header -->
    <header class="text-center mb-4 w-full max-w-sm">
        <h1 class="text-2xl font-bold text-gray-800 tracking-tight flex items-center justify-center gap-2">
            <span class="text-3xl">üé¥</span> Flashcard Tr·ª£ Ph√≥ T·ª´
        </h1>
        <div class="flex flex-wrap justify-center gap-2 mt-4">
            <button onclick="filterCards('all')" id="btn-all" class="category-btn cat-active text-gray-600 bg-gray-100">T·∫•t c·∫£</button>
            <button onclick="filterCards('particle')" id="btn-particle" class="category-btn text-blue-600 bg-blue-50 border-blue-200">Tr·ª£ t·ª´</button>
            <button onclick="filterCards('adverb')" id="btn-adverb" class="category-btn text-orange-600 bg-orange-50 border-orange-200">Ph√≥ t·ª´</button>
            <button onclick="shuffleCards()" class="category-btn text-purple-600 bg-purple-50 border-purple-200" title="Tr·ªôn th·∫ª (Ph√≠m S)"><span class="text-lg">üîÄ</span></button>
        </div>
    </header>

    <!-- Main App -->
    <main class="w-full max-w-sm flex flex-col items-center">
        
        <!-- Card Container with Touch Events -->
        <div id="card-container" class="perspective-container w-full aspect-[4/5] mb-6 type-particle" 
             ontouchstart="handleTouchStart(event)" 
             ontouchmove="handleTouchMove(event)" 
             ontouchend="handleTouchEnd(event)">
             
            <div class="card-inner" id="card-inner">
                <!-- Front -->
                <div class="card-face card-front" onclick="toggleFlip()">
                    <div class="level-tag" id="ui-level">N5</div>
                    <div class="flex flex-col items-center justify-center w-full flex-1">
                        <div class="word-main floating kanji-font" id="ui-word">„ÅØ</div>
                        <div id="ui-reading" class="text-xl font-bold text-gray-500 mb-6 bg-gray-100 px-4 py-1 rounded-full kanji-font">wa</div>
                        <div class="meaning-box mb-2 text-center" id="ui-meaning">Ch·ªß ƒë·ªÅ c√¢u</div>
                    </div>
                    <p class="text-gray-400 text-[10px] font-medium absolute bottom-6">Ch·∫°m ƒë·ªÉ xem v√≠ d·ª• ‚ú®</p>
                </div>
                
                <!-- Back -->
                <div class="card-face card-back">
                    <div class="scroll-box flex flex-col justify-center h-full w-full">
                        <div class="example-item shadow-sm">
                            <div class="pr-10">
                                <p class="text-lg font-bold text-gray-800 leading-snug kanji-font" id="ui-ex1-jp"></p>
                                <p class="text-xs text-gray-500 font-medium mt-1" id="ui-ex1-hira"></p>
                                <p class="text-sm text-gray-600 border-t border-gray-200 pt-1 mt-1 font-semibold" id="ui-ex1-vn"></p>
                            </div>
                            <button class="speaker-btn" onclick="speakText(1, event)">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>

                        <div class="example-item shadow-sm">
                            <div class="pr-10">
                                <p class="text-lg font-bold text-gray-800 leading-snug kanji-font" id="ui-ex2-jp"></p>
                                <p class="text-xs text-gray-500 font-medium mt-1" id="ui-ex2-hira"></p>
                                <p class="text-sm text-gray-600 border-t border-gray-200 pt-1 mt-1 font-semibold" id="ui-ex2-vn"></p>
                            </div>
                            <button class="speaker-btn" onclick="speakText(2, event)">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="text-gray-500 font-bold text-[10px] cursor-pointer opacity-70 absolute bottom-4 w-full text-center" onclick="toggleFlip()">
                        ‚Ü∫ Quay l·∫°i
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="flex items-center space-x-6">
            <button onclick="changeCard(-1)" class="w-14 h-14 bg-white rounded-2xl shadow-lg flex items-center justify-center text-2xl hover:bg-gray-50 hover:scale-105 transition-all text-gray-700" title="Ph√≠m m≈©i t√™n tr√°i">
                ‚Üê
            </button>
            <div class="bg-white/90 px-5 py-2 rounded-full shadow-inner border border-gray-200">
                <span class="text-xl font-bold text-gray-700" id="ui-counter">1 / 65</span>
            </div>
            <button onclick="changeCard(1)" class="w-14 h-14 bg-white rounded-2xl shadow-lg flex items-center justify-center text-2xl hover:bg-gray-50 hover:scale-105 transition-all text-gray-700" title="Ph√≠m m≈©i t√™n ph·∫£i">
                ‚Üí
            </button>
        </div>
        <p class="text-gray-400 text-[10px] mt-4 hidden md:block">G·ª£i √Ω: D√πng ph√≠m ‚¨Ö ‚û° ƒë·ªÉ chuy·ªÉn, Space ƒë·ªÉ l·∫≠t, S ƒë·ªÉ tr·ªôn.</p>
    </main>

    <footer class="mt-4 text-center max-w-xs px-4 pb-4">
        <p class="text-gray-400 italic text-[11px] leading-relaxed">"T√¥i s·∫Ω h·ªçc ti·∫øng Nh·∫≠t m·ªói ng√†y ƒë·ªÉ giao ti·∫øp t·ªët. Ch√¢n Ng√£ d·∫´n l·ªëi."</p>
    </footer>

    <script>
        // --- MASTER DATA ---
        const masterData = [
            // === TR·ª¢ T·ª™ (35) ===
            { type: "particle", level: "N5", word: "„ÅØ", reading: "wa", meaning: "Th√¨, l√†... (Ch·ªß ƒë·ªÅ)", ex1_jp: "ÁßÅ„ÅØÂ≠¶Áîü„Åß„Åô„ÄÇ", ex1_hira: "„Çè„Åü„Åó„ÅØ „Åå„Åè„Åõ„ÅÑ„Åß„Åô", ex1_vn: "T√¥i l√† sinh vi√™n.", ex2_jp: "‰ø∫„ÄÅÂ≠¶Áîü„Å†„Çà„ÄÇ", ex2_hira: "„Åä„Çå „Åå„Åè„Åõ„ÅÑ„Å†„Çà", ex2_vn: "T·ªõ l√† sinh vi√™n ƒë·∫•y." },
            { type: "particle", level: "N5", word: "„Åå", reading: "ga", meaning: "Ch·ªß ng·ªØ / T·ªìn t·∫°i", ex1_jp: "ÊïôÂÆ§„Å´Â≠¶Áîü„Åå„ÅÑ„Åæ„Åô„ÄÇ", ex1_hira: "„Åç„Çá„ÅÜ„Åó„Å§„Å´ „Åå„Åè„Åõ„ÅÑ„Åå „ÅÑ„Åæ„Åô", ex1_vn: "C√≥ sinh vi√™n trong l·ªõp h·ªçc.", ex2_jp: "ÊïôÂÆ§„Å´Â≠¶Áîü„Åå„ÅÑ„Çã„ÄÇ", ex2_hira: "„Åç„Çá„ÅÜ„Åó„Å§„Å´ „Åå„Åè„Åõ„ÅÑ„Åå „ÅÑ„Çã", ex2_vn: "C√≥ sinh vi√™n trong l·ªõp k√¨a." },
            { type: "particle", level: "N5", word: "„Çí", reading: "o", meaning: "T√°c ƒë·ªông h√†nh ƒë·ªông", ex1_jp: "„Ç≥„Éº„Éí„Éº„ÇíÈ£≤„Åø„Åæ„Åô„ÄÇ", ex1_hira: "„Åì„Éº„Å≤„Éº„Çí „ÅÆ„Åø„Åæ„Åô", ex1_vn: "T√¥i u·ªëng c√† ph√™.", ex2_jp: "„Ç≥„Éº„Éí„ÉºÈ£≤„ÇÄÔºü", ex2_hira: "„Åì„Éº„Å≤„Éº „ÅÆ„ÇÄ", ex2_vn: "U·ªëng c√† ph√™ kh√¥ng?" },
            { type: "particle", level: "N5", word: "„Å´", reading: "ni", meaning: "Th·ªùi gian / ƒê·ªãa ƒëi·ªÉm", ex1_jp: "7ÊôÇ„Å´Ëµ∑„Åç„Åæ„Åô„ÄÇ", ex1_hira: "„Åó„Å°„Åò„Å´ „Åä„Åç„Åæ„Åô", ex1_vn: "T√¥i th·ª©c d·∫≠y l√∫c 7 gi·ªù.", ex2_jp: "7ÊôÇ„Å´Ëµ∑„Åç„Çã„ÄÇ", ex2_hira: "„Åó„Å°„Åò„Å´ „Åä„Åç„Çã", ex2_vn: "7 gi·ªù d·∫≠y nh√©." },
            { type: "particle", level: "N5", word: "„Åß", reading: "de", meaning: "N∆°i ch·ªën / Ph∆∞∆°ng ti·ªán", ex1_jp: "ÈõªËªä„ÅßË°å„Åç„Åæ„Åô„ÄÇ", ex1_hira: "„Åß„Çì„Åó„ÇÉ„Åß „ÅÑ„Åç„Åæ„Åô", ex1_vn: "T√¥i ƒëi b·∫±ng t√†u ƒëi·ªán.", ex2_jp: "ÈõªËªä„ÅßË°å„Åè„ÄÇ", ex2_hira: "„Åß„Çì„Åó„ÇÉ„Åß „ÅÑ„Åè", ex2_vn: "ƒêi t√†u ƒëi·ªán nh√©." },
            { type: "particle", level: "N5", word: "„Å∏", reading: "e", meaning: "H∆∞·ªõng di chuy·ªÉn", ex1_jp: "Êó•Êú¨„Å∏Ë°å„Åç„Åæ„Åô„ÄÇ", ex1_hira: "„Å´„Åª„Çì„Å∏ „ÅÑ„Åç„Åæ„Åô", ex1_vn: "T√¥i ƒëi Nh·∫≠t B·∫£n.", ex2_jp: "Êó•Êú¨Ë°å„Åè„ÄÇ", ex2_hira: "„Å´„Åª„Çì „ÅÑ„Åè", ex2_vn: "ƒêi Nh·∫≠t ƒë√¢y." },
            { type: "particle", level: "N5", word: "„Å®", reading: "to", meaning: "V√† / C√πng v·ªõi", ex1_jp: "ÂèãÈÅî„Å®ÈÅä„Å≥„Åæ„Åô„ÄÇ", ex1_hira: "„Å®„ÇÇ„Å†„Å°„Å® „ÅÇ„Åù„Å≥„Åæ„Åô", ex1_vn: "T√¥i ch∆°i v·ªõi b·∫°n b√®.", ex2_jp: "ÂèãÈÅî„Å®ÈÅä„Å∂„ÄÇ", ex2_hira: "„Å®„ÇÇ„Å†„Å°„Å® „ÅÇ„Åù„Å∂", ex2_vn: "Ch∆°i v·ªõi b·∫°n." },
            { type: "particle", level: "N5", word: "„ÇÇ", reading: "mo", meaning: "C≈©ng...", ex1_jp: "ÁßÅ„ÇÇÂ≠¶Áîü„Åß„Åô„ÄÇ", ex1_hira: "„Çè„Åü„Åó„ÇÇ „Åå„Åè„Åõ„ÅÑ„Åß„Åô", ex1_vn: "T√¥i c≈©ng l√† sinh vi√™n.", ex2_jp: "‰ø∫„ÇÇÂ≠¶Áîü„Å†„Çà„ÄÇ", ex2_hira: "„Åä„Çå„ÇÇ „Åå„Åè„Åõ„ÅÑ„Å†„Çà", ex2_vn: "T·ªõ c≈©ng l√† sinh vi√™n ƒë√¢y." },
            { type: "particle", level: "N5", word: "„ÅÆ", reading: "no", meaning: "C·ªßa... (S·ªü h·ªØu)", ex1_jp: "„Åì„Çå„ÅØÁßÅ„ÅÆÊú¨„Åß„Åô„ÄÇ", ex1_hira: "„Åì„Çå„ÅØ „Çè„Åü„Åó„ÅÆ „Åª„Çì „Åß„Åô", ex1_vn: "ƒê√¢y l√† quy·ªÉn s√°ch c·ªßa t√¥i.", ex2_jp: "„Åì„Çå„ÄÅ‰ø∫„ÅÆÊú¨„ÄÇ", ex2_hira: "„Åì„Çå „Åä„Çå„ÅÆ „Åª„Çì", ex2_vn: "ƒê√¢y l√† s√°ch c·ªßa t·ªõ." },
            { type: "particle", level: "N5", word: "„Åã„Çâ", reading: "kara", meaning: "T·ª´ (M·ªëc/Ngu·ªìn)", ex1_jp: "9ÊôÇ„Åã„ÇâÂÉç„Åç„Åæ„Åô„ÄÇ", ex1_hira: "„Åè„Åò„Åã„Çâ „ÅØ„Åü„Çâ„Åç„Åæ„Åô", ex1_vn: "T√¥i l√†m vi·ªác t·ª´ 9 gi·ªù.", ex2_jp: "9ÊôÇ„Åã„Çâ„Å†„Çà„ÄÇ", ex2_hira: "„Åè„Åò„Åã„Çâ „Å†„Çà", ex2_vn: "T·ª´ 9 gi·ªù ƒë·∫•y." },
            { type: "particle", level: "N5", word: "„Åæ„Åß", reading: "made", meaning: "ƒê·∫øn (Gi·ªõi h·∫°n)", ex1_jp: "5ÊôÇ„Åæ„ÅßÂãâÂº∑„Åó„Åæ„Åô„ÄÇ", ex1_hira: "„Åî„Åò„Åæ„Åß „Åπ„Çì„Åç„Çá„ÅÜ „Åó„Åæ„Åô", ex1_vn: "T√¥i h·ªçc ƒë·∫øn 5 gi·ªù.", ex2_jp: "5ÊôÇ„Åæ„Åß„ÇÑ„Çã„ÄÇ", ex2_hira: "„Åî„Åò„Åæ„Åß „ÇÑ„Çã", ex2_vn: "L√†m ƒë·∫øn 5 gi·ªù th√¥i." },
            { type: "particle", level: "N5", word: "„Åã", reading: "ka", meaning: "Ho·∫∑c / C√¢u h·ªèi", ex1_jp: "„ÅäËå∂„ÇíÈ£≤„Åø„Åæ„Åô„Åã„ÄÇ", ex1_hira: "„Åä„Å°„ÇÉ„Çí „ÅÆ„Åø„Åæ„Åô„Åã", ex1_vn: "B·∫°n u·ªëng tr√† kh√¥ng?", ex2_jp: "È£≤„ÇÄ„ÅãÔºü", ex2_hira: "„ÅÆ„ÇÄ„Åã", ex2_vn: "U·ªëng kh√¥ng?" },
            { type: "particle", level: "N5", word: "„Å≠", reading: "ne", meaning: "Nh·ªâ / Nh√©", ex1_jp: "„ÅÑ„ÅÑÂ§©Ê∞ó„Åß„Åô„Å≠„ÄÇ", ex1_hira: "„ÅÑ„ÅÑ „Å¶„Çì„Åç „Åß„Åô„Å≠", ex1_vn: "Th·ªùi ti·∫øt ƒë·∫πp nh·ªâ.", ex2_jp: "Êöë„ÅÑ„Å≠„ÄÇ", ex2_hira: "„ÅÇ„Å§„ÅÑ„Å≠", ex2_vn: "N√≥ng nh·ªâ." },
            { type: "particle", level: "N5", word: "„Çà", reading: "yo", meaning: "ƒê·∫•y / Nh√©", ex1_jp: "„Åì„Çå„ÄÅ„Åä„ÅÑ„Åó„ÅÑ„Åß„Åô„Çà„ÄÇ", ex1_hira: "„Åì„Çå „Åä„ÅÑ„Åó„ÅÑ„Åß„Åô„Çà", ex1_vn: "C√°i n√†y ngon l·∫Øm ƒë·∫•y.", ex2_jp: "Ë°å„Åè„ÇàÔºÅ", ex2_hira: "„ÅÑ„Åè„Çà", ex2_vn: "ƒêi ƒë√¢y nh√©!" },
            { type: "particle", level: "N4", word: "„Çà„Çä", reading: "yori", meaning: "So s√°nh h∆°n", ex1_jp: "„Åì„Çå„Çà„Çä„ÅÇ„Çå„ÅåÂÆâ„ÅÑ„Åß„Åô„ÄÇ", ex1_hira: "„Åì„Çå„Çà„Çä „ÅÇ„Çå„Åå „ÇÑ„Åô„ÅÑ„Åß„Åô", ex1_vn: "C√°i kia r·∫ª h∆°n c√°i n√†y.", ex2_jp: "„Åì„Å£„Å°„ÅÆÊñπ„ÅåÂ•Ω„Åç„ÄÇ", ex2_hira: "„Åì„Å£„Å°„ÅÆ„Åª„ÅÜ„Åå „Åô„Åç", ex2_vn: "T·ªõ th√≠ch b√™n n√†y h∆°n." },
            { type: "particle", level: "N4", word: "„Åª„Å©", reading: "hodo", meaning: "ƒê·∫øn m·ª©c / Kh√¥ng b·∫±ng", ex1_jp: "Êò®Êó•„Åª„Å©Êöë„Åè„Å™„ÅÑ„Åß„Åô„ÄÇ", ex1_hira: "„Åç„ÅÆ„ÅÜ„Åª„Å© „ÅÇ„Å§„Åè„Å™„ÅÑ „Åß„Åô", ex1_vn: "Kh√¥ng n√≥ng b·∫±ng h√¥m qua.", ex2_jp: "Ê≠ª„Å¨„Åª„Å©Áñ≤„Çå„Åü„ÄÇ", ex2_hira: "„Åó„Å¨„Åª„Å© „Å§„Åã„Çå„Åü", ex2_vn: "M·ªát mu·ªën ch·∫øt." },
            { type: "particle", level: "N4", word: "„Åè„Çâ„ÅÑ", reading: "kurai", meaning: "Kho·∫£ng / ƒê·∫øn m·ª©c", ex1_jp: "30ÂàÜ„Åê„Çâ„ÅÑ‰ºë„Åø„Åæ„Åô„ÄÇ", ex1_hira: "„Åï„Çì„Åò„ÇÖ„Å£„Å∑„Çì „Åê„Çâ„ÅÑ „ÇÑ„Åô„Åø„Åæ„Åô", ex1_vn: "Ngh·ªâ kho·∫£ng 30 ph√∫t.", ex2_jp: "„Åì„Çå„Åè„Çâ„ÅÑ„ÄÅ„ÅÑ„ÅÑ„Çà„ÄÇ", ex2_hira: "„Åì„Çå„Åè„Çâ„ÅÑ „ÅÑ„ÅÑ„Çà", ex2_vn: "T·∫ßm n√†y l√† ƒë∆∞·ª£c r·ªìi." },
            { type: "particle", level: "N4", word: "„Åó„Åã", reading: "shika", meaning: "Ch·ªâ (Ph·ªß ƒë·ªãnh)", ex1_jp: "1000ÂÜÜ„Åó„Åã„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ", ex1_hira: "„Åõ„Çì„Åà„Çì„Åó„Åã „ÅÇ„Çä„Åæ„Åõ„Çì", ex1_vn: "T√¥i ch·ªâ c√≥ 1000 y√™n.", ex2_jp: "‰∏Ä‰∫∫„Åó„Åã„ÅÑ„Å™„ÅÑ„ÄÇ", ex2_hira: "„Å≤„Å®„Çä„Åó„Åã „ÅÑ„Å™„ÅÑ", ex2_vn: "Ch·ªâ c√≥ m·ªói m·ªôt ng∆∞·ªùi." },
            { type: "particle", level: "N4", word: "„Å†„Åë", reading: "dake", meaning: "Ch·ªâ (Kh·∫≥ng ƒë·ªãnh)", ex1_jp: "ÁßÅ„Å†„Åë„ÅåË°å„Åç„Åæ„Åô„ÄÇ", ex1_hira: "„Çè„Åü„Åó„Å†„Åë„Åå „ÅÑ„Åç„Åæ„Åô", ex1_vn: "Ch·ªâ t√¥i ƒëi th√¥i.", ex2_jp: "ÂØù„Çã„Å†„Åë„Å†„ÄÇ", ex2_hira: "„Å≠„Çã„Å†„Åë„Å†", ex2_vn: "Ch·ªâ ng·ªß th√¥i." },
            { type: "particle", level: "N4", word: "„Åæ„Åß„Å´", reading: "madeni", meaning: "Tr∆∞·ªõc khi", ex1_jp: "5ÊôÇ„Åæ„Åß„Å´Â∏∞„Çä„Åæ„Åô„ÄÇ", ex1_hira: "„Åî„Åò„Åæ„Åß„Å´ „Åã„Åà„Çä„Åæ„Åô", ex1_vn: "V·ªÅ tr∆∞·ªõc 5 gi·ªù.", ex2_jp: "ÊòéÊó•„Åæ„Åß„Å´„ÇÑ„Å£„Å¶„ÄÇ", ex2_hira: "„ÅÇ„Åó„Åü„Åæ„Åß„Å´ „ÇÑ„Å£„Å¶", ex2_vn: "L√†m xong tr∆∞·ªõc mai nh√©." },
            { type: "particle", level: "N4", word: "„Å∞„Åã„Çä", reading: "bakari", meaning: "To√†n l√† / V·ª´a m·ªõi", ex1_jp: "ËÇâ„Å∞„Åã„ÇäÈ£ü„Åπ„Åæ„Åô„ÄÇ", ex1_hira: "„Å´„Åè„Å∞„Åã„Çä „Åü„Åπ„Åæ„Åô", ex1_vn: "To√†n ƒÉn th·ªãt th√¥i.", ex2_jp: "Ëµ∑„Åç„Åü„Å∞„Åã„Çä„Å†„ÄÇ", ex2_hira: "„Åä„Åç„Åü„Å∞„Åã„Çä„Å†", ex2_vn: "V·ª´a m·ªõi d·∫≠y xong." },
            { type: "particle", level: "N3", word: "„Å´„ÅØ", reading: "ni wa", meaning: "ƒê·ªëi v·ªõi... th√¨...", ex1_jp: "ÁßÅ„Å´„ÅØÈõ£„Åó„ÅÑ„Åß„Åô„ÄÇ", ex1_hira: "„Çè„Åü„Åó„Å´„ÅØ „ÇÄ„Åö„Åã„Åó„ÅÑ„Åß„Åô", ex1_vn: "ƒê·ªëi v·ªõi t√¥i th√¨ kh√≥.", ex2_jp: "‰ø∫„Å´„ÅØÁÑ°ÁêÜ„ÄÇ", ex2_hira: "„Åä„Çå„Å´„ÅØ „ÇÄ„Çä", ex2_vn: "V·ªõi t·ªõ th√¨ ch·ªãu." },
            { type: "particle", level: "N3", word: "„Å®„ÅØ", reading: "to wa", meaning: "C√°i g·ªçi l√† / Nghƒ©a l√†", ex1_jp: "Ëá™Áî±„Å®„ÅØ‰Ωï„Åß„Åô„Åã„ÄÇ", ex1_hira: "„Åò„ÇÜ„ÅÜ„Å®„ÅØ „Å™„Çì„Åß„Åô„Åã", ex1_vn: "T·ª± do c√≥ nghƒ©a l√† g√¨?", ex2_jp: "Ëá™Áî±„Å£„Å¶‰ΩïÔºü", ex2_hira: "„Åò„ÇÜ„ÅÜ„Å£„Å¶ „Å™„Å´", ex2_vn: "T·ª± do l√† g√¨ v·∫≠y?" },
            { type: "particle", level: "N3", word: "„Å∏„ÅÆ", reading: "e no", meaning: "H∆∞·ªõng t·ªõi / ƒê·∫øn", ex1_jp: "Êó•Êú¨„Å∏„ÅÆÊóÖË°å„ÄÇ", ex1_hira: "„Å´„Åª„Çì„Å∏„ÅÆ „Çä„Çá„Åì„ÅÜ", ex1_vn: "Chuy·∫øn ƒëi ƒë·∫øn Nh·∫≠t B·∫£n.", ex2_jp: "Êó•Êú¨„Å∏„ÅÆÊóÖË°å„ÄÅÊ•Ω„Åó„ÅøÔºÅ", ex2_hira: "„Å´„Åª„Çì„Å∏„ÅÆ „Çä„Çá„Åì„ÅÜ „Åü„ÅÆ„Åó„Åø", ex2_vn: "ƒêi Nh·∫≠t th√≠ch qu√°!" },
            { type: "particle", level: "N3", word: "„Å´„ÇÇ", reading: "ni mo", meaning: "C≈©ng ·ªü / C≈©ng cho", ex1_jp: "Êù±‰∫¨„Å´„ÇÇÈõ™„ÅåÈôç„Çä„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Å®„ÅÜ„Åç„Çá„ÅÜ„Å´„ÇÇ „ÇÜ„Åç„Åå „Åµ„Çä„Åæ„Åó„Åü", ex1_vn: "·ªû Tokyo c≈©ng c√≥ tuy·∫øt.", ex2_jp: "Êù±‰∫¨„Å´„ÇÇÈõ™Èôç„Å£„Åü„Çà„ÄÇ", ex2_hira: "„Å®„ÅÜ„Åç„Çá„ÅÜ„Å´„ÇÇ „ÇÜ„Åç „Åµ„Å£„Åü„Çà", ex2_vn: "Tokyo c≈©ng c√≥ tuy·∫øt r·ªìi." },
            { type: "particle", level: "N3", word: "„Å®„ÇÇ", reading: "to mo", meaning: "C√πng v·ªõi c·∫£", ex1_jp: "ÂÆ∂Êóè„Å®„ÇÇÁõ∏Ë´á„Åó„Åæ„Åô„ÄÇ", ex1_hira: "„Åã„Åû„Åè„Å®„ÇÇ „Åù„ÅÜ„Å†„Çì „Åó„Åæ„Åô", ex1_vn: "Th·∫£o lu·∫≠n v·ªõi c·∫£ gia ƒë√¨nh.", ex2_jp: "ÂÆ∂Êóè„Å®„ÇÇË©±„Åô„ÄÇ", ex2_hira: "„Åã„Åû„Åè„Å®„ÇÇ „ÅØ„Å™„Åô", ex2_vn: "C≈©ng s·∫Ω n√≥i v·ªõi c·∫£ nh√†." },
            { type: "particle", level: "N3", word: "„Å´„Åä„ÅÑ„Å¶", reading: "ni oite", meaning: "T·∫°i / ·ªû (Trang tr·ªçng)", ex1_jp: "‰ºöË≠∞„ÅØ„Éõ„Éº„É´„Å´„Åä„ÅÑ„Å¶Ë°å„Çè„Çå„Åæ„Åô„ÄÇ", ex1_hira: "„Åã„ÅÑ„Åé„ÅØ „Åª„Éº„Çã„Å´ „Åä„ÅÑ„Å¶ „Åä„Åì„Å™„Çè„Çå„Åæ„Åô", ex1_vn: "H·ªôi ngh·ªã t·ªï ch·ª©c t·∫°i h·ªôi tr∆∞·ªùng.", ex2_jp: "Ê≠¥Âè≤„Å´„Åä„ÅÑ„Å¶ÈáçË¶Å„Å†„ÄÇ", ex2_hira: "„Çå„Åç„Åó„Å´„Åä„ÅÑ„Å¶ „Åò„ÇÖ„ÅÜ„Çà„ÅÜ„Å†", ex2_vn: "Quan tr·ªçng trong l·ªãch s·ª≠." },
            { type: "particle", level: "N3", word: "„Å®„Åó„Å¶", reading: "toshite", meaning: "V·ªõi t∆∞ c√°ch l√†...", ex1_jp: "ÁïôÂ≠¶Áîü„Å®„Åó„Å¶Êù•„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Çä„ÇÖ„ÅÜ„Åå„Åè„Åõ„ÅÑ„Å®„Åó„Å¶ „Åç„Åæ„Åó„Åü", ex1_vn: "ƒê·∫øn v·ªõi t∆∞ c√°ch du h·ªçc sinh.", ex2_jp: "Ë∂£Âë≥„Å®„Åó„Å¶„ÇÑ„Å£„Å¶„Çã„ÄÇ", ex2_hira: "„Åó„ÇÖ„Åø„Å®„Åó„Å¶ „ÇÑ„Å£„Å¶„Çã", ex2_vn: "L√†m v√¨ s·ªü th√≠ch th√¥i." },
            { type: "particle", level: "N3", word: "„Å´„Çà„Å£„Å¶", reading: "ni yotte", meaning: "Do / B·ªüi / T√πy v√†o", ex1_jp: "Âè∞È¢®„Å´„Çà„Å£„Å¶Â£ä„Çå„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Åü„ÅÑ„Åµ„ÅÜ„Å´„Çà„Å£„Å¶ „Åì„Çè„Çå„Åæ„Åó„Åü", ex1_vn: "B·ªã h·ªèng do b√£o.", ex2_jp: "‰∫∫„Å´„Çà„Å£„Å¶ÈÅï„ÅÜ„ÄÇ", ex2_hira: "„Å≤„Å®„Å´„Çà„Å£„Å¶ „Å°„Åå„ÅÜ", ex2_vn: "T√πy ng∆∞·ªùi m√† kh√°c." },
            { type: "particle", level: "N3", word: "„Å´ÂØæ„Åó„Å¶", reading: "ni taishite", meaning: "ƒê·ªëi v·ªõi / Tr√°i v·ªõi", ex1_jp: "ÂÖàÁîü„Å´ÂØæ„Åó„Å¶Â§±Á§º„Åß„Åô„ÄÇ", ex1_hira: "„Åõ„Çì„Åõ„ÅÑ„Å´ „Åü„ÅÑ„Åó„Å¶ „Åó„Å§„Çå„ÅÑ „Åß„Åô", ex1_vn: "Th·∫•t l·ªÖ ƒë·ªëi v·ªõi gi√°o vi√™n.", ex2_jp: "ÂÆ¢„Å´ÂØæ„Åó„Å¶ÊÄí„Çã„Å™„ÄÇ", ex2_hira: "„Åç„ÇÉ„Åè„Å´ „Åü„ÅÑ„Åó„Å¶ „Åä„Åì„Çã„Å™", ex2_vn: "ƒê·ª´ng gi·∫≠n v·ªõi kh√°ch." },
            { type: "particle", level: "N3", word: "„Å´„Å§„ÅÑ„Å¶", reading: "ni tsuite", meaning: "V·ªÅ vi·ªác... / Li√™n quan", ex1_jp: "Â∞ÜÊù•„Å´„Å§„ÅÑ„Å¶ËÄÉ„Åà„Åæ„Åô„ÄÇ", ex1_hira: "„Åó„Çá„ÅÜ„Çâ„ÅÑ„Å´ „Å§„ÅÑ„Å¶ „Åã„Çì„Åå„Åà„Åæ„Åô", ex1_vn: "Suy nghƒ© v·ªÅ t∆∞∆°ng lai.", ex2_jp: "„Åì„Çå„Å´„Å§„ÅÑ„Å¶Ë©±„Åù„ÅÜ„ÄÇ", ex2_hira: "„Åì„Çå„Å´„Å§„ÅÑ„Å¶ „ÅØ„Å™„Åù„ÅÜ", ex2_vn: "N√≥i v·ªÅ chuy·ªán n√†y ƒëi." },
            { type: "particle", level: "N3", word: "„Å´„Çè„Åü„Å£„Å¶", reading: "ni watatte", meaning: "Su·ªët / Kh·∫Øp (Ph·∫°m vi)", ex1_jp: "20Âπ¥„Å´„Çè„Åü„Å£„Å¶Á†îÁ©∂„Åó„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Å´„Åò„ÇÖ„ÅÜ„Å≠„Çì„Å´ „Çè„Åü„Å£„Å¶ „Åë„Çì„Åç„ÇÖ„ÅÜ „Åó„Åæ„Åó„Åü", ex1_vn: "Nghi√™n c·ª©u su·ªët 20 nƒÉm.", ex2_jp: "Â∫ÉÁØÑÂõ≤„Å´„Çè„Åü„Çã„ÄÇ", ex2_hira: "„Åì„ÅÜ„ÅØ„Çì„ÅÑ„Å´ „Çè„Åü„Çã", ex2_vn: "Tr·∫£i d√†i tr√™n ph·∫°m vi r·ªông." },
            { type: "particle", level: "N3", word: "„Å´Ê≤ø„Å£„Å¶", reading: "ni sotte", meaning: "D·ªçc theo / Men theo", ex1_jp: "Â∑ù„Å´Ê≤ø„Å£„Å¶Ê≠©„Åç„Åæ„Åô„ÄÇ", ex1_hira: "„Åã„Çè„Å´ „Åù„Å£„Å¶ „ÅÇ„Çã„Åç„Åæ„Åô", ex1_vn: "ƒêi b·ªô d·ªçc theo con s√¥ng.", ex2_jp: "Ë®àÁîª„Å´Ê≤ø„Å£„Å¶„ÇÑ„Çã„ÄÇ", ex2_hira: "„Åë„ÅÑ„Åã„Åè„Å´ „Åù„Å£„Å¶ „ÇÑ„Çã", ex2_vn: "L√†m theo k·∫ø ho·∫°ch." },
            { type: "particle", level: "N3", word: "„Å´Èöõ„Åó„Å¶", reading: "ni saishite", meaning: "Nh√¢n d·ªãp / Khi l√†m g√¨", ex1_jp: "ÂèóÈ®ì„Å´Èöõ„Åó„Å¶Ê≥®ÊÑè„Åô„Çã„Åì„Å®„ÄÇ", ex1_hira: "„Åò„ÇÖ„Åë„Çì„Å´ „Åï„ÅÑ„Åó„Å¶ „Å°„ÇÖ„ÅÜ„ÅÑ „Åô„Çã„Åì„Å®", ex1_vn: "ƒêi·ªÅu c·∫ßn ch√∫ √Ω khi ƒëi thi.", ex2_jp: "Â∏∞ÂõΩ„Å´Èöõ„Åó„Å¶Êå®Êã∂„Åô„Çã„ÄÇ", ex2_hira: "„Åç„Åì„Åè„Å´ „Åï„ÅÑ„Åó„Å¶ „ÅÇ„ÅÑ„Åï„Å§ „Åô„Çã", ex2_vn: "Ch√†o h·ªèi khi v·ªÅ n∆∞·ªõc." },
            { type: "particle", level: "N3", word: "„Çí„ÇÅ„Åê„Å£„Å¶", reading: "o megutte", meaning: "Xoay quanh (Tranh lu·∫≠n)", ex1_jp: "„Åù„ÅÆÂïèÈ°å„Çí„ÇÅ„Åê„Å£„Å¶‰∫â„ÅÑ„Åæ„Åô„ÄÇ", ex1_hira: "„Åù„ÅÆ„ÇÇ„Çì„Å†„ÅÑ„Çí „ÇÅ„Åê„Å£„Å¶ „ÅÇ„Çâ„Åù„ÅÑ„Åæ„Åô", ex1_vn: "Tranh c√£i xoay quanh v·∫•n ƒë·ªÅ ƒë√≥.", ex2_jp: "ÂôÇ„Çí„ÇÅ„Åê„Å£„Å¶Â§ßÈ®í„Åé„Å†„ÄÇ", ex2_hira: "„ÅÜ„Çè„Åï„Çí „ÇÅ„Åê„Å£„Å¶ „Åä„Åä„Åï„Çè„Åé„Å†", ex2_vn: "L√πm x√πm xoay quanh l·ªùi ƒë·ªìn." },

            // === PH√ì T·ª™ (30) - B·ªî SUNG ===
            // M·ª©c ƒë·ªô
            { type: "adverb", level: "N3", word: "„Åö„ÅÑ„Å∂„Çì", reading: "„Åö„ÅÑ„Å∂„Çì", meaning: "Kh√° l√† (Ng·∫°c nhi√™n)", ex1_jp: "„Åö„ÅÑ„Å∂„ÇìÂØí„Åè„Å™„Çä„Åæ„Åó„Åü„Å≠„ÄÇ", ex1_hira: "„Åö„ÅÑ„Å∂„Çì „Åï„ÇÄ„Åè „Å™„Çä„Åæ„Åó„Åü„Å≠", ex1_vn: "Tr·ªùi ƒë√£ tr·ªü n√™n kh√° l·∫°nh nh·ªâ.", ex2_jp: "„Åö„ÅÑ„Å∂„ÇìÂæÖ„Å£„Åü„Çà„ÄÇ", ex2_hira: "„Åö„ÅÑ„Å∂„Çì „Åæ„Å£„Åü„Çà", ex2_vn: "T√¥i ƒë√£ ƒë·ª£i kh√° l√¢u ƒë·∫•y." },
            { type: "adverb", level: "N3", word: "„Åã„Å™„Çä", reading: "„Åã„Å™„Çä", meaning: "T∆∞∆°ng ƒë·ªëi / Kh√°", ex1_jp: "„Åã„Å™„Çä‰∏äÊâã„Åß„Åô„Å≠„ÄÇ", ex1_hira: "„Åã„Å™„Çä „Åò„Çá„ÅÜ„Åö „Åß„Åô„Å≠", ex1_vn: "Kh√° l√† gi·ªèi ƒë·∫•y nh·ªâ.", ex2_jp: "„Åã„Å™„ÇäÈõ£„Åó„ÅÑ„ÄÇ", ex2_hira: "„Åã„Å™„Çä „ÇÄ„Åö„Åã„Åó„ÅÑ", ex2_vn: "T∆∞∆°ng ƒë·ªëi kh√≥." },
            { type: "adverb", level: "N3", word: "Áõ∏ÂΩì", reading: "„Åù„ÅÜ„Å®„ÅÜ", meaning: "Kh√° nhi·ªÅu (Cao ƒë·ªô)", ex1_jp: "Áõ∏ÂΩìÁñ≤„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ", ex1_hira: "„Åù„ÅÜ„Å®„ÅÜ „Å§„Åã„Çå„Å¶ „ÅÑ„Åæ„Åô", ex1_vn: "ƒêang kh√° l√† m·ªát m·ªèi.", ex2_jp: "Áõ∏ÂΩì„Å™ÈáëÈ°ç„Å†„ÄÇ", ex2_hira: "„Åù„ÅÜ„Å®„ÅÜ„Å™ „Åç„Çì„Åå„Åè „Å†", ex2_vn: "M·ªôt s·ªë ti·ªÅn kh√° l·ªõn ƒë·∫•y." },
            { type: "adverb", level: "N3", word: "„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉ", reading: "„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉ", meaning: "C·ª±c k·ª≥ (VƒÉn n√≥i)", ex1_jp: "„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉÈáç„ÅÑ„Åß„Åô„ÄÇ", ex1_hira: "„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉ „Åä„ÇÇ„ÅÑ „Åß„Åô", ex1_vn: "N·∫∑ng kinh kh·ªßng.", ex2_jp: "ÈÉ®Â±ã„Åå„ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉ„Å†„ÄÇ", ex2_hira: "„Å∏„ÇÑ„Åå „ÇÅ„Å°„ÇÉ„Åè„Å°„ÇÉ „Å†", ex2_vn: "Ph√≤ng b·ª´a b·ªôn qu√°." },
            { type: "adverb", level: "N3", word: "„ÇÅ„Å£„Åü„Å´", reading: "„ÇÅ„Å£„Åü„Å´", meaning: "Hi·∫øm khi (ƒêi v·ªõi Nai)", ex1_jp: "„ÇÅ„Å£„Åü„Å´ÊÄí„Çä„Åæ„Åõ„Çì„ÄÇ", ex1_hira: "„ÇÅ„Å£„Åü„Å´ „Åä„Åì„Çä„Åæ„Åõ„Çì", ex1_vn: "Hi·∫øm khi n·ªïi gi·∫≠n.", ex2_jp: "„ÇÅ„Å£„Åü„Å´‰ºö„Åà„Å™„ÅÑ„ÄÇ", ex2_hira: "„ÇÅ„Å£„Åü„Å´ „ÅÇ„Åà„Å™„ÅÑ", ex2_vn: "Hi·∫øm khi g·∫∑p ƒë∆∞·ª£c." },
            { type: "adverb", level: "N3", word: "„Åª„Å®„Çì„Å©", reading: "„Åª„Å®„Çì„Å©", meaning: "H·∫ßu h·∫øt / G·∫ßn nh∆∞", ex1_jp: "ÂÆøÈ°å„ÅØ„Åª„Å®„Çì„Å©ÁµÇ„Çè„Çä„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Åó„ÇÖ„Åè„Å†„ÅÑ„ÅØ „Åª„Å®„Çì„Å© „Åä„Çè„Çä„Åæ„Åó„Åü", ex1_vn: "B√†i t·∫≠p ƒë√£ xong h·∫ßu h·∫øt r·ªìi.", ex2_jp: "„Åª„Å®„Çì„Å©ÂØù„Å¶„Å™„ÅÑ„ÄÇ", ex2_hira: "„Åª„Å®„Çì„Å© „Å≠„Å¶„Å™„ÅÑ", ex2_vn: "G·∫ßn nh∆∞ kh√¥ng ng·ªß." },
            { type: "adverb", level: "N3", word: "Â§ßÂàÜ", reading: "„Å†„ÅÑ„Å∂", meaning: "Kh√° nhi·ªÅu / ƒê·ª° h∆°n", ex1_jp: "È¢®ÈÇ™„ÅØÂ§ßÂàÜËâØ„Åè„Å™„Çä„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Åã„Åú„ÅØ „Å†„ÅÑ„Å∂ „Çà„Åè „Å™„Çä„Åæ„Åó„Åü", ex1_vn: "C·∫£m c√∫m ƒë√£ ƒë·ª° h∆°n nhi·ªÅu r·ªìi.", ex2_jp: "Â§ßÂàÜÂæÖ„Å£„Åü„ÄÇ", ex2_hira: "„Å†„ÅÑ„Å∂ „Åæ„Å£„Åü", ex2_vn: "ƒê·ª£i kh√° l√¢u r·ªìi." },
            { type: "adverb", level: "N3", word: "„Åü„Å£„Å∑„Çä", reading: "„Åü„Å£„Å∑„Çä", meaning: "ƒê·∫ßy ·∫Øp / D∆∞ th·ª´a", ex1_jp: "ÊôÇÈñì„Åå„Åü„Å£„Å∑„Çä„ÅÇ„Çä„Åæ„Åô„ÄÇ", ex1_hira: "„Åò„Åã„Çì„Åå „Åü„Å£„Å∑„Çä „ÅÇ„Çä„Åæ„Åô", ex1_vn: "C√≥ d∆∞ d·∫£ th·ªùi gian.", ex2_jp: "Ê†ÑÈ§ä„Åü„Å£„Å∑„Çä„ÄÇ", ex2_hira: "„Åà„ÅÑ„Çà„ÅÜ „Åü„Å£„Å∑„Çä", ex2_vn: "ƒê·∫ßy ƒë·ªß dinh d∆∞·ª°ng." },
            { type: "adverb", level: "N3", word: "Â§öÂ∞ë", reading: "„Åü„Åó„Çá„ÅÜ", meaning: "M·ªôt ch√∫t / √çt nhi·ªÅu", ex1_jp: "Â§öÂ∞ë„ÅÆ„Éü„Çπ„ÅØ„ÅÇ„Çä„Åæ„Åô„ÄÇ", ex1_hira: "„Åü„Åó„Çá„ÅÜ„ÅÆ „Éü„Çπ„ÅØ „ÅÇ„Çä„Åæ„Åô", ex1_vn: "C≈©ng c√≥ m·ªôt ch√∫t l·ªói.", ex2_jp: "Â§öÂ∞ëÈÅÖ„Çå„Åæ„Åô„ÄÇ", ex2_hira: "„Åü„Åó„Çá„ÅÜ „Åä„Åè„Çå„Åæ„Åô", ex2_vn: "S·∫Ω mu·ªôn m·ªôt ch√∫t." },
            { type: "adverb", level: "N3", word: "„Åé„Å£„Åó„Çä", reading: "„Åé„Å£„Åó„Çä", meaning: "Ch·∫≠t n√≠ch", ex1_jp: "‰∫àÂÆö„Åå„Åé„Å£„Åó„Çä„Åß„Åô„ÄÇ", ex1_hira: "„Çà„Å¶„ÅÑ„Åå „Åé„Å£„Åó„Çä „Åß„Åô", ex1_vn: "L·ªãch tr√¨nh k√≠n m√≠t.", ex2_jp: "ÁÆ±„Å´„Åé„Å£„Åó„Çä„ÄÇ", ex2_hira: "„ÅØ„Åì„Å´ „Åé„Å£„Åó„Çä", ex2_vn: "Nh√©t ƒë·∫ßy trong h·ªôp." },
            { type: "adverb", level: "N3", word: "„Åô„Å£„Åã„Çä", reading: "„Åô„Å£„Åã„Çä", meaning: "Ho√†n to√†n (Xong xu√¥i)", ex1_jp: "Á¥ÑÊùü„Çí„Åô„Å£„Åã„ÇäÂøò„Çå„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„ÇÑ„Åè„Åù„Åè„Çí „Åô„Å£„Åã„Çä „Çè„Åô„Çå„Åæ„Åó„Åü", ex1_vn: "Qu√™n s·∫°ch s√†nh sanh l·ªùi h·ª©a.", ex2_jp: "„Åô„Å£„Åã„ÇäÊò•„Å†„Å≠„ÄÇ", ex2_hira: "„Åô„Å£„Åã„Çä „ÅØ„Çã „Å†„Å≠", ex2_vn: "Ho√†n to√†n l√† m√πa xu√¢n r·ªìi." },
            { type: "adverb", level: "N3", word: "„Çè„Åö„Åã", reading: "„Çè„Åö„Åã", meaning: "V·ªèn v·∫πn / Ch·ªâ", ex1_jp: "ÊÆã„Çä„ÅØ„Çè„Åö„Åã„Åß„Åô„ÄÇ", ex1_hira: "„ÅÆ„Åì„Çä„ÅØ „Çè„Åö„Åã „Åß„Åô", ex1_vn: "Ch·ªâ c√≤n l·∫°i m·ªôt ch√∫t th√¥i.", ex2_jp: "„Çè„Åö„Åã„Å™Â∏åÊúõ„ÄÇ", ex2_hira: "„Çè„Åö„Åã„Å™ „Åç„Åº„ÅÜ", ex2_vn: "Hy v·ªçng mong manh." },
            { type: "adverb", level: "N3", word: "„Åä„Çà„Åù", reading: "„Åä„Çà„Åù", meaning: "Kho·∫£ng / ƒê·∫°i kh√°i", ex1_jp: "„Åì„Åì„Åã„Çâ„Åä„Çà„Åù1ÊôÇÈñì„Åß„Åô„ÄÇ", ex1_hira: "„Åì„Åì„Åã„Çâ „Åä„Çà„Åù „ÅÑ„Å°„Åò„Åã„Çì „Åß„Åô", ex1_vn: "T·ª´ ƒë√¢y m·∫•t kho·∫£ng 1 ti·∫øng.", ex2_jp: "„Åä„Çà„Åù„ÅÆË¶ãÂΩì„ÄÇ", ex2_hira: "„Åä„Çà„Åù„ÅÆ „Åë„Çì„Å®„ÅÜ", ex2_vn: "D·ª± ƒëo√°n ƒë·∫°i kh√°i." },
            { type: "adverb", level: "N3", word: "„ÇÇ„Å£„Å®", reading: "„ÇÇ„Å£„Å®", meaning: "H∆°n n·ªØa", ex1_jp: "„ÇÇ„Å£„Å®È†ëÂºµ„Çä„Åæ„Åô„ÄÇ", ex1_hira: "„ÇÇ„Å£„Å® „Åå„Çì„Å∞„Çä„Åæ„Åô", ex1_vn: "T√¥i s·∫Ω c·ªë g·∫Øng h∆°n n·ªØa.", ex2_jp: "„ÇÇ„Å£„Å®È£ü„Åπ„Åü„ÅÑ„ÄÇ", ex2_hira: "„ÇÇ„Å£„Å® „Åü„Åπ„Åü„ÅÑ", ex2_vn: "Mu·ªën ƒÉn th√™m n·ªØa." },
            { type: "adverb", level: "N3", word: "‰∏ÄÁï™", reading: "„ÅÑ„Å°„Å∞„Çì", meaning: "Nh·∫•t / S·ªë 1", ex1_jp: "„Åì„Çå„Åå‰∏ÄÁï™Â§ßÂàá„Åß„Åô„ÄÇ", ex1_hira: "„Åì„Çå„Åå „ÅÑ„Å°„Å∞„Çì „Åü„ÅÑ„Åõ„Å§ „Åß„Åô", ex1_vn: "C√°i n√†y l√† quan tr·ªçng nh·∫•t.", ex2_jp: "‰∏ÄÁï™Â•Ω„Åç„ÄÇ", ex2_hira: "„ÅÑ„Å°„Å∞„Çì „Åô„Åç", ex2_vn: "Th√≠ch nh·∫•t." },
            // C√°ch th·ª©c
            { type: "adverb", level: "N3", word: "„ÅÜ„Å£„Åã„Çä", reading: "„ÅÜ„Å£„Åã„Çä", meaning: "L∆° ƒë·ªÖnh / Tr√≥t", ex1_jp: "„ÅÜ„Å£„Åã„ÇäÁßòÂØÜ„ÇíË®Ä„ÅÑ„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„ÅÜ„Å£„Åã„Çä „Å≤„Åø„Å§„Çí „ÅÑ„ÅÑ„Åæ„Åó„Åü", ex1_vn: "L·ª° mi·ªáng n√≥i ra b√≠ m·∫≠t.", ex2_jp: "„ÅÜ„Å£„Åã„ÇäÂøò„Çå„Åü„ÄÇ", ex2_hira: "„ÅÜ„Å£„Åã„Çä „Çè„Åô„Çå„Åü", ex2_vn: "Tr√≥t qu√™n m·∫•t." },
            { type: "adverb", level: "N3", word: "„Çè„Åñ„Å®", reading: "„Çè„Åñ„Å®", meaning: "C·ªë t√¨nh", ex1_jp: "„Çè„Åñ„Å®Ë≤†„Åë„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Çè„Åñ„Å® „Åæ„Åë„Åæ„Åó„Åü", ex1_vn: "C·ªë t√¨nh thua.", ex2_jp: "„Çè„Åñ„Å®„Åò„ÇÉ„Å™„ÅÑ„ÇàÔºÅ", ex2_hira: "„Çè„Åñ„Å® „Åò„ÇÉ„Å™„ÅÑ„Çà", ex2_vn: "T·ªõ kh√¥ng c·ªë √Ω ƒë√¢u!" },
            { type: "adverb", level: "N3", word: "„Åì„Å£„Åù„Çä", reading: "„Åì„Å£„Åù„Çä", meaning: "L√©n l√∫t", ex1_jp: "„Åì„Å£„Åù„ÇäÈÄÉ„Åí„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Åì„Å£„Åù„Çä „Å´„Åí„Åæ„Åó„Åü", ex1_vn: "L√©n l√∫t b·ªè tr·ªën.", ex2_jp: "„Åì„Å£„Åù„ÇäË¶ã„Çã„ÄÇ", ex2_hira: "„Åì„Å£„Åù„Çä „Åø„Çã", ex2_vn: "Nh√¨n tr·ªôm." },
            { type: "adverb", level: "N3", word: "„Åº„Çì„ÇÑ„Çä", reading: "„Åº„Çì„ÇÑ„Çä", meaning: "M·ªù ·∫£o / L∆° ƒë√£ng", ex1_jp: "Â±±„Åå„Åº„Çì„ÇÑ„ÇäË¶ã„Åà„Åæ„Åô„ÄÇ", ex1_hira: "„ÇÑ„Åæ„Åå „Åº„Çì„ÇÑ„Çä „Åø„Åà„Åæ„Åô", ex1_vn: "Nh√¨n th·∫•y n√∫i m·ªù m·ªù.", ex2_jp: "„Åº„Çì„ÇÑ„ÇäËÄÉ„Åà„Çã„ÄÇ", ex2_hira: "„Åº„Çì„ÇÑ„Çä „Åã„Çì„Åå„Åà„Çã", ex2_vn: "Suy nghƒ© v·∫©n v∆°." },
            { type: "adverb", level: "N3", word: "„Åé„Çä„Åé„Çä", reading: "„Åé„Çä„Åé„Çä", meaning: "S√°t n√∫t / V·ª´a k·ªãp", ex1_jp: "ÊôÇÈñì„Åé„Çä„Åé„Çä„Å´ÁùÄ„Åç„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Åò„Åã„Çì „Åé„Çä„Åé„Çä„Å´ „Å§„Åç„Åæ„Åó„Åü", ex1_vn: "ƒê·∫øn v·ª´a k·ªãp gi·ªù.", ex2_jp: "„Åé„Çä„Åé„ÇäÂêàÊ†º„Å†„ÄÇ", ex2_hira: "„Åé„Çä„Åé„Çä „Åî„ÅÜ„Åã„Åè „Å†", ex2_vn: "V·ª´a ƒë·ªß ƒëi·ªÉm ƒë·∫≠u." },
            // Th·ªùi gian
            { type: "adverb", level: "N3", word: "‰ªä„Å´„ÇÇ", reading: "„ÅÑ„Åæ„Å´„ÇÇ", meaning: "S·∫Øp s·ª≠a (x·∫£y ra)", ex1_jp: "‰ªä„Å´„ÇÇÈõ®„ÅåÈôç„Çä„Åù„ÅÜ„Åß„Åô„ÄÇ", ex1_hira: "„ÅÑ„Åæ„Å´„ÇÇ „ÅÇ„ÇÅ„Åå „Åµ„Çä„Åù„ÅÜ„Åß„Åô", ex1_vn: "Tr·ªùi tr√¥ng nh∆∞ s·∫Øp m∆∞a ngay.", ex2_jp: "‰ªä„Å´„ÇÇÊ≥£„Åç„Åù„ÅÜ„ÄÇ", ex2_hira: "„ÅÑ„Åæ„Å´„ÇÇ „Å™„Åç„Åù„ÅÜ", ex2_vn: "S·∫Øp kh√≥c ƒë·∫øn n∆°i r·ªìi." },
            { type: "adverb", level: "N3", word: "„ÇÑ„Åå„Å¶", reading: "„ÇÑ„Åå„Å¶", meaning: "Ch·∫≥ng m·∫•y ch·ªëc", ex1_jp: "„ÇÑ„Åå„Å¶Â§è„ÅåÊù•„Åæ„Åô„ÄÇ", ex1_hira: "„ÇÑ„Åå„Å¶ „Å™„Å§„Åå „Åç„Åæ„Åô", ex1_vn: "Ch·∫≥ng m·∫•y ch·ªëc m√πa h√® s·∫Ω t·ªõi.", ex2_jp: "„ÇÑ„Åå„Å¶„Çè„Åã„Çã„Çà„ÄÇ", ex2_hira: "„ÇÑ„Åå„Å¶ „Çè„Åã„Çã„Çà", ex2_vn: "R·ªìi c·∫≠u s·∫Ω hi·ªÉu th√¥i." },
            { type: "adverb", level: "N3", word: "„ÅÑ„Å§„ÅÆÈñì„Å´„Åã", reading: "„ÅÑ„Å§„ÅÆ„Åæ„Å´„Åã", meaning: "L√∫c n√†o kh√¥ng hay", ex1_jp: "„ÅÑ„Å§„ÅÆÈñì„Å´„ÅãÂØù„Å¶„ÅÑ„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„ÅÑ„Å§„ÅÆ„Åæ„Å´„Åã „Å≠„Å¶„ÅÑ„Åæ„Åó„Åü", ex1_vn: "Ng·ªß qu√™n l√∫c n√†o kh√¥ng bi·∫øt.", ex2_jp: "„ÅÑ„Å§„ÅÆÈñì„Å´„ÅãÂ§ú„Å†„ÄÇ", ex2_hira: "„ÅÑ„Å§„ÅÆ„Åæ„Å´„Åã „Çà„Çã„Å†", ex2_vn: "Tr·ªùi t·ªëi l√∫c n√†o kh√¥ng hay." },
            { type: "adverb", level: "N3", word: "„Åü„Åæ„Åü„Åæ", reading: "„Åü„Åæ„Åü„Åæ", meaning: "T√¨nh c·ªù / Ng·∫´u nhi√™n", ex1_jp: "„Åü„Åæ„Åü„ÅæÈßÖ„Åß‰ºö„ÅÑ„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„Åü„Åæ„Åü„Åæ „Åà„Åç„Åß „ÅÇ„ÅÑ„Åæ„Åó„Åü", ex1_vn: "T√¨nh c·ªù g·∫∑p ·ªü nh√† ga.", ex2_jp: "„Åü„Åæ„Åü„ÅæÊåÅ„Å£„Å¶„ÅÑ„Åü„ÄÇ", ex2_hira: "„Åü„Åæ„Åü„Åæ „ÇÇ„Å£„Å¶„ÅÑ„Åü", ex2_vn: "T√¨nh c·ªù mang theo." },
            { type: "adverb", level: "N3", word: "„ÅÑ„Åç„Å™„Çä", reading: "„ÅÑ„Åç„Å™„Çä", meaning: "ƒê·ªôt nhi√™n", ex1_jp: "„ÅÑ„Åç„Å™„ÇäÊ≥£„ÅçÂá∫„Åó„Åæ„Åó„Åü„ÄÇ", ex1_hira: "„ÅÑ„Åç„Å™„Çä „Å™„Åç„Å†„Åó„Åæ„Åó„Åü", ex1_vn: "ƒê·ªôt nhi√™n b·∫≠t kh√≥c.", ex2_jp: "„ÅÑ„Åç„Å™„ÇäÂ§â„Åà„Çã„Å™„ÄÇ", ex2_hira: "„ÅÑ„Åç„Å™„Çä „Åã„Åà„Çã„Å™", ex2_vn: "ƒê·ª´ng c√≥ ƒë·ªïi ƒë·ªôt ng·ªôt th·∫ø." },
            // Kh·∫≥ng ƒë·ªãnh / Ph·ªèng ƒëo√°n
            { type: "adverb", level: "N3", word: "Ê°àÂ§ñ", reading: "„ÅÇ„Çì„Åå„ÅÑ", meaning: "Kh√¥ng ng·ªù / B·∫•t ng·ªù", ex1_jp: "Ê°àÂ§ñÈ´ò„Åã„Å£„Åü„Åß„Åô„ÄÇ", ex1_hira: "„ÅÇ„Çì„Åå„ÅÑ „Åü„Åã„Åã„Å£„Åü „Åß„Åô", ex1_vn: "ƒê·∫Øt h∆°n t√¥i t∆∞·ªüng.", ex2_jp: "Ê°àÂ§ñÁ∞°Âçò„Å†„ÄÇ", ex2_hira: "„ÅÇ„Çì„Åå„ÅÑ „Åã„Çì„Åü„Çì „Å†", ex2_vn: "ƒê∆°n gi·∫£n kh√¥ng ng·ªù." },
            { type: "adverb", level: "N3", word: "Ê±∫„Åó„Å¶", reading: "„Åë„Å£„Åó„Å¶", meaning: "Tuy·ªát ƒë·ªëi kh√¥ng", ex1_jp: "Ê±∫„Åó„Å¶Ë´¶„ÇÅ„Åæ„Åõ„Çì„ÄÇ", ex1_hira: "„Åë„Å£„Åó„Å¶ „ÅÇ„Åç„Çâ„ÇÅ„Åæ„Åõ„Çì", ex1_vn: "Tuy·ªát ƒë·ªëi kh√¥ng b·ªè cu·ªôc.", ex2_jp: "Ê±∫„Åó„Å¶Âøò„Çå„Å™„ÅÑ„ÄÇ", ex2_hira: "„Åë„Å£„Åó„Å¶ „Çè„Åô„Çå„Å™„ÅÑ", ex2_vn: "Kh√¥ng bao gi·ªù qu√™n." },
            { type: "adverb", level: "N3", word: "„Åæ„Åï„Åã", reading: "„Åæ„Åï„Åã", meaning: "Kh√¥ng l·∫Ω n√†o", ex1_jp: "„Åæ„Åï„ÅãÂ§±Êïó„Åô„Çã„Å®„ÅØ„ÄÇ", ex1_hira: "„Åæ„Åï„Åã „Åó„Å£„Å±„ÅÑ„Åô„Çã„Å®„ÅØ", ex1_vn: "Kh√¥ng ng·ªù l·∫°i th·∫•t b·∫°i.", ex2_jp: "„Åæ„Åï„ÅãÂΩº„ÅåÁäØ‰∫∫Ôºü", ex2_hira: "„Åæ„Åï„Åã „Åã„Çå„Åå „ÅØ„Çì„Å´„Çì", ex2_vn: "Kh√¥ng l·∫Ω anh ta l√† th·ªß ph·∫°m?" },
            { type: "adverb", level: "N3", word: "„Å°„Å£„Å®„ÇÇ", reading: "„Å°„Å£„Å®„ÇÇ", meaning: "M·ªôt ch√∫t c≈©ng kh√¥ng", ex1_jp: "„Å°„Å£„Å®„ÇÇÂ§â„Çè„Çä„Åæ„Åõ„Çì„ÄÇ", ex1_hira: "„Å°„Å£„Å®„ÇÇ „Åã„Çè„Çä„Åæ„Åõ„Çì", ex1_vn: "Ch·∫≥ng thay ƒë·ªïi ch√∫t n√†o.", ex2_jp: "„Å°„Å£„Å®„ÇÇÈù¢ÁôΩ„Åè„Å™„ÅÑ„ÄÇ", ex2_hira: "„Å°„Å£„Å®„ÇÇ „Åä„ÇÇ„Åó„Çç„Åè„Å™„ÅÑ", ex2_vn: "Ch·∫≥ng th√∫ v·ªã t·∫πo n√†o." },
            { type: "adverb", level: "N3", word: "„Åæ„Çã„Åß", reading: "„Åæ„Çã„Åß", meaning: "C·ª© nh∆∞ l√†", ex1_jp: "„Åæ„Çã„ÅßÂ§¢„ÅÆ„Çà„ÅÜ„Åß„Åô„ÄÇ", ex1_hira: "„Åæ„Çã„Åß „ÇÜ„ÇÅ„ÅÆ „Çà„ÅÜ„Åß„Åô", ex1_vn: "C·ª© nh∆∞ l√† m∆° v·∫≠y.", ex2_jp: "„Åæ„Çã„ÅßÂ≠ê‰æõ„Å†„ÄÇ", ex2_hira: "„Åæ„Çã„Åß „Åì„Å©„ÇÇ„Å†", ex2_vn: "C·ª© nh∆∞ tr·∫ª con v·∫≠y." }
        ];

        let activeCards = [...masterData];
        let currentIndex = 0;
        let isFlipped = false;

        function filterCards(type) {
            // Update buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('cat-active', 'bg-white', 'shadow-md');
                if (type === 'all' && btn.id === 'btn-all') {
                    btn.classList.add('cat-active', 'text-gray-800');
                    btn.classList.remove('text-gray-600', 'bg-gray-100');
                } else if (type === 'particle' && btn.id === 'btn-particle') {
                    btn.classList.add('cat-active');
                } else if (type === 'adverb' && btn.id === 'btn-adverb') {
                    btn.classList.add('cat-active');
                }
            });

            // Filter data
            if (type === 'all') {
                activeCards = [...masterData];
            } else {
                activeCards = masterData.filter(item => item.type === type);
            }
            currentIndex = 0;
            isFlipped = false;
            document.getElementById('card-container').classList.remove('is-flipped');
            updateUI();
        }

        // --- SHUFFLE LOGIC ---
        function shuffleCards() {
            // Add visual feedback
            const container = document.getElementById('card-container');
            container.classList.add('shaking');
            setTimeout(() => container.classList.remove('shaking'), 500);

            // Fisher-Yates Shuffle
            for (let i = activeCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [activeCards[i], activeCards[j]] = [activeCards[j], activeCards[i]];
            }
            
            // Reset to first card
            currentIndex = 0;
            isFlipped = false;
            container.classList.remove('is-flipped');
            updateUI();
        }

        function toggleFlip() {
            isFlipped = !isFlipped;
            const card = document.getElementById('card-container');
            if (isFlipped) card.classList.add('is-flipped');
            else card.classList.remove('is-flipped');
        }

        function updateUI() {
            if (activeCards.length === 0) return;
            const data = activeCards[currentIndex];
            const cardContainer = document.getElementById('card-container');
            const cardInner = document.getElementById('card-inner');
            
            // Animation reset
            cardInner.style.opacity = '0';
            
            setTimeout(() => {
                // Set Theme based on type
                if(data.type === 'adverb') {
                    cardContainer.classList.remove('type-particle');
                    cardContainer.classList.add('type-adverb');
                } else {
                    cardContainer.classList.remove('type-adverb');
                    cardContainer.classList.add('type-particle');
                }

                document.getElementById('ui-level').innerText = data.level;
                document.getElementById('ui-word').innerText = data.word;
                document.getElementById('ui-reading').innerText = data.reading;
                document.getElementById('ui-meaning').innerText = data.meaning;
                document.getElementById('ui-ex1-jp').innerText = data.ex1_jp;
                document.getElementById('ui-ex1-hira').innerText = data.ex1_hira;
                document.getElementById('ui-ex1-vn').innerText = data.ex1_vn;
                document.getElementById('ui-ex2-jp').innerText = data.ex2_jp;
                document.getElementById('ui-ex2-hira').innerText = data.ex2_hira;
                document.getElementById('ui-ex2-vn').innerText = data.ex2_vn;
                document.getElementById('ui-counter').innerText = `${currentIndex + 1} / ${activeCards.length}`;
                
                cardInner.style.opacity = '1';
            }, 200);
        }

        function changeCard(dir) {
            isFlipped = false;
            document.getElementById('card-container').classList.remove('is-flipped');
            
            // Short delay to allow flip back animation
            setTimeout(() => {
                currentIndex += dir;
                if (currentIndex >= activeCards.length) currentIndex = 0;
                if (currentIndex < 0) currentIndex = activeCards.length - 1;
                updateUI();
            }, 150);
        }

        function speakText(exampleNum, event) {
            event.stopPropagation();
            const data = activeCards[currentIndex];
            const text = exampleNum === 1 ? data.ex1_jp : data.ex2_jp;
            
            if (window.speechSynthesis.speaking) {
                window.speechSynthesis.cancel();
            }

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ja-JP';
            utterance.rate = 0.85; // Slightly slower for learning
            utterance.pitch = 1.0;
            utterance.volume = 1.0;

            const voices = window.speechSynthesis.getVoices();
            const jaVoice = voices.find(v => v.lang === 'ja-JP' || v.lang.includes('ja'));
            if (jaVoice) {
                utterance.voice = jaVoice;
            }

            window.speechSynthesis.speak(utterance);
        }

        // --- KEYBOARD & TOUCH SUPPORT ---
        
        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') changeCard(1);
            else if (e.key === 'ArrowLeft') changeCard(-1);
            else if (e.key === ' ' || e.key === 'Enter') {
                e.preventDefault(); // Prevent scrolling
                toggleFlip();
            } else if (e.key === 's' || e.key === 'S') {
                shuffleCards();
            }
        });

        // Touch Swipe
        let touchStartX = 0;
        let touchEndX = 0;

        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
        }

        function handleTouchMove(e) {
            // Optional: Prevent default if needed
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }

        function handleSwipe() {
            const threshold = 50; // Minimum distance for swipe
            if (touchEndX < touchStartX - threshold) {
                changeCard(1); // Swipe Left -> Next
            }
            if (touchEndX > touchStartX + threshold) {
                changeCard(-1); // Swipe Right -> Prev
            }
        }

        if ('speechSynthesis' in window) {
            window.speechSynthesis.onvoiceschanged = () => {
                window.speechSynthesis.getVoices();
            };
        }

        window.onload = () => {
            updateUI();
        };
    </script>
</body>
</html>
