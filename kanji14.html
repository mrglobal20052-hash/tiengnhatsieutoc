<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AzaKanji - NgÃ y 14/24 (80 HÃ¡n Tá»±)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #f0f9ff; overflow-x: hidden; }
        .kanji-font { font-family: 'Noto Sans JP', sans-serif; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        /* Animations */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .modal-enter { animation: modalIn 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        .correct-anim { animation: pulse-green 0.5s; }
        @keyframes pulse-green { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }
        
        .wrong-anim { animation: shake 0.4s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* Tab Active State */
        .tab-active { background-color: #0369a1; color: white; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .tab-inactive { background-color: #e0f2fe; color: #0c4a6e; }

        /* Stroke Grid Styles */
        .stroke-path { fill: none; stroke: #333; stroke-width: 3; stroke-linecap: round; stroke-linejoin: round; }
        .stroke-grid-box { border: 1px solid #e5e7eb; background-color: white; position: relative; }
        .stroke-grid-box::after { content: ''; position: absolute; top: 0; left: 50%; width: 1px; height: 100%; background: repeating-linear-gradient(to bottom, #ddd 0, #ddd 4px, transparent 4px, transparent 8px); z-index: 0; }
        .stroke-grid-box::before { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 1px; background: repeating-linear-gradient(to right, #ddd 0, #ddd 4px, transparent 4px, transparent 8px); z-index: 0; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-sky-700 text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center space-x-3 cursor-pointer" onclick="location.reload()">
                    <i class="fas fa-torii-gate text-3xl text-yellow-400"></i>
                    <div>
                        <h1 class="text-xl font-bold uppercase tracking-wider">AZAKANJI</h1>
                        <p class="text-xs text-sky-200">Kanji siÃªu tá»‘c, há»c rá»™ng hiá»ƒu sÃ¢u</p>
                    </div>
                </div>
                
                <div class="flex items-center gap-2 overflow-x-auto max-w-full pb-1 md:pb-0">
                    <div class="flex bg-sky-800 rounded-lg p-1">
                        <button onclick="switchTab('learn')" id="tab-learn" class="px-4 py-2 rounded-md text-sm font-bold transition whitespace-nowrap tab-active">
                            <i class="fas fa-book-open mr-2"></i>Há»c Táº­p
                        </button>
                        <button onclick="switchTab('quiz')" id="tab-quiz" class="px-4 py-2 rounded-md text-sm font-bold transition whitespace-nowrap tab-inactive ml-1">
                            <i class="fas fa-gamepad mr-2"></i>Kiá»ƒm Tra
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6 flex-grow" id="app-container">
        
        <!-- LEARN SECTION -->
        <div id="learn-section" class="fade-in">
            <div class="mb-6 bg-white p-4 rounded-xl shadow-sm border-l-4 border-sky-500 flex justify-between items-center">
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-1"><i class="fas fa-calendar-day text-sky-500 mr-2"></i>NgÃ y 14: 80 HÃ¡n Tá»± (N3)</h3>
                    <p class="text-sm text-gray-600">Tráº¡ng thÃ¡i, Tinh tháº§n & HÃ nh Ä‘á»™ng.</p>
                </div>
            </div>
            
            <div id="kanji-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                <!-- Cards will be injected here -->
            </div>
        </div>

        <!-- QUIZ SECTION -->
        <div id="quiz-section" class="hidden fade-in max-w-2xl mx-auto">
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200">
                <div class="bg-gradient-to-r from-emerald-500 to-teal-600 p-6 text-white flex justify-between items-center">
                    <div>
                        <h2 class="text-xl font-bold"><i class="fas fa-puzzle-piece mr-2"></i>Thá»­ ThÃ¡ch NgÃ y 14</h2>
                        <p class="text-emerald-100 text-xs mt-1">Ã”n táº­p 80 chá»¯ vá»«a há»c</p>
                    </div>
                    <div class="text-right">
                        <div class="text-xs text-emerald-200 uppercase font-bold">Äiá»ƒm sá»‘</div>
                        <div class="text-3xl font-bold" id="score-display">0</div>
                    </div>
                </div>
                
                <div class="p-6 md:p-8">
                    <!-- Progress Bar -->
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-6">
                        <div id="quiz-progress" class="bg-emerald-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                    </div>

                    <div id="question-area" class="text-center mb-8">
                        <div class="text-gray-500 text-sm font-bold mb-4 uppercase tracking-wide">CÃ¢u há»i <span id="q-current">1</span> / <span id="q-total">10</span></div>
                        <div class="mb-4">
                            <span class="text-6xl kanji-font font-bold text-gray-800" id="quiz-kanji-display"></span>
                        </div>
                        <div class="text-lg text-gray-600 font-medium" id="quiz-question-text">HÃ¡n tá»± nÃ y cÃ³ nghÄ©a lÃ  gÃ¬?</div>
                    </div>

                    <div id="options-area" class="grid grid-cols-2 gap-4 mb-6">
                        <!-- Options injected here -->
                    </div>

                    <div id="feedback-area" class="hidden bg-gray-50 rounded-xl p-4 border border-gray-200 text-left animate-fade-in">
                        <div id="feedback-title" class="font-bold text-lg mb-2 flex items-center"></div>
                        <p id="feedback-detail" class="text-gray-600 text-sm mb-3"></p>
                        <button onclick="nextQuestion()" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 rounded-lg shadow transition">Tiáº¿p tá»¥c <i class="fas fa-arrow-right ml-2"></i></button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- STROKE ORDER MODAL -->
    <div id="stroke-modal" class="fixed inset-0 z-50 hidden overflow-y-auto" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeStrokeModal()"></div>
            <div class="inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl w-full modal-enter relative">
                <div class="bg-sky-600 px-4 py-3 flex justify-between items-center text-white">
                    <h3 class="font-bold text-lg"><i class="fas fa-pen-nib mr-2"></i>Táº­p Viáº¿t: <span id="stroke-modal-char" class="text-2xl ml-2 font-bold"></span></h3>
                    <button onclick="closeStrokeModal()" class="hover:text-gray-200 text-2xl">&times;</button>
                </div>
                <div class="p-4 md:p-6 bg-gray-50 max-h-[80vh] overflow-y-auto">
                    <div class="flex flex-col md:flex-row gap-6 md:gap-8 items-center md:items-start justify-center">
                        <div class="bg-white p-4 rounded-lg shadow border border-gray-200 text-center w-full md:w-auto">
                            <p class="text-xs text-gray-500 mb-2 font-bold uppercase tracking-wider">MÃ´ phá»ng</p>
                            <div id="stroke-animation-container" class="w-40 h-40 mx-auto bg-white border border-gray-300 relative stroke-grid-box flex items-center justify-center">
                                <span class="text-gray-400 text-xs">Äang táº£i...</span>
                            </div>
                            <button onclick="replayStrokeAnimation()" class="mt-3 text-sm bg-sky-100 text-sky-700 px-4 py-2 rounded-full hover:bg-sky-200 transition w-full font-bold flex items-center justify-center"><i class="fas fa-redo mr-2"></i> Viáº¿t láº¡i</button>
                        </div>
                        <div class="flex-1 w-full">
                            <p class="text-xs text-gray-500 mb-3 font-bold uppercase tracking-wider text-center md:text-left">Thá»© tá»± nÃ©t</p>
                            <div id="stroke-grid-container" class="flex flex-wrap gap-2 justify-center md:justify-start"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DATA DAY 14 (80 Kanji N3 - AzaKanji Method) ---
        const kanjiData = [
            // Abstract & Concepts - 10
            { char: "æ—¢", nghiaHV: "KÃ", nghiaTV: "ÄÃ£/Rá»“i", on: "ã‚­", kun: "ã™ã§", ti: "ÄÃ£ Äƒn (**Thá»±c é£Ÿ**) xong rá»“i ngháº¹n (**VÃ´ æ—¡**).", ta: "**Ki** (Ki) láº¡, **SÆ° ÄÃª** (Sudeni) Ä‘Ã£ xong.", examples: [{ w: "æ—¢å©š", r: "ãã“ã‚“", m: "ÄÃ£ káº¿t hÃ´n" }, { w: "æ—¢ã«", r: "ã™ã§ã«", m: "ÄÃ£/Rá»“i" }] },
            { char: "ä¼", nghiaHV: "XÃ", nghiaTV: "Káº¿ hoáº¡ch", on: "ã‚­", kun: "ãã‚ã ", ti: "NgÆ°á»i (**NhÃ¢n äºº**) dá»«ng láº¡i (**Chá»‰ æ­¢**) láº­p káº¿ hoáº¡ch.", ta: "**Ki** (Ki) nghiá»‡p **CÆ° Wa Äa** (Kuwadateru) lÃªn káº¿ hoáº¡ch.", examples: [{ w: "ä¼æ¥­", r: "ããã‚‡ã†", m: "Doanh nghiá»‡p" }, { w: "ä¼ç”»", r: "ãã‹ã", m: "Quy hoáº¡ch" }] },
            { char: "æ£„", nghiaHV: "KHÃ", nghiaTV: "Vá»©t bá»", on: "ã‚­", kun: "ã™", ti: "CÃ¢y (**Má»™c æœ¨**) bá»‹ vá»©t bá».", ta: "**Ki** (Ki) ká»µ **SÆ°** (Suteru) vá»©t Ä‘i.", examples: [{ w: "å»ƒæ£„", r: "ã¯ã„ã", m: "Pháº¿ bá»" }, { w: "æ£„ã¦ã‚‹", r: "ã™ã¦ã‚‹", m: "Vá»©t bá»" }] },
            { char: "å¿Œ", nghiaHV: "Ká»´", nghiaTV: "GhÃ©t/KiÃªng", on: "ã‚­", kun: "ã„", ti: "TÃ¢m (**TÃ¢m å¿ƒ**) cá»§a báº£n thÃ¢n (**Ká»· å·±**) ghen ghÃ©t.", ta: "**Ki** (Ki) ká»µ **I** (Imu) ghÃ©t.", examples: [{ w: "å¿Œé¿", r: "ãã²", m: "NÃ© trÃ¡nh" }, { w: "å¿Œã‚€", r: "ã„ã‚€", m: "GhÃ©t/KiÃªng" }] },
            { char: "å‰", nghiaHV: "CÃT", nghiaTV: "Tá»‘t lÃ nh", on: "ã‚­ãƒ", kun: "ã‚ˆã—", ti: "Káº» sÄ© (**SÄ© å£«**) nÃ³i (**Kháº©u å£**) lá»i tá»‘t lÃ nh.", ta: "**Ki Chi** (Kichi) **DÃ´ Si** (Yoshi) tá»‘t lÃ nh.", examples: [{ w: "å‰æ—¥", r: "ãã¡ã˜ã¤", m: "NgÃ y lÃ nh" }, { w: "ä¸å‰", r: "ãµãã¤", m: "Cháº³ng lÃ nh" }] },
            { char: "å‡¶", nghiaHV: "HUNG", nghiaTV: "Xáº¥u/Ãc", on: "ã‚­ãƒ§ã‚¦", kun: "-", ti: "CÃ¡i há»‘ (**Kháº£m å‡µ**) cÃ³ dáº¥u nhÃ¢n (**Nghá»‡ ä¹‚**) hung hiá»ƒm.", ta: "**KiÃ´** (Kyou) hung dá»¯.", examples: [{ w: "å‡¶æ‚ª", r: "ãã‚‡ã†ã‚ã", m: "Hung Ã¡c" }, { w: "å¤§å‡¶", r: "ã ã„ãã‚‡ã†", m: "Äáº¡i hung" }] },
            { char: "æ", nghiaHV: "KHá»¦NG", nghiaTV: "Sá»£ hÃ£i", on: "ã‚­ãƒ§ã‚¦", kun: "ãŠã", ti: "Tim (**TÃ¢m å¿ƒ**) sá»£ hÃ£i viá»‡c táº§m thÆ°á»ng (**PhÃ m å‡¡** - biáº¿n thá»ƒ) cÃ´ng viá»‡c (**CÃ´ng å·¥**).", ta: "**KiÃ´** (Kyou) sá»£ **Ã” SÃ´** (Osoreru) hÃ£i.", examples: [{ w: "ææ€–", r: "ãã‚‡ã†ãµ", m: "Khá»§ng bá»‘" }, { w: "æã‚Œã‚‹", r: "ãŠãã‚Œã‚‹", m: "Sá»£ hÃ£i" }] },
            { char: "ç‹‚", nghiaHV: "CUá»’NG", nghiaTV: "ÄiÃªn", on: "ã‚­ãƒ§ã‚¦", kun: "ãã‚‹", ti: "Con chÃ³ (**Khuyá»ƒn çŠ­**) cá»§a vua (**VÆ°Æ¡ng ç‹**) bá»‹ Ä‘iÃªn.", ta: "**KiÃ´** (Kyou) **CÆ° RÆ°** (Kuruu) Ä‘iÃªn cuá»“ng.", examples: [{ w: "ç†±ç‹‚", r: "ã­ã£ãã‚‡ã†", m: "Cuá»“ng nhiá»‡t" }, { w: "ç‹‚ã†", r: "ãã‚‹ã†", m: "ÄiÃªn/Há»ng" }] },
            { char: "è™š", nghiaHV: "HÆ¯", nghiaTV: "HÆ° khÃ´ng", on: "ã‚­ãƒ§", kun: "-", ti: "Con há»• (**Há»• è™**) Ä‘áº­u trÃªn Ä‘áº¥t nghiá»‡p (**Nghiá»‡p æ¥­** - biáº¿n thá»ƒ) hÆ° áº£o.", ta: "**KiÃ´** (Kyo) hÆ° áº£o.", examples: [{ w: "è™šæ „", r: "ãã‚‡ãˆã„", m: "HÆ° vinh" }, { w: "ç©ºè™š", r: "ãã†ãã‚‡", m: "Trá»‘ng rá»—ng" }] },
            { char: "é©š", nghiaHV: "KINH", nghiaTV: "Ngáº¡c nhiÃªn", on: "ã‚­ãƒ§ã‚¦", kun: "ãŠã©ã‚", ti: "Con ngá»±a (**MÃ£ é¦¬**) kÃ­nh (**KÃ­nh æ•¬**) trá»ng gÃ¢y ngáº¡c nhiÃªn.", ta: "**KiÃ´** (Kyou) ngáº¡c **Ã” ÄÃ´ RÃ´** (Odoroku).", examples: [{ w: "é©šç•°", r: "ãã‚‡ã†ã„", m: "Ká»³ diá»‡u" }, { w: "é©šã", r: "ãŠã©ã‚ã", m: "Ngáº¡c nhiÃªn" }] },

            // Actions & Movement - 10
            { char: "é¨", nghiaHV: "Ká»´", nghiaTV: "CÆ°á»¡i ngá»±a", on: "ã‚­", kun: "-", ti: "CÆ°á»¡i con ngá»±a (**MÃ£ é¦¬**) ká»³ (**Ká»³ å¥‡**) láº¡.", ta: "**Ki** (Ki) ká»µ sÄ©.", examples: [{ w: "é¨å£«", r: "ãã—", m: "Ká»µ sÄ©" }, { w: "é¨æ‰‹", r: "ãã—ã‚…", m: "NgÆ°á»i cÆ°á»¡i ngá»±a" }] },
            { char: "è»Œ", nghiaHV: "QUá»¸", nghiaTV: "Quá»¹ Ä‘áº¡o", on: "ã‚­", kun: "-", ti: "Xe (**Xa è»Š**) cháº¡y chÃ­n (**Cá»­u ä¹**) quá»¹ Ä‘áº¡o.", ta: "**Ki** (Ki) quá»¹ Ä‘áº¡o.", examples: [{ w: "è»Œé“", r: "ãã©ã†", m: "Quá»¹ Ä‘áº¡o" }, { w: "å¸¸è»Œ", r: "ã˜ã‚‡ã†ã", m: "ThÆ°á»ng quy" }] },
            { char: "é§†", nghiaHV: "KHU", nghiaTV: "Cháº¡y/Tiáº¿n", on: "ã‚¯", kun: "ã‹", ti: "Ngá»±a (**MÃ£ é¦¬**) cháº¡y trong khu (**Khu åŒº**) vá»±c.", ta: "**CÆ°** (Ku) dÃ¢n **Ca** (Kakeru) cháº¡y.", examples: [{ w: "é§†ä½¿", r: "ãã—", m: "Táº­n dá»¥ng" }, { w: "é§†ã‘ã‚‹", r: "ã‹ã‘ã‚‹", m: "Cháº¡y nhanh" }] },
            { char: "åŠ", nghiaHV: "Cáº¬P", nghiaTV: "Äáº¡t tá»›i/VÃ ", on: "ã‚­ãƒ¥ã‚¦", kun: "ãŠã‚ˆ", ti: "Ba (**Tam ä¸‰** - biáº¿n thá»ƒ) ngÆ°á»i Ä‘áº¡t tá»›i.", ta: "**Cá»©u** (Kyuu) viá»‡n **Ã” DÃ´** (Oyobu) lan tá»›i.", examples: [{ w: "æ™®åŠ", r: "ãµãã‚…ã†", m: "Phá»• cáº­p" }, { w: "åŠã¶", r: "ãŠã‚ˆã¶", m: "Äáº¡t Ä‘áº¿n" }] },
            { char: "å±ˆ", nghiaHV: "KHUáº¤T", nghiaTV: "CÃºi/Khuáº¥t phá»¥c", on: "ã‚¯ãƒ„", kun: "-", ti: "CÃ¡i xÃ¡c (**Thi å°¸**) Ä‘i ra (**Xuáº¥t å‡º**) khuáº¥t phá»¥c.", ta: "**CÆ° TÆ°** (Kutsu) khuáº¥t phá»¥c.", examples: [{ w: "å±ˆæŠ˜", r: "ãã£ã›ã¤", m: "KhÃºc xáº¡" }, { w: "é€€å±ˆ", r: "ãŸã„ãã¤", m: "ChÃ¡n ngáº¯t" }] },
            { char: "æ˜", nghiaHV: "QUáº¬T", nghiaTV: "ÄÃ o", on: "ã‚¯ãƒ„", kun: "ã»", ti: "Tay (**Thá»§ æ‰Œ**) quáº­t (**Khuáº¥t å±ˆ**) Ä‘áº¥t Ä‘Ã o.", ta: "**CÆ° TÆ°** (Kutsu) **HÃ´** (Horu) Ä‘Ã o.", examples: [{ w: "ç™ºæ˜", r: "ã¯ã£ãã¤", m: "Khai quáº­t" }, { w: "æ˜ã‚‹", r: "ã»ã‚‹", m: "ÄÃ o" }] },
            { char: "å‚¾", nghiaHV: "KHUYNH", nghiaTV: "NghiÃªng", on: "ã‚±ã‚¤", kun: "ã‹ãŸã‚€", ti: "NgÆ°á»i (**NhÃ¢n äº»**) nghiÃªng Ä‘áº§u (**Khoáº£nh é ƒ**).", ta: "**KÃª** (Kei) giÆ°á»ng **Ca Ta MÆ°** (Katamuku) nghiÃªng.", examples: [{ w: "å‚¾å‘", r: "ã‘ã„ã“ã†", m: "Khuynh hÆ°á»›ng" }, { w: "å‚¾ã", r: "ã‹ãŸã‚€ã", m: "NghiÃªng" }] },
            { char: "ç¶™", nghiaHV: "Káº¾", nghiaTV: "Káº¿ thá»«a", on: "ã‚±ã‚¤", kun: "ã¤", ti: "Sá»£i chá»‰ (**Má»‹ch ç³¸**) Ä‘á»©t tá»«ng Ä‘oáº¡n (**Má»… ç±³** - biáº¿n thá»ƒ) Ä‘Æ°á»£c ná»‘i láº¡i.", ta: "**KÃª** (Kei) khai **TÆ°** (Tsugu) káº¿ thá»«a.", examples: [{ w: "ç¶™ç¶š", r: "ã‘ã„ãã", m: "Tiáº¿p tá»¥c" }, { w: "ç¶™ã", r: "ã¤ã", m: "Thá»«a káº¿" }] },
            { char: "æ²", nghiaHV: "Yáº¾T", nghiaTV: "Treo/ÄÄƒng", on: "ã‚±ã‚¤", kun: "ã‹ã‹", ti: "Tay (**Thá»§ æ‰Œ**) cáº§m biá»ƒn ngÆ°á»i (**Yáº¿t æ›·**) treo lÃªn.", ta: "**KÃª** (Kei) Ä‘Æ¡n **Ca Ca** (Kakageru) treo.", examples: [{ w: "æ²ç¤º", r: "ã‘ã„ã˜", m: "ThÃ´ng bÃ¡o" }, { w: "æ²ã’ã‚‹", r: "ã‹ã‹ã’ã‚‹", m: "Treo lÃªn" }] },
            { char: "æº", nghiaHV: "HUá»€", nghiaTV: "Mang theo", on: "ã‚±ã‚¤", kun: "ãŸãšã•", ti: "Tay (**Thá»§ æ‰Œ**) mang theo con chim (**Chuy éš¹**) vÃ  cÃ¡i nÆ¡ (**NÃ£i ä¹ƒ**).", ta: "**KÃª** (Kei) khai **Ta DÆ° Sa** (Tazusaeru) mang theo.", examples: [{ w: "æºå¸¯", r: "ã‘ã„ãŸã„", m: "Di Ä‘á»™ng" }, { w: "æºã‚ã‚‹", r: "ãŸãšã•ã‚ã‚‹", m: "Tham gia" }] },

            // Society & Communication - 10
            { char: "æ£‹", nghiaHV: "Ká»²", nghiaTV: "Cá» tÆ°á»›ng", on: "ã‚­", kun: "-", ti: "CÃ¢y (**Má»™c æœ¨**) lÃ m bÃ n cá» (**Ká»³ å…¶**).", ta: "**Ki** (Ki) láº¡ bÃ n cá».", examples: [{ w: "å°†æ£‹", r: "ã—ã‚‡ã†ã", m: "Cá» tÆ°á»›ng Nháº­t" }, { w: "æ£‹å£«", r: "ãã—", m: "Ká»³ thá»§" }] },
            { char: "è©°", nghiaHV: "Cáº¬T", nghiaTV: "Nhá»“i/Cháº­t", on: "ã‚­ãƒ„", kun: "ã¤", ti: "NÃ³i (**NgÃ´n è¨€**) nhá»¯ng Ä‘iá»u tá»‘t lÃ nh (**CÃ¡t å‰**) nhá»“i nhÃ©t.", ta: "**Ki TÆ°** (Kitsu) **TÆ°** (Tsumeru) nhÃ©t vÃ o.", examples: [{ w: "ç¼¶è©°", r: "ã‹ã‚“ã¥ã‚", m: "Äá»“ há»™p" }, { w: "è©°ã‚ã‚‹", r: "ã¤ã‚ã‚‹", m: "Nhá»“i/Bá»‹t" }] },
            { char: "å–«", nghiaHV: "KHIáº¾T", nghiaTV: "Ä‚n/Uá»‘ng", on: "ã‚­ãƒ„", kun: "-", ti: "Miá»‡ng (**Kháº©u å£**) Äƒn uá»‘ng giao Æ°á»›c (**Kháº¿ å¥‘**).", ta: "**Ki TÆ°** (Kitsu) Äƒn uá»‘ng.", examples: [{ w: "å–«èŒ¶åº—", r: "ãã£ã•ã¦ã‚“", m: "QuÃ¡n giáº£i khÃ¡t" }, { w: "å–«ç…™", r: "ãã¤ãˆã‚“", m: "HÃºt thuá»‘c" }] },
            { char: "å«", nghiaHV: "KHIáº¾U", nghiaTV: "KÃªu/HÃ©t", on: "ã‚­ãƒ§ã‚¦", kun: "ã•ã‘", ti: "Miá»‡ng (**Kháº©u å£**) bá»‹ vÆ°á»›ng 4 (**Cá»­u ä¸©**) láº§n nÃªn hÃ©t.", ta: "**KiÃ´** (Kyou) to **Sa KÃª** (Sakebu) hÃ©t.", examples: [{ w: "çµ¶å«", r: "ãœã£ãã‚‡ã†", m: "HÃ©t lÃªn" }, { w: "å«ã¶", r: "ã•ã‘ã¶", m: "KÃªu gÃ o" }] },
            { char: "è„…", nghiaHV: "HIáº¾P", nghiaTV: "Äe dá»a", on: "ã‚­ãƒ§ã‚¦", kun: "ãŠã©", ti: "DÃ¹ng ba lá»±c (**Lá»±c åŠ›**) Ä‘á»ƒ Ä‘e dá»a.", ta: "**KiÃ´** (Kyou) sá»£ **Ã” ÄÃ´** (Odosu) dá»a.", examples: [{ w: "è„…è¿«", r: "ãã‚‡ã†ã¯ã", m: "Uy hiáº¿p" }, { w: "è„…ã™", r: "ãŠã©ã™", m: "Äe dá»a" }] },
            { char: "æ‹ ", nghiaHV: "Cá»¨", nghiaTV: "CÄƒn cá»©", on: "ã‚­ãƒ§", kun: "ã‚ˆ", ti: "Tay (**Thá»§ æ‰Œ**) náº¯m láº¥y xá»© (**Xá»­ å‡¦**) sá»Ÿ lÃ m cÄƒn cá»©.", ta: "**KiÃ´** (Kyo) to **DÃ´** (Yoru) dá»±a vÃ o.", examples: [{ w: "è¨¼æ‹ ", r: "ã—ã‚‡ã†ã“", m: "Chá»©ng cá»©" }, { w: "æ‹ ã‚‹", r: "ã‚ˆã‚‹", m: "Dá»±a vÃ o" }] },
            { char: "æ¬º", nghiaHV: "KHI", nghiaTV: "Lá»«a dá»‘i", on: "ã‚®", kun: "ã‚ã–ã‚€", ti: "CÃ¡i Ä‘Ã³ (**Ká»³ å…¶**) thiáº¿u (**Khiáº¿m æ¬ **) sá»± tháº­t lÃ  lá»«a dá»‘i.", ta: "**Ghi** (Gi) chÃ©p **A Za MÆ°** (Azamuku) lá»«a gáº¡t.", examples: [{ w: "è©æ¬º", r: "ã•ã", m: "Lá»«a Ä‘áº£o" }, { w: "æ¬ºã", r: "ã‚ã–ã‚€ã", m: "Lá»«a gáº¡t" }] },
            { char: "å•“", nghiaHV: "KHáº¢I", nghiaTV: "Má»Ÿ mang", on: "ã‚±ã‚¤", kun: "-", ti: "DÃ¹ng miá»‡ng (**Kháº©u å£**) vÃ  gáº­y (**Phá»™c æ”µ**) Ä‘á»ƒ má»Ÿ mang há»™ (**Há»™ æˆ¸**).", ta: "**KÃª** (Kei) khai má»Ÿ mang.", examples: [{ w: "å•“è’™", r: "ã‘ã„ã‚‚ã†", m: "Khai hÃ³a" }, { w: "æ‹å•“", r: "ã¯ã„ã‘ã„", m: "KÃ­nh gá»­i" }] },
            { char: "å¥‘", nghiaHV: "KHáº¾", nghiaTV: "Há»£p Ä‘á»“ng", on: "ã‚±ã‚¤", kun: "ã¡ã", ti: "Ã”ng lá»›n (**Äáº¡i å¤§**) dÃ¹ng dao (**Äao ğŸ”ª**) cáº¯t há»£p Ä‘á»“ng (Kháº¿ #).", ta: "**KÃª** (Kei) khai **Chi Ghi** (Chigiru) thá» Æ°á»›c.", examples: [{ w: "å¥‘ç´„", r: "ã‘ã„ã‚„ã", m: "Há»£p Ä‘á»“ng" }, { w: "å¥‘ã‚‹", r: "ã¡ãã‚‹", m: "Thá» Æ°á»›c" }] },
            { char: "åˆ‘", nghiaHV: "HÃŒNH", nghiaTV: "HÃ¬nh pháº¡t", on: "ã‚±ã‚¤", kun: "-", ti: "DÃ¹ng dao (**Äao åˆ‚**) trá»«ng pháº¡t khuÃ´n máº«u (**Khai å¼€**).", ta: "**KÃª** (Kei) khai hÃ¬nh pháº¡t.", examples: [{ w: "åˆ‘ç½°", r: "ã‘ã„ã°ã¤", m: "HÃ¬nh pháº¡t" }, { w: "åˆ‘äº‹", r: "ã‘ã„ã˜", m: "HÃ¬nh sá»±" }] },

            // Objects & Nature - 10
            { char: "èŠ", nghiaHV: "CÃšC", nghiaTV: "Hoa cÃºc", on: "ã‚­ã‚¯", kun: "-", ti: "Cá» (**Tháº£o è‰¹**) bao (**Bao å‹¹**) gáº¡o (**Má»… ç±³**) lÃ  hoa cÃºc.", ta: "**Ki CÆ°** (Kiku) hoa cÃºc.", examples: [{ w: "èŠèŠ±", r: "ãã£ã‹", m: "Hoa cÃºc" }, { w: "èŠ", r: "ãã", m: "CÃºc" }] },
            { char: "æœ½", nghiaHV: "Há»¦", nghiaTV: "Má»¥c nÃ¡t", on: "ã‚­ãƒ¥ã‚¦", kun: "ã", ti: "CÃ¢y (**Má»™c æœ¨**) bá»‹ gÃ£y 5 (**NgÅ© äº”** - biáº¿n thá»ƒ) khÃºc má»¥c nÃ¡t.", ta: "**Cá»©u** (Kyuu) cÃ¢y **CÆ°** (Kuchiru) má»¥c.", examples: [{ w: "ä¸æœ½", r: "ãµãã‚…ã†", m: "Báº¥t há»§" }, { w: "æœ½ã¡ã‚‹", r: "ãã¡ã‚‹", m: "Má»¥c nÃ¡t" }] },
            { char: "éŸ¿", nghiaHV: "HÆ¯á»NG", nghiaTV: "Vang vá»ng", on: "ã‚­ãƒ§ã‚¦", kun: "ã²ã³", ti: "Ã‚m thanh (**Ã‚m éŸ³**) tá»« quÃª hÆ°Æ¡ng (**HÆ°Æ¡ng éƒ·**) vang vá»ng.", ta: "**KiÃ´** (Kyou) to **Hi Bi** (Hibiku) vang.", examples: [{ w: "å½±éŸ¿", r: "ãˆã„ãã‚‡ã†", m: "áº¢nh hÆ°á»Ÿng" }, { w: "éŸ¿ã", r: "ã²ã³ã", m: "Vang vá»ng" }] },
            { char: "ç‹­", nghiaHV: "HIá»†P", nghiaTV: "Háº¹p", on: "ã‚­ãƒ§ã‚¦", kun: "ã›ã¾", ti: "Con chÃ³ (**Khuyá»ƒn çŠ­**) bá»‹ káº¹p (**Hiá»‡p å¤¹**) á»Ÿ chá»— háº¹p.", ta: "**KiÃ´** (Kyou) to **SÃª Ma** (Semai) háº¹p.", examples: [{ w: "ç‹­ã„", r: "ã›ã¾ã„", m: "Háº¹p" }, { w: "æ‰‹ç‹­", r: "ã¦ãœã¾", m: "Cháº­t háº¹p" }] },
            { char: "å³¡", nghiaHV: "HIá»†P", nghiaTV: "Háº»m nÃºi", on: "ã‚­ãƒ§ã‚¦", kun: "-", ti: "NÃºi (**SÆ¡n å±±**) káº¹p (**Hiá»‡p å¤¹**) thÃ nh háº»m.", ta: "**KiÃ´** (Kyou) to háº»m nÃºi.", examples: [{ w: "æµ·å³¡", r: "ã‹ã„ãã‚‡ã†", m: "Eo biá»ƒn" }, { w: "å³¡è°·", r: "ãã‚‡ã†ã“ã", m: "Háº»m vá»±c" }] },
            { char: "å‡", nghiaHV: "NGÆ¯NG", nghiaTV: "ÄÃ´ng láº¡i", on: "ã‚®ãƒ§ã‚¦", kun: "ã“", ti: "BÄƒng (**BÄƒng å†«**) nghi ngá» (**Nghi ç–‘**) Ä‘Ã´ng láº¡i.", ta: "**GhiÃ´** (Gyou) **CÃ´** (Koru) Ä‘Ã´ng cá»©ng.", examples: [{ w: "å‡å›º", r: "ãã‚‡ã†ã“", m: "ÄÃ´ng Ä‘áº·c" }, { w: "å‡ã‚‹", r: "ã“ã‚‹", m: "ÄÃ´ng láº¡i/Say mÃª" }] },
            { char: "é¶", nghiaHV: "KÃŠ", nghiaTV: "GÃ ", on: "ã‚±ã‚¤", kun: "ã«ã‚ã¨ã‚Š", ti: "Tay (**Tráº£o çˆ«**) buá»™c (**YÃªu å¹º**) chim (**Äiá»ƒu é³¥**) lá»›n (**Äáº¡i å¤§**) lÃ  gÃ .", ta: "**KÃª** (Kei) **Ni Wa TÃ´ Ri** (Niwatori) gÃ .", examples: [{ w: "é¤Šé¶", r: "ã‚ˆã†ã‘ã„", m: "NuÃ´i gÃ " }, { w: "é¶", r: "ã«ã‚ã¨ã‚Š", m: "Con gÃ " }] },
            { char: "è‚©", nghiaHV: "KIÃŠN", nghiaTV: "Vai", on: "ã‚±ãƒ³", kun: "ã‹ãŸ", ti: "Cá»­a (**Há»™ æˆ¸**) cá»§a cÆ¡ thá»ƒ (**Nhá»¥c âº¼**) lÃ  vai.", ta: "**Ká»n** (Ken) ká»n Ä‘áº­u **Ca Ta** (Kata) vai.", examples: [{ w: "è‚©æ›¸ã", r: "ã‹ãŸãŒã", m: "Chá»©c danh" }, { w: "è‚©", r: "ã‹ãŸ", m: "Vai" }] },
            { char: "è»’", nghiaHV: "HIÃŠN", nghiaTV: "MÃ¡i hiÃªn/CÄƒn", on: "ã‚±ãƒ³", kun: "ã®ã", ti: "Xe (**Xa è»Š**) khÃ´ (**Can å¹²**) dÆ°á»›i mÃ¡i hiÃªn.", ta: "**Ká»n** (Ken) ká»n Ä‘áº­u **NÃ´ Ki** (Noki) hiÃªn.", examples: [{ w: "ä¸€è»’", r: "ã„ã£ã‘ã‚“", m: "Má»™t cÄƒn" }, { w: "è»’", r: "ã®ã", m: "MÃ¡i hiÃªn" }] },
            { char: "æ¯", nghiaHV: "KHÃ”", nghiaTV: "HÃ©o/KhÃ´", on: "ã‚³", kun: "ã‹", ti: "CÃ¢y (**Má»™c æœ¨**) cá»• (**Cá»• å¤**) thá»¥ khÃ´ hÃ©o.", ta: "**CÃ´** (Ko) Ä‘Æ¡n **Ca** (Kareru) hÃ©o hon.", examples: [{ w: "æ¯æ¸‡", r: "ã“ã‹ã¤", m: "Cáº¡n kiá»‡t" }, { w: "æ¯ã‚Œã‚‹", r: "ã‹ã‚Œã‚‹", m: "HÃ©o" }] },

            // Place & People - 10
            { char: "ä¸˜", nghiaHV: "KHÃ‚U", nghiaTV: "Äá»“i", on: "ã‚­ãƒ¥ã‚¦", kun: "ãŠã‹", ti: "CÃ¡i rÃ¬u (**CÃ¢n æ–¤**) cáº¯m trÃªn Ä‘áº¥t (**Nháº¥t ä¸€**).", ta: "**Cá»©u** (Kyuu) **Ã” Ca** (Oka) trÃªn Ä‘á»“i.", examples: [{ w: "ç ‚ä¸˜", r: "ã•ãã‚…ã†", m: "Äá»“i cÃ¡t" }, { w: "ä¸˜", r: "ãŠã‹", m: "Äá»“i" }] },
            { char: "å§«", nghiaHV: "CÆ ", nghiaTV: "CÃ´ng chÃºa", on: "ã‚­", kun: "ã²ã‚", ti: "NgÆ°á»i ná»¯ (**Ná»¯ å¥³**) bá» tÃ´i (**Tháº§n è‡£**) lÃ  cÃ´ng chÃºa.", ta: "**Ki** (Ki) láº¡ **Hi MÃª** (Hime) cÃ´ng chÃºa.", examples: [{ w: "å§«", r: "ã²ã‚", m: "CÃ´ng chÃºa" }, { w: "ãŠå§«æ§˜", r: "ãŠã²ã‚ã•ã¾", m: "NÃ ng cÃ´ng chÃºa" }] },
            { char: "æ³", nghiaHV: "HUá»NG", nghiaTV: "TÃ¬nh huá»‘ng", on: "ã‚­ãƒ§ã‚¦", kun: "-", ti: "NÆ°á»›c (**Thá»§y æ°µ**) vÃ  ngÆ°á»i anh (**Huynh å…„**) gáº·p tÃ¬nh huá»‘ng.", ta: "**KiÃ´** (Kyou) to tÃ¬nh huá»‘ng.", examples: [{ w: "çŠ¶æ³", r: "ã˜ã‚‡ã†ãã‚‡ã†", m: "TÃ¬nh hÃ¬nh" }, { w: "ä¸æ³", r: "ãµãã‚‡ã†", m: "Khá»§ng hoáº£ng" }] },
            { char: "è„š", nghiaHV: "CÆ¯á»šC", nghiaTV: "ChÃ¢n/CÆ°á»›c", on: "ã‚­ãƒ£ã‚¯", kun: "ã‚ã—", ti: "Thá»‹t (**Nhá»¥c âº¼**) Ä‘i (**Khá»© å»**) quá»³ (**Tiáº¿t å©**) báº±ng chÃ¢n.", ta: "**KhÃ¡ch** (Kyaku) Ä‘au chÃ¢n **A Si** (Ashi).", examples: [{ w: "è„šæœ¬", r: "ãã‚ƒãã»ã‚“", m: "Ká»‹ch báº£n" }, { w: "è„š", r: "ã‚ã—", m: "ChÃ¢n (bÃ n gháº¿)" }] },
            { char: "å´", nghiaHV: "KHÆ¯á»šC", nghiaTV: "Tá»« chá»‘i", on: "ã‚­ãƒ£ã‚¯", kun: "-", ti: "Äi (**Khá»© å»**) rá»“i quá»³ (**Tiáº¿t å©**) khÆ°á»›c tá»«.", ta: "**KhÃ¡ch** (Kyaku) khÆ°á»›c tá»«.", examples: [{ w: "å†·å´", r: "ã‚Œã„ãã‚ƒã", m: "LÃ m láº¡nh" }, { w: "å´ä¸‹", r: "ãã‚ƒã£ã‹", m: "BÃ¡c bá»" }] },
            { char: "è·", nghiaHV: "Cá»°", nghiaTV: "Cá»± ly", on: "ã‚­ãƒ§", kun: "-", ti: "ChÃ¢n (**TÃºc â»Š**) to lá»›n (**Cá»± å·¨**) Ä‘o cá»± ly.", ta: "**KiÃ´** (Kyo) cá»± ly.", examples: [{ w: "è·é›¢", r: "ãã‚‡ã‚Š", m: "Khoáº£ng cÃ¡ch" }, { w: "é•·è·é›¢", r: "ã¡ã‚‡ã†ãã‚‡ã‚Š", m: "Cá»± ly dÃ i" }] },
            { char: "å·¨", nghiaHV: "Cá»°", nghiaTV: "To lá»›n", on: "ã‚­ãƒ§", kun: "-", ti: "CÃ´ng (**CÃ´ng å·¥**) sá»©c bao vÃ¢y (**Cung åŒš**) to lá»›n.", ta: "**KiÃ´** (Kyo) to khá»•ng lá»“.", examples: [{ w: "å·¨å¤§", r: "ãã‚‡ã ã„", m: "Khá»•ng lá»“" }, { w: "å·¨äºº", r: "ãã‚‡ã˜ã‚“", m: "NgÆ°á»i khá»•ng lá»“" }] },
            { char: "ç·Š", nghiaHV: "KHáº¨N", nghiaTV: "Kháº©n cáº¥p", on: "ã‚­ãƒ³", kun: "-", ti: "Bá» tÃ´i (**Tháº§n è‡£**) dÃ¹ng tay (**Há»±u åˆ**) kÃ©o chá»‰ (**Má»‹ch ç³¸**) kháº©n cáº¥p.", ta: "**Kim** (Kin) khÃ¢u kháº©n cáº¥p.", examples: [{ w: "ç·Šæ€¥", r: "ãã‚“ãã‚…ã†", m: "Kháº©n cáº¥p" }, { w: "ç·Šå¼µ", r: "ãã‚“ã¡ã‚‡ã†", m: "CÄƒng tháº³ng" }] },
            { char: "å¾¡", nghiaHV: "NGá»°", nghiaTV: "KÃ­nh ngá»¯", on: "ã‚®ãƒ§", kun: "ãŠã‚“", ti: "NgÆ°á»i (**XÃ­ch å½³**) cáº§m chÃ y (**Ngá» åˆ**) dá»«ng (**Chá»‰ æ­¢**) ngá»± trá»‹.", ta: "**GiÃ³** (Gyo) thá»•i **Ã”n** (On) hÃ²a.", examples: [{ w: "å¾¡é£¯", r: "ã”ã¯ã‚“", m: "CÆ¡m" }, { w: "åˆ¶å¾¡", r: "ã›ã„ãã‚‡", m: "Kiá»ƒm soÃ¡t" }] },
            { char: "è™", nghiaHV: "NGÆ¯á»¢C", nghiaTV: "NgÆ°á»£c Ä‘Ã£i", on: "ã‚®ãƒ£ã‚¯", kun: "ã—ã„ãŸ", ti: "Há»• (**Há»• è™**) mÃ³ng vuá»‘t (**E å½**) ngÆ°á»£c Ä‘Ã£i.", ta: "**Giáº¯c** (Gyaku) co **Si Ta** (Shiitageru) ngÆ°á»£c Ä‘Ã£i.", examples: [{ w: "è™å¾…", r: "ãã‚ƒããŸã„", m: "NgÆ°á»£c Ä‘Ã£i" }, { w: "æš´è™", r: "ã¼ã†ãã‚ƒã", m: "Báº¡o ngÆ°á»£c" }] },

            // Others - 10
            { char: "çŠ ", nghiaHV: "HI", nghiaTV: "Hi sinh", on: "ã‚®", kun: "-", ti: "Con bÃ² (**NgÆ°u ç‰œ**) vÃ  cá»«u (**DÆ°Æ¡ng ç¾Š**) vÃ  ta (**NgÃ£ æˆ‘**) hi sinh.", ta: "**Ghi** (Gi) nhá»› hi sinh.", examples: [{ w: "çŠ ç‰²", r: "ãã›ã„", m: "Hi sinh" }, { w: "ä¾›çŠ ", r: "ãã", m: "Hiáº¿n táº¿" }] },
            { char: "ä»°", nghiaHV: "NGÆ¯á» NG", nghiaTV: "NgÆ°á»¡ng má»™", on: "ã‚®ãƒ§ã‚¦", kun: "ã‚ãŠ", ti: "NgÆ°á»i (**NhÃ¢n äº»**) ngáº©ng lÃªn (**Ngáº¡nh å¬**) ngÆ°á»¡ng má»™.", ta: "**GhiÃ´** (Gyou) **A Ã”** (Aogu) ngÆ°á»›c nhÃ¬n.", examples: [{ w: "ä¿¡ä»°", r: "ã—ã‚“ã“ã†", m: "TÃ­n ngÆ°á»¡ng" }, { w: "ä»°ã", r: "ã‚ãŠã", m: "NgÆ°á»¡ng má»™" }] },
            { char: "æµ", nghiaHV: "HUá»†", nghiaTV: "Ã‚n huá»‡", on: "ã‚±ã‚¤", kun: "ã‚ã", ti: "MÆ°á»i (**Tháº­p å**) cÃ¡nh Ä‘á»“ng (**Äiá»n ç”°**) trong tim (**TÃ¢m å¿ƒ**) lÃ  Ã¢n huá»‡.", ta: "**KÃª** (Kei) khai **MÃª GÆ°** (Megumu) ban Æ¡n.", examples: [{ w: "çŸ¥æµ", r: "ã¡ãˆ", m: "TrÃ­ tuá»‡" }, { w: "æµã‚€", r: "ã‚ãã‚€", m: "Ban cho" }] },
            { char: "å¶", nghiaHV: "NGáºªU", nghiaTV: "Ngáº«u nhiÃªn", on: "ã‚°ã‚¦", kun: "-", ti: "NgÆ°á»i (**NhÃ¢n äº»**) vÃ  con khá»‰ (**Ngung ç¦º**) ngáº«u nhiÃªn gáº·p.", ta: "**Gu** (Guu) ngáº«u nhiÃªn.", examples: [{ w: "å¶ç„¶", r: "ãã†ãœã‚“", m: "Ngáº«u nhiÃªn" }, { w: "é…å¶è€…", r: "ã¯ã„ãã†ã—ã‚ƒ", m: "Vá»£/Chá»“ng" }] },
            { char: "é‡", nghiaHV: "NGá»˜", nghiaTV: "ÄÃ£i ngá»™", on: "ã‚°ã‚¦", kun: "-", ti: "Con khá»‰ (**Ngung ç¦º**) Ä‘i (**SÆ°á»›c è¾¶**) gáº·p gá»¡.", ta: "**Gu** (Guu) Ä‘Ã£i ngá»™.", examples: [{ w: "å¢ƒé‡", r: "ãã‚‡ã†ãã†", m: "Cáº£nh ngá»™" }, { w: "å¾…é‡", r: "ãŸã„ãã†", m: "ÄÃ£i ngá»™" }] },
            { char: "æ†©", nghiaHV: "KHáº¾", nghiaTV: "Nghá»‰ ngÆ¡i", on: "ã‚±ã‚¤", kun: "ã„ã“", ti: "LÆ°á»¡i (**Thiá»‡t èˆŒ**) tá»± (**Tá»± è‡ª**) tim (**TÃ¢m å¿ƒ**) nghá»‰.", ta: "**KÃª** (Kei) giÆ°á»ng **I CÃ´** (Ikou) nghá»‰.", examples: [{ w: "ä¼‘æ†©", r: "ãã‚…ã†ã‘ã„", m: "Nghá»‰ giáº£i lao" }, { w: "æ†©ã„", r: "ã„ã“ã„", m: "Nghá»‰ ngÆ¡i" }] },
            { char: "å…¼", nghiaHV: "KIÃŠM", nghiaTV: "KiÃªm nhiá»‡m", on: "ã‚±ãƒ³", kun: "ã‹", ti: "Tay cáº§m hai cÃ¢y lÃºa kiÃªm luÃ´n.", ta: "**Ká»n** (Ken) ká»n **Ca** (Kaneru) kiÃªm nhiá»‡m.", examples: [{ w: "å…¼æ¥­", r: "ã‘ã‚“ãã‚‡ã†", m: "KiÃªm nghiá»‡p" }, { w: "å…¼ã­ã‚‹", r: "ã‹ã­ã‚‹", m: "KiÃªm" }] },
            { char: "é£", nghiaHV: "KHIá»‚N", nghiaTV: "PhÃ¡i Ä‘i/DÃ¹ng", on: "ã‚±ãƒ³", kun: "ã¤ã‹", ti: "Trung (**Trung ä¸­**) quan (**Quan å** - biáº¿n thá»ƒ) Ä‘i (**SÆ°á»›c è¾¶**) phÃ¡i khiá»ƒn.", ta: "**Ká»n** (Ken) ká»n **TÆ° Ca** (Tsukau) sai phÃ¡i.", examples: [{ w: "æ´¾é£", r: "ã¯ã‘ã‚“", m: "PhÃ¡i cá»­" }, { w: "é£ã†", r: "ã¤ã‹ã†", m: "Sá»­ dá»¥ng" }] },
            { char: "åœ", nghiaHV: "QUYá»‚N", nghiaTV: "Pháº¡m vi", on: "ã‚±ãƒ³", kun: "-", ti: "Cuá»™n (**Quyá»ƒn å·»**) trong há»™p (**Vi å›—**) lÃ  pháº¡m vi.", ta: "**Ká»n** (Ken) ká»n trong vÃ²ng.", examples: [{ w: "åœå¤–", r: "ã‘ã‚“ãŒã„", m: "NgoÃ i vÃ¹ng" }, { w: "å¤§æ°—åœ", r: "ãŸã„ãã‘ã‚“", m: "KhÃ­ quyá»ƒn" }] },
            { char: "å€™", nghiaHV: "Háº¬U", nghiaTV: "KhÃ­ háº­u", on: "ã‚³ã‚¦", kun: "ãã†ã‚ã†", ti: "NgÆ°á»i (**NhÃ¢n äº»**) cáº§m gáº­y chá» Ä‘á»£i khÃ­ háº­u.", ta: "**CÃ´** (Kou) nÆ°Æ¡ng **XÃ´ RÃ´** (Sourou) phá»¥c vá»¥.", examples: [{ w: "æ°—å€™", r: "ãã“ã†", m: "KhÃ­ háº­u" }, { w: "å€™è£œ", r: "ã“ã†ã»", m: "á»¨ng cá»­ viÃªn" }] },
            
            // Mixed - 10
            { char: "å‰£", nghiaHV: "KIáº¾M", nghiaTV: "Kiáº¿m", on: "ã‚±ãƒ³", kun: "ã¤ã‚‹ã", ti: "Má»i ngÆ°á»i (**ThiÃªm åƒ‰**) Ä‘á»u cáº§m dao (**Äao åˆ‚**) kiáº¿m.", ta: "**Ká»n** (Ken) ká»n cáº§m **TÆ° RÆ° Ghi** (Tsurugi) kiáº¿m.", examples: [{ w: "çœŸå‰£", r: "ã—ã‚“ã‘ã‚“", m: "NghiÃªm tÃºc" }, { w: "å‰£é“", r: "ã‘ã‚“ã©ã†", m: "Kiáº¿m Ä‘áº¡o" }] },
            { char: "ç„", nghiaHV: "HUYá»€N", nghiaTV: "Huyá»n bÃ­", on: "ã‚²ãƒ³", kun: "-", ti: "Äáº§u (**Äáº§u äº **) sá»£i chá»‰ nhá» (**YÃªu å¹º**) huyá»n bÃ­.", ta: "**Ghen** (Gen) huyá»n bÃ­.", examples: [{ w: "ç„é–¢", r: "ã’ã‚“ã‹ã‚“", m: "Sáº£nh vÃ o" }, { w: "ç„ç±³", r: "ã’ã‚“ã¾ã„", m: "Gáº¡o lá»©t" }] },
            { char: "å¹»", nghiaHV: "HUYá»„N", nghiaTV: "áº¢o tÆ°á»Ÿng", on: "ã‚²ãƒ³", kun: "ã¾ã¼ã‚ã—", ti: "Sá»£i chá»‰ nhá» (**YÃªu å¹º**) mÃ³c (**L ä¹š** - biáº¿n thá»ƒ) áº£o áº£nh.", ta: "**Ghen** (Gen) vá»›i **Ma BÃ´ RÃ´ Si** (Maboroshi) áº£o áº£nh.", examples: [{ w: "å¹»æƒ³", r: "ã’ã‚“ãã†", m: "áº¢o tÆ°á»Ÿng" }, { w: "å¹»", r: "ã¾ã¼ã‚ã—", m: "áº¢o áº£nh" }] },
            { char: "è¿", nghiaHV: "NGHÃŠNH", nghiaTV: "ÄÃ³n", on: "ã‚²ã‚¤", kun: "ã‚€ã‹", ti: "Ngáº©ng Ä‘áº§u (**Ngáº¡nh å¬**) Ä‘i (**SÆ°á»›c è¾¶**) Ä‘Ã³n.", ta: "**GhÃª** (Gei) chÆ°a **MÆ° Ca** (Mukaeru) Ä‘Ã³n.", examples: [{ w: "æ­“è¿", r: "ã‹ã‚“ã’ã„", m: "Hoan nghÃªnh" }, { w: "è¿ãˆã‚‹", r: "ã‚€ã‹ãˆã‚‹", m: "ÄÃ³n" }] },
            { char: "é¯¨", nghiaHV: "KÃŒNH", nghiaTV: "CÃ¡ voi", on: "ã‚²ã‚¤", kun: "ãã˜ã‚‰", ti: "CÃ¡ (**NgÆ° é­š**) á»Ÿ kinh Ä‘Ã´ (**Kinh äº¬**) lÃ  cÃ¡ voi.", ta: "**GhÃª** (Gei) sá»£ **CÆ° Ji Ra** (Kujira) cÃ¡ voi.", examples: [{ w: "æ•é¯¨", r: "ã»ã’ã„", m: "Báº¯t cÃ¡ voi" }, { w: "é¯¨", r: "ãã˜ã‚‰", m: "CÃ¡ voi" }] },
            { char: "æ’ƒ", nghiaHV: "KÃCH", nghiaTV: "Táº¥n cÃ´ng", on: "ã‚²ã‚­", kun: "ã†", ti: "Xe (**Xa è»Š**) tay (**Thá»§ æ‰‹**) Ä‘áº­p (**ThÃ¹ æ®³**) táº¥n cÃ´ng.", ta: "**GhÃª Ki** (Geki) **U** (Utsu) báº¯n.", examples: [{ w: "æ”»æ’ƒ", r: "ã“ã†ã’ã", m: "Táº¥n cÃ´ng" }, { w: "æ’ƒã¤", r: "ã†ã¤", m: "Báº¯n" }] },
            { char: "èª‡", nghiaHV: "KHOA", nghiaTV: "Tá»± hÃ o", on: "ã‚³", kun: "ã»ã“", ti: "NÃ³i (**NgÃ´n è¨€**) to (**Äáº¡i å¤§**) vÃ  thá»Ÿ (**Khuy ä¸‚**) khoa trÆ°Æ¡ng.", ta: "**CÃ´** (Ko) giÃ¡o **HÃ´ CÃ´** (Hokoru) tá»± hÃ o.", examples: [{ w: "èª‡å¼µ", r: "ã“ã¡ã‚‡ã†", m: "Khoa trÆ°Æ¡ng" }, { w: "èª‡ã‚‹", r: "ã»ã“ã‚‹", m: "Tá»± hÃ o" }] },
            { char: "é¼“", nghiaHV: "Cá»”", nghiaTV: "CÃ¡i trá»‘ng", on: "ã‚³", kun: "ã¤ã¥ã¿", ti: "ÄÃ¡nh trá»‘ng (**Cá»• å£´**) báº±ng cÃ nh cÃ¢y (**Chi æ”¯**).", ta: "**CÃ´** (Ko) Ä‘Ã¡nh **TÆ° Dá»± Mi** (Tsuzumi) trá»‘ng.", examples: [{ w: "é¼“å‹•", r: "ã“ã©ã†", m: "Nhá»‹p tim" }, { w: "å¤ªé¼“", r: "ãŸã„ã“", m: "Trá»‘ng Taiko" }] },
            { char: "å­¤", nghiaHV: "CÃ”", nghiaTV: "CÃ´ Ä‘á»™c", on: "ã‚³", kun: "-", ti: "Äá»©a con (**Tá»­ å­**) Äƒn dÆ°a (**Qua ç“œ**) cÃ´ Ä‘Æ¡n.", ta: "**CÃ´** (Ko) Ä‘á»™c.", examples: [{ w: "å­¤ç‹¬", r: "ã“ã©ã", m: "CÃ´ Ä‘á»™c" }, { w: "å­¤ç«‹", r: "ã“ã‚Šã¤", m: "CÃ´ láº­p" }] },
            { char: "å¼§", nghiaHV: "Há»’", nghiaTV: "Cung", on: "ã‚³", kun: "-", ti: "Cung (**Cung å¼“**) hÃ¬nh quáº£ dÆ°a (**Qua ç“œ**).", ta: "**CÃ´** (Ko) váº½ hÃ¬nh cung.", examples: [{ w: "æ‹¬å¼§", r: "ã‹ã£ã“", m: "Dáº¥u ngoáº·c" }, { w: "å††å¼§", r: "ãˆã‚“ã“", m: "Cung trÃ²n" }] },
            { char: "æ¯", nghiaHV: "KHÃ”", nghiaTV: "HÃ©o", on: "ã‚³", kun: "ã‹", ti: "CÃ¢y (**Má»™c æœ¨**) cá»• (**Cá»• å¤**) bá»‹ khÃ´ hÃ©o.", ta: "**CÃ´** (Ko) Ä‘Æ¡n **Ca** (Kareru) hÃ©o.", examples: [{ w: "æ¯æ¸‡", r: "ã“ã‹ã¤", m: "Cáº¡n kiá»‡t" }, { w: "æ¯ã‚Œã‚‹", r: "ã‹ã‚Œã‚‹", m: "HÃ©o" }] },
            { char: "é›‡", nghiaHV: "Cá»", nghiaTV: "ThuÃª", on: "ã‚³", kun: "ã‚„ã¨", ti: "Cá»­a (**Há»™ æˆ¸**) nuÃ´i chim (**Chuy éš¹**) thuÃª.", ta: "**CÃ´** (Ko) **Ya TÃ´** (Yatou) thuÃª ngÆ°á»i.", examples: [{ w: "é›‡ç”¨", r: "ã“ã‚ˆã†", m: "Tuyá»ƒn dá»¥ng" }, { w: "é›‡ã†", r: "ã‚„ã¨ã†", m: "ThuÃª" }] },
            { char: "é¡§", nghiaHV: "Cá»", nghiaTV: "Quay láº¡i/KhÃ¡ch", on: "ã‚³", kun: "ã‹ãˆã‚Š", ti: "ThuÃª (**Cá»‘ é›‡**) ngÆ°á»i cÃ³ Ä‘áº§u Ã³c (**Hiá»‡t é **) cá»‘ váº¥n.", ta: "**CÃ´** (Ko) **Ca ÃŠ Ri** (Kaerimiru) ngoáº£nh láº¡i.", examples: [{ w: "é¡§å®¢", r: "ã“ãã‚ƒã", m: "KhÃ¡ch hÃ ng" }, { w: "é¡§ã¿ã‚‹", r: "ã‹ãˆã‚Šã¿ã‚‹", m: "Há»“i tÆ°á»Ÿng" }] },
            { char: "ç´‹", nghiaHV: "VÄ‚N", nghiaTV: "Hoa vÄƒn", on: "ãƒ¢ãƒ³", kun: "-", ti: "Sá»£i chá»‰ (**Má»‹ch ç³¸**) cÃ³ vÄƒn (**VÄƒn æ–‡**) váº».", ta: "**MÃ´n** (Mon) há»c hoa vÄƒn.", examples: [{ w: "æŒ‡ç´‹", r: "ã—ã‚‚ã‚“", m: "VÃ¢n tay" }, { w: "æ³¢ç´‹", r: "ã¯ã‚‚ã‚“", m: "Gá»£n sÃ³ng" }] },
            { char: "å·§", nghiaHV: "Xáº¢O", nghiaTV: "KhÃ©o lÃ©o", on: "ã‚³ã‚¦", kun: "ãŸã", ti: "CÃ´ng (**CÃ´ng å·¥**) viá»‡c lÃ m hÃ o (**HÃ o ä¸‚**) nhoÃ¡ng khÃ©o lÃ©o.", ta: "**CÃ´** (Kou) giÃ¡o **Ta CÆ°** (Takumi) khÃ©o lÃ©o.", examples: [{ w: "ç²¾å·§", r: "ã›ã„ã“ã†", m: "Tinh xáº£o" }, { w: "å·§ã¿", r: "ãŸãã¿", m: "KhÃ©o lÃ©o" }] },
            { char: "æ”»", nghiaHV: "CÃ”NG", nghiaTV: "Táº¥n cÃ´ng", on: "ã‚³ã‚¦", kun: "ã›", ti: "CÃ´ng (**CÃ´ng å·¥**) nhÃ¢n bá»‹ Ä‘Ã¡nh (**Phá»™c æ”µ**) táº¥n cÃ´ng.", ta: "**CÃ´** (Kou) giÃ¡o **SÃª** (Semeru) táº¥n cÃ´ng.", examples: [{ w: "æ”»æ’ƒ", r: "ã“ã†ã’ã", m: "Táº¥n cÃ´ng" }, { w: "æ”»ã‚ã‚‹", r: "ã›ã‚ã‚‹", m: "Táº¥n cÃ´ng" }] },
            { char: "è’", nghiaHV: "HOANG", nghiaTV: "Hoang dÃ£", on: "ã‚³ã‚¦", kun: "ã‚", ti: "Cá» (**Tháº£o è‰¹**) cháº¿t (**Vong äº¡**) trÃªn sÃ´ng (**XuyÃªn å·**) hoang váº¯ng.", ta: "**CÃ´** (Kou) giÃ¡o **A** (Arai) thÃ´ báº¡o.", examples: [{ w: "è’é‡", r: "ã“ã†ã‚„", m: "Hoang dÃ£" }, { w: "è’ã„", r: "ã‚ã‚‰ã„", m: "ThÃ´ báº¡o" }] },
            { char: "æ…Œ", nghiaHV: "HOáº¢NG", nghiaTV: "Vá»™i vÃ ng", on: "ã‚³ã‚¦", kun: "ã‚ã‚", ti: "Tim (**TÃ¢m å¿„**) hoang (**Hoang è’**) mang hoáº£ng há»‘t.", ta: "**CÃ´** (Kou) giÃ¡o **A Wa** (Awateru) vá»™i vÃ ng.", examples: [{ w: "ææ…Œ", r: "ãã‚‡ã†ã“ã†", m: "Khá»§ng hoáº£ng" }, { w: "æ…Œã¦ã‚‹", r: "ã‚ã‚ã¦ã‚‹", m: "Luá»‘ng cuá»‘ng" }] },
            { char: "ç¨¿", nghiaHV: "Cáº¢O", nghiaTV: "Báº£n tháº£o", on: "ã‚³ã‚¦", kun: "-", ti: "LÃºa (**HÃ²a ç¦¾**) cao (**Cao é«˜**) lÃ m giáº¥y viáº¿t báº£n tháº£o.", ta: "**CÃ´** (Kou) viáº¿t báº£n tháº£o.", examples: [{ w: "åŸç¨¿", r: "ã’ã‚“ã“ã†", m: "Báº£n tháº£o" }, { w: "æŠ•ç¨¿", r: "ã¨ã†ã“ã†", m: "ÄÄƒng bÃ i" }] }
        ];

        // --- STATE ---
        let currentTab = 'learn';
        let currentQuizIndex = 0;
        let quizScore = 0;
        let currentQuizQuestion = null;
        let currentStrokeSvg = null;

        // --- UTILS ---
        function speak(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                // Clean text for speech: remove special chars
                const clean = text.replace(/\[.*?\]/g, '').replace(/<.*?>/g, '').replace(/ãƒ»/g, '').replace(/\*/g, '');
                const u = new SpeechSynthesisUtterance(clean);
                u.lang = 'ja-JP'; u.rate = 0.9;
                window.speechSynthesis.speak(u);
            }
        }

        function getKanjiHex(kanji) {
            return kanji.charCodeAt(0).toString(16).padStart(5, '0');
        }

        async function fetchKanjiSvg(hex) {
            try {
                const response = await fetch(`https://cdn.jsdelivr.net/gh/KanjiVG/kanjivg/kanji/${hex}.svg`);
                if (!response.ok) throw new Error('Not found');
                return await response.text();
            } catch (e) { return null; }
        }

        // --- TABS ---
        function switchTab(tab) {
            currentTab = tab;
            document.getElementById('learn-section').classList.toggle('hidden', tab !== 'learn');
            document.getElementById('quiz-section').classList.toggle('hidden', tab !== 'quiz');
            
            const btnLearn = document.getElementById('tab-learn');
            const btnQuiz = document.getElementById('tab-quiz');
            
            if (tab === 'learn') {
                btnLearn.classList.add('tab-active'); btnLearn.classList.remove('tab-inactive');
                btnQuiz.classList.add('tab-inactive'); btnQuiz.classList.remove('tab-active');
            } else {
                btnQuiz.classList.add('tab-active'); btnQuiz.classList.remove('tab-inactive');
                btnLearn.classList.add('tab-inactive'); btnLearn.classList.remove('tab-active');
                startQuiz();
            }
        }

        // --- RENDER LEARN ---
        function renderLearn() {
            const grid = document.getElementById('kanji-grid');
            grid.innerHTML = kanjiData.map((k, idx) => `
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition duration-300 flex flex-col group">
                    <!-- HEADER -->
                    <div class="bg-sky-50 p-4 border-b border-sky-100 flex justify-between items-start relative">
                        <div class="flex gap-4 items-center">
                            <div class="w-16 h-16 bg-white rounded-lg flex items-center justify-center border-2 border-sky-200 cursor-pointer hover:border-sky-400 transition shadow-sm" onclick="showStrokeOrder('${k.char}')">
                                <span class="text-4xl font-bold kanji-font text-gray-800">${k.char}</span>
                            </div>
                            <div>
                                <div class="text-red-600 font-bold text-lg tracking-wide">${k.nghiaHV}</div>
                                <div class="text-gray-600 text-sm font-medium">${k.nghiaTV}</div>
                            </div>
                        </div>
                        <button onclick="showStrokeOrder('${k.char}')" class="text-sky-500 hover:text-sky-700 bg-white rounded-full p-2 w-8 h-8 flex items-center justify-center shadow-sm border border-sky-100"><i class="fas fa-pen-nib text-xs"></i></button>
                        <div class="absolute -bottom-3 right-4 text-6xl text-gray-100 font-black -z-0 pointer-events-none select-none">${idx + 1048}</div>
                    </div>
                    
                    <!-- BODY -->
                    <div class="p-4 space-y-3 z-10 relative flex-grow flex flex-col">
                        <!-- READINGS with Audio -->
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="bg-gray-50 rounded p-2 border border-gray-100">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-[10px] uppercase font-bold text-gray-400">On</span>
                                    <button onclick="speak('${k.on}')" class="text-sky-400 hover:text-sky-600"><i class="fas fa-volume-up text-xs"></i></button>
                                </div>
                                <span class="font-bold text-sky-800 kanji-font text-base">${k.on}</span>
                            </div>
                            <div class="bg-gray-50 rounded p-2 border border-gray-100">
                                <div class="flex justify-between items-center mb-1">
                                    <span class="text-[10px] uppercase font-bold text-gray-400">Kun</span>
                                    <button onclick="speak('${k.kun}')" class="text-sky-400 hover:text-sky-600"><i class="fas fa-volume-up text-xs"></i></button>
                                </div>
                                <span class="font-bold text-sky-800 kanji-font text-base">${k.kun}</span>
                            </div>
                        </div>
                        
                        <!-- MNEMONICS (AZAKANJI STYLE) -->
                        <div class="space-y-2">
                            <div class="bg-orange-50 p-2 rounded text-xs text-orange-900 border border-orange-100">
                                <span class="font-bold text-orange-600 mr-1">ğŸ–¼ï¸ HÃ¬nh:</span> ${k.ti}
                            </div>
                            <div class="bg-blue-50 p-2 rounded text-xs text-blue-900 border border-blue-100">
                                <span class="font-bold text-blue-600 mr-1">ğŸ”Š Ã‚m:</span> ${k.ta.replace(/\*\*(.*?)\*\*/g, '<span class="font-bold text-blue-700">$1</span>')}
                            </div>
                        </div>

                        <!-- EXAMPLES with Audio -->
                        <div class="pt-2 border-t border-gray-100 space-y-2 mt-auto">
                            ${k.examples.map(ex => `
                                <div class="flex justify-between items-center group/ex cursor-pointer p-1 rounded hover:bg-gray-50" onclick="speak('${ex.w}')">
                                    <div>
                                        <div class="kanji-font font-bold text-gray-800 text-sm">${ex.w} <span class="text-xs font-normal text-gray-400">(${ex.r})</span></div>
                                        <div class="text-xs text-gray-500">${ex.m}</div>
                                    </div>
                                    <i class="fas fa-volume-up text-xs text-gray-300 group-hover/ex:text-sky-500 transition"></i>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // --- STROKE ORDER MODAL ---
        async function showStrokeOrder(kanji) {
            const hex = getKanjiHex(kanji);
            document.getElementById('stroke-modal').classList.remove('hidden');
            document.getElementById('stroke-modal-char').innerText = kanji;
            
            const animContainer = document.getElementById('stroke-animation-container');
            const gridContainer = document.getElementById('stroke-grid-container');
            animContainer.innerHTML = '<span class="text-xs text-gray-400">Äang táº£i...</span>';
            
            const svgContent = await fetchKanjiSvg(hex);
            if (!svgContent) {
                animContainer.innerHTML = "<p class='p-4 text-red-500 text-xs'>Lá»—i</p>";
                gridContainer.innerHTML = "";
                return;
            }

            // Animation Setup
            animContainer.innerHTML = svgContent;
            const mainSvg = animContainer.querySelector('svg');
            mainSvg.setAttribute('width', '100%'); mainSvg.setAttribute('height', '100%');
            const paths = mainSvg.querySelectorAll('path');
            paths.forEach(p => {
                const len = p.getTotalLength();
                p.style.strokeDasharray = len; p.style.strokeDashoffset = len;
                p.style.stroke = "#333"; p.style.strokeWidth = "4"; p.style.fill = "none";
                p.style.strokeLinecap = "round"; p.style.strokeLinejoin = "round";
            });
            currentStrokeSvg = mainSvg;
            replayStrokeAnimation();

            // Grid Setup
            gridContainer.innerHTML = '';
            for(let i=0; i<paths.length; i++) {
                const box = document.createElement('div');
                box.className = "w-12 h-12 md:w-16 md:h-16 bg-white border border-gray-200 relative stroke-grid-box flex items-center justify-center";
                const parser = new DOMParser();
                const svgClone = parser.parseFromString(svgContent, "image/svg+xml").querySelector('svg');
                svgClone.setAttribute('width', '100%'); svgClone.setAttribute('height', '100%');
                svgClone.querySelectorAll('path').forEach((p, idx) => {
                    p.style.fill="none"; p.style.strokeLinecap="round"; p.style.strokeLinejoin="round";
                    if(idx < i) { p.style.stroke="#9ca3af"; p.style.strokeWidth="3"; }
                    else if(idx === i) { p.style.stroke="#000"; p.style.strokeWidth="4"; }
                    else p.style.display="none";
                });
                box.appendChild(svgClone);
                gridContainer.appendChild(box);
            }
        }

        function replayStrokeAnimation() {
            if(!currentStrokeSvg) return;
            const paths = currentStrokeSvg.querySelectorAll('path');
            paths.forEach(p => { p.style.transition = 'none'; p.style.strokeDashoffset = p.getTotalLength(); });
            void currentStrokeSvg.offsetWidth;
            let delay = 0;
            paths.forEach(p => {
                p.style.transition = `stroke-dashoffset 0.6s ease-in-out ${delay}s`;
                p.style.strokeDashoffset = '0';
                delay += 0.6;
            });
        }

        function closeStrokeModal() { document.getElementById('stroke-modal').classList.add('hidden'); }

        // --- QUIZ LOGIC ---
        function startQuiz() {
            quizScore = 0;
            currentQuizIndex = 0;
            document.getElementById('score-display').innerText = '0';
            loadQuestion();
        }

        function loadQuestion() {
            const qType = Math.random() > 0.5 ? 'kanji-meaning' : 'meaning-kanji';
            const target = kanjiData[Math.floor(Math.random() * kanjiData.length)];
            currentQuizQuestion = { target, type: qType };

            const display = document.getElementById('quiz-kanji-display');
            const questionText = document.getElementById('quiz-question-text');
            const optionsArea = document.getElementById('options-area');
            
            document.getElementById('feedback-area').classList.add('hidden');
            document.getElementById('q-current').innerText = currentQuizIndex + 1;
            document.getElementById('quiz-progress').style.width = `${((currentQuizIndex) / 10) * 100}%`;

            // Generate distractors
            const others = kanjiData.filter(k => k !== target).sort(() => 0.5 - Math.random()).slice(0, 3);
            const options = [target, ...others].sort(() => 0.5 - Math.random());

            if (qType === 'kanji-meaning') {
                display.innerText = target.char;
                questionText.innerText = "HÃ¡n tá»± nÃ y cÃ³ nghÄ©a lÃ  gÃ¬?";
                optionsArea.innerHTML = options.map(opt => `
                    <button onclick="checkAnswer('${opt.char}')" class="quiz-opt-btn bg-white border-2 border-gray-200 p-4 rounded-xl hover:border-sky-400 hover:bg-sky-50 transition active:scale-95 shadow-sm text-lg font-bold text-gray-700">
                        ${opt.nghiaHV} (${opt.nghiaTV})
                    </button>
                `).join('');
            } else {
                display.innerText = target.nghiaHV;
                questionText.innerText = `Chá»n Kanji tÆ°Æ¡ng á»©ng vá»›i "${target.nghiaTV}"`;
                optionsArea.innerHTML = options.map(opt => `
                    <button onclick="checkAnswer('${opt.char}')" class="quiz-opt-btn bg-white border-2 border-gray-200 p-4 rounded-xl hover:border-sky-400 hover:bg-sky-50 transition active:scale-95 shadow-sm text-4xl font-bold kanji-font text-gray-800">
                        ${opt.char}
                    </button>
                `).join('');
            }
        }

        function checkAnswer(selectedChar) {
            const btns = document.querySelectorAll('.quiz-opt-btn');
            btns.forEach(b => b.disabled = true);

            const isCorrect = selectedChar === currentQuizQuestion.target.char;
            const feedbackArea = document.getElementById('feedback-area');
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackDetail = document.getElementById('feedback-detail');

            feedbackArea.classList.remove('hidden');

            if (isCorrect) {
                quizScore += 10;
                document.getElementById('score-display').innerText = quizScore;
                feedbackTitle.innerHTML = '<i class="fas fa-check-circle text-emerald-500 mr-2"></i> ChÃ­nh xÃ¡c!';
                feedbackTitle.className = "font-bold text-lg mb-1 flex items-center text-emerald-700";
                feedbackDetail.innerHTML = `
                    <span class="text-3xl kanji-font font-bold text-gray-800 mr-2">${currentQuizQuestion.target.char}</span>
                    <span class="font-bold text-red-600">${currentQuizQuestion.target.nghiaHV}</span>: ${currentQuizQuestion.target.nghiaTV}
                `;
                feedbackArea.className = "bg-emerald-50 rounded-xl p-4 border border-emerald-200 text-left animate-fade-in";
                speak(currentQuizQuestion.target.char);
            } else {
                feedbackTitle.innerHTML = '<i class="fas fa-times-circle text-red-500 mr-2"></i> Sai rá»“i!';
                feedbackTitle.className = "font-bold text-lg mb-1 flex items-center text-red-700";
                feedbackDetail.innerHTML = `ÄÃ¡p Ã¡n Ä‘Ãºng lÃ : <strong>${currentQuizQuestion.target.char} (${currentQuizQuestion.target.nghiaTV})</strong>`;
                feedbackArea.className = "bg-red-50 rounded-xl p-4 border border-red-200 text-left animate-fade-in wrong-anim";
            }
        }

        function nextQuestion() {
            currentQuizIndex++;
            if (currentQuizIndex >= 10) {
                alert(`HoÃ n thÃ nh! Báº¡n Ä‘áº¡t ${quizScore} Ä‘iá»ƒm.`);
                startQuiz();
            } else {
                loadQuestion();
            }
        }

        // INIT
        renderLearn();

    </script>
</body>
</html>
