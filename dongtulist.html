<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AzaKanji - 109 ƒê·ªông T·ª´ Full (Final Ultimate)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #f3f4f6; }
        .kanji-font { font-family: 'Noto Sans JP', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .modal-enter { animation: modalIn 0.3s ease-out forwards; }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .correct-anim { animation: bounce 0.5s; }
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        .wrong-anim { animation: shake 0.5s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-indigo-700 text-white shadow-lg sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="flex items-center space-x-3 cursor-pointer" onclick="location.reload()">
                    <i class="fas fa-torii-gate text-3xl text-pink-300"></i>
                    <div>
                        <h1 class="text-xl font-bold uppercase tracking-wider">AzaKanji Dojo</h1>
                        <p class="text-xs text-indigo-200">109 ƒê·ªông T·ª´ & Chia Th·ªÉ Full</p>
                    </div>
                </div>
                <div class="flex bg-indigo-900 rounded-lg p-1">
                    <button onclick="switchTab('learn')" id="tab-learn" class="px-4 py-2 rounded-md text-sm font-bold transition bg-white text-indigo-900 shadow">
                        <i class="fas fa-book-open mr-2"></i>H·ªçc T·ª´
                    </button>
                    <button onclick="switchTab('quiz')" id="tab-quiz" class="px-4 py-2 rounded-md text-sm font-bold transition text-indigo-300 hover:text-white">
                        <i class="fas fa-keyboard mr-2"></i>Ki·ªÉm Tra
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex-grow relative z-0" id="app-container">
        <!-- LEARN MODE -->
        <div id="learn-section" class="fade-in">
            <div id="content-area" class="space-y-8"></div>
        </div>

        <!-- QUIZ MODE -->
        <div id="quiz-section" class="hidden fade-in max-w-2xl mx-auto">
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200">
                <div class="bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white flex justify-between items-center">
                    <div><h2 class="text-2xl font-bold">Th·ª≠ Th√°ch Kanji</h2><p class="text-indigo-100 text-sm">Nh√¨n Kanji - G√µ Hiragana</p></div>
                    <div class="text-right"><div class="text-xs text-indigo-200 uppercase font-bold">ƒêi·ªÉm s·ªë</div><div class="text-4xl font-bold" id="score-display">0</div></div>
                </div>
                <div class="p-8 text-center">
                    <div class="mb-8">
                        <div class="text-sm text-gray-500 mb-2 uppercase tracking-wide font-bold">T·ª´ n√†y ƒë·ªçc l√† g√¨?</div>
                        <div id="quiz-kanji" class="text-6xl kanji-font font-bold text-gray-800 mb-4 transition-all"></div>
                        <div id="quiz-meaning" class="text-xl text-indigo-600 font-bold mb-2"></div>
                    </div>
                    <div class="relative max-w-md mx-auto mb-6">
                        <input type="text" id="quiz-input" class="w-full text-center text-2xl p-4 border-2 border-gray-300 rounded-xl focus:border-indigo-500 focus:outline-none transition kanji-font" placeholder="Nh·∫≠p Hiragana (vd: „ÅÑ„Åè)" autocomplete="off">
                    </div>
                    <div id="feedback-area" class="hidden rounded-xl p-4 bg-gray-50 border border-gray-200 text-left mb-6">
                        <div id="feedback-title" class="font-bold text-lg mb-2 flex items-center"></div>
                        <div class="text-gray-700 mb-2">
                            ƒê√°p √°n ƒë√∫ng: <span id="correct-answer" class="font-bold text-xl text-indigo-600 mx-2 kanji-font"></span>
                            <button onclick="playCurrentAudio()" class="text-gray-500 hover:text-indigo-600"><i class="fas fa-volume-up"></i></button>
                        </div>
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200 text-sm text-gray-800">
                            <div class="font-bold text-yellow-800 mb-1"><i class="fas fa-lightbulb mr-1"></i> M·∫πo ghi nh·ªõ:</div>
                            <div id="quiz-tip-img" class="mb-1"></div>
                            <div id="quiz-tip-sound"></div>
                        </div>
                    </div>
                    <div>
                        <button id="btn-check" onclick="checkAnswer()" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition active:scale-95 text-lg">Ki·ªÉm Tra</button>
                        <button id="btn-next" onclick="nextQuestion()" class="hidden w-full md:w-auto bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition active:scale-95 text-lg">C√¢u Ti·∫øp Theo <i class="fas fa-arrow-right ml-2"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-gray-400 py-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
            <div class="mb-4">
                <i class="fas fa-torii-gate text-2xl text-indigo-500 mb-2"></i>
                <h3 class="text-lg font-bold text-white">AzaKanji Dojo</h3>
                <p class="text-sm">H·ªçc ti·∫øng Nh·∫≠t b·∫±ng ph∆∞∆°ng ph√°p Si√™u tr√≠ nh·ªõ & √Çm thanh t∆∞∆°ng t·ª±</p>
            </div>
            <div class="border-t border-gray-700 pt-4 mt-4 text-xs">
                <p>&copy; 2025 AzaKanji Project. Developed for Kanji Lovers.</p>
                <p class="mt-1">D·ªØ li·ªáu bao g·ªìm 109 ƒë·ªông t·ª´ c·ªët l√µi s∆° c·∫•p (N5-N4).</p>
            </div>
        </div>
    </footer>

    <!-- MODAL -->
    <div id="conjugation-modal" class="fixed inset-0 z-50 hidden overflow-y-auto" role="dialog" aria-modal="true">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm" onclick="closeModal()"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full modal-enter">
                <div class="bg-indigo-700 px-4 py-4 sm:px-6 flex justify-between items-center text-white">
                    <div><h3 class="text-lg leading-6 font-bold" id="modal-title">Chia Th·ªÉ ƒê·ªông T·ª´</h3><p class="text-indigo-200 text-xs">T·ª± ƒë·ªông sinh v√≠ d·ª• minh h·ªça</p></div>
                    <button onclick="closeModal()" class="text-indigo-200 hover:text-white focus:outline-none"><i class="fas fa-times text-2xl"></i></button>
                </div>
                <div class="bg-gray-50 px-4 py-5 sm:p-6 max-h-[70vh] overflow-y-auto">
                    <div class="flex items-center mb-6 bg-white p-4 rounded-xl shadow-sm border border-gray-200">
                        <div class="text-5xl kanji-font font-bold text-indigo-600 mr-4" id="modal-kanji"></div>
                        <div>
                            <div class="text-2xl font-bold text-gray-800" id="modal-hiragana"></div>
                            <div class="text-sm text-gray-500 font-bold uppercase tracking-wide" id="modal-group"></div>
                            <div class="text-lg text-gray-700" id="modal-meaning"></div>
                        </div>
                        <button id="modal-main-audio" class="ml-auto bg-indigo-50 text-indigo-600 p-3 rounded-full hover:bg-indigo-100 transition shadow-sm"><i class="fas fa-volume-up text-xl"></i></button>
                    </div>
                    <div class="space-y-4" id="conjugation-list"></div>
                </div>
                <div class="bg-gray-100 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm" onclick="closeModal()">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- MASTER DATA (FULL 109 VERBS) ---
        // k: kanji, h: hiragana, m: meaning, t: type (1:Godan, 2:Ichidan, 3:Irregular), e: exception key
        // ti: image tip, ta: audio tip
        const masterVerbList = [
            // 1. Movement
            { k: "Ë°å„Åè", h: "„ÅÑ„Åè", m: "ƒëi", t: 1, e: "iku", ti: "Ch√¢n b∆∞·ªõc tr√°i (**ÂΩ≥**) b∆∞·ªõc ph·∫£i (**‰∫ç**) l√† **H√ÄNH** ƒë·ªông ƒëi.", ta: "ƒêi Y nh∆∞ C·ª• (**Iku**) gi√†." },
            { k: "Êù•„Çã", h: "„Åè„Çã", m: "ƒë·∫øn", t: 3, ti: "C√¢y (**Êú®**) m·ªçc 2 nh√°nh (**‰∏∑**) b√°o hi·ªáu t∆∞∆°ng **LAI**.", ta: "**Cu R≈©** (**Kuru**) v√¨ ch·ªù m√£i m·ªõi ƒë·∫øn." },
            { k: "Â∏∞„Çã", h: "„Åã„Åà„Çã", m: "tr·ªü v·ªÅ", t: 1, e: "kaeru", ti: "C·∫ßm **ch·ªïi** (**Â∏ö**) qu√©t nh√† ƒë√≥n ch·ªìng **QUY** h·ªìi.", ta: "Mua **C√° ·∫æ** (**Kaeru**) mang v·ªÅ kho." },
            { k: "ÂÖ•„Çã", h: "„ÅØ„ÅÑ„Çã", m: "v√†o", t: 1, e: "hairu", ti: "Gi·ªëng c√°i l·ªÅu (**ÂÖ•**), ng∆∞·ªùi chui (nh·∫≠p) v√†o.", ta: "**H√£i** (**Hai**) qu√° n√™n **R·ªß** (**ru**) ch·∫°y v√†o." },
            { k: "Âá∫„Çã", h: "„Åß„Çã", m: "ra ngo√†i", t: 2, ti: "Hai ng·ªçn n√∫i (**Â±±**) ch·ªìng l√™n nhau **XU·∫§T** hi·ªán.", ta: "**ƒê√™** (**De**) v·ª° n∆∞·ªõc ch·∫£y **R·ªß** (**ru**) ra." },
            { k: "ÂÖ•„Çå„Çã", h: "„ÅÑ„Çå„Çã", m: "cho v√†o", t: 2, ti: "Nh√¢n (**‰∫∫**) l·ª±c ƒëem v√†o trong.", ta: "**Y** nh∆∞ **R·ªÉ** **R·ªß** (**Ireru**) v√†o." },
            { k: "Âá∫„Åô", h: "„Å†„Åô", m: "l·∫•y ra", t: 1, ti: "Hai n√∫i (**Â±±**) l·∫•y ƒë·ªì ra.", ta: "**ƒê√°** **S√π** (**Dasu**) l√¥ng." },
            { k: "Ê≠©„Åè", h: "„ÅÇ„Çã„Åè", m: "ƒëi b·ªô", t: 1, ti: "D·ª´ng l·∫°i (**Ê≠¢**) m·ªôt ch√∫t (**Â∞ë**) r·ªìi ƒëi **B·ªò**.", ta: "**A! R·ªß C√∫** (**Aruku**) ƒëi b·ªô." },
            { k: "Ëµ∞„Çã", h: "„ÅØ„Åó„Çã", m: "ch·∫°y", t: 1, e: "hashiru", ti: "Ng∆∞·ªùi **Th·ªï** (**Âúü**) ch√¢n to ch·∫°y **T·∫®U** tho√°t.", ta: "**H√° X√¨** (**Hashi**) h∆°i khi ch·∫°y." },
            { k: "‰πó„Çã", h: "„ÅÆ„Çã", m: "l√™n xe", t: 1, ti: "L√∫a (**Á¶æ**) ch·∫•t l√™n xe ƒë·ªÉ **TH·ª™A** k·∫ø.", ta: "**N√¥** (**No**) ƒë√πa **R·ªß** (**ru**) l√™n xe." },
            { k: "Èôç„Çä„Çã", h: "„Åä„Çä„Çã", m: "xu·ªëng xe", t: 2, ti: "Ch√¢n tr√°i (**Èòù**) b∆∞·ªõc xu·ªëng **GI√ÅNG** tr·∫ßn.", ta: "**√î! Ri** (**Ori**) xu·ªëng xe r·ªìi k√¨a." },
            { k: "Áôª„Çã", h: "„ÅÆ„Åº„Çã", m: "leo n√∫i", t: 1, ti: "ƒê·∫≠u (**Ë±Ü**) l√™n ƒë·ªânh n√∫i **ƒêƒÇNG** quang.", ta: "**N√¥** b·ªôc **B√≤** (**Nobo**) leo n√∫i." },
            { k: "Ê∏°„Çã", h: "„Çè„Åü„Çã", m: "bƒÉng qua", t: 1, ti: "C√≥ **N∆∞·ªõc** (**Ê∞µ**) th√¨ d√πng thuy·ªÅn **ƒê·ªò** nh·∫≠t.", ta: "**Wa! Ta** (**Wata**) bƒÉng qua ƒë∆∞·ªùng." },
            { k: "Êõ≤„Åå„Çã", h: "„Åæ„Åå„Çã", m: "r·∫Ω, qu·∫πo", t: 1, ti: "Ru·ªông (**Áî∞**) chia th√†nh t·ª´ng **KH√öC** quanh.", ta: "**Ma G√†** (**Maga**) r·∫Ω tr√°i." },
            { k: "ÁùÄ„Åè", h: "„Å§„Åè", m: "ƒë·∫øn n∆°i", t: 1, ti: "D√™ (**‚∫∂**) m·ªü M·∫Øt (**ÁõÆ**) th·∫•y ƒë·∫øn ƒë√≠ch (**TR∆Ø·ªöC**).", ta: "**X√π** (**Tsu**) l√¥ng **C√∫** (**ku**) khi ƒë·∫øn mu·ªôn." },
            { k: "ÊÄ•„Åê", h: "„ÅÑ„Åù„Åê", m: "v·ªôi, g·∫•p", t: 1, ti: "Tim (**ÂøÉ**) ƒë·∫≠p th√¨nh th·ªãch v√¨ kh·∫©n **C·∫§P**.", ta: "**I** nh∆∞ **S√¥** (**Iso**) c√¥ la ch·∫£y v√¨ v·ªôi." },
            { k: "Ê≠¢„ÇÄ", h: "„ÇÑ„ÇÄ", m: "t·∫°nh (m∆∞a)", t: 1, ti: "D·ª´ng l·∫°i (**Ê≠¢**) l√† h·∫øt, m∆∞a t·∫°nh.", ta: "**Da** (**Ya**) d·∫ª **M√π** (**mu**) m·ªãt khi t·∫°nh." },
            { k: "Âãï„Åè", h: "„ÅÜ„Åî„Åè", m: "di chuy·ªÉn", t: 1, ti: "D√πng **L·ª±c** (**Âäõ**) ƒë·∫©y v·∫≠t **N·∫∑ng** (**Èáç**) chuy·ªÉn **ƒê·ªòNG**.", ta: "**U G·ªì** (**Ugo**) gh·ªÅ kh√≥ di chuy·ªÉn." },
            { k: "ÂæÖ„Å§", h: "„Åæ„Å§", m: "ƒë·ª£i", t: 1, ti: "ƒêi (**ÂΩ≥**) ƒë·∫øn ch√πa (**ÂØ∫**) ƒë·ªÉ **ƒê√ÉI** (ƒë·ª£i).", ta: "**M√°** **T·ª±** (**Matsu**) ƒë·ª£i." },
            
            // 2. Daily Life
            { k: "È£ü„Åπ„Çã", h: "„Åü„Åπ„Çã", m: "ƒÉn", t: 2, ti: "Ng∆∞·ªùi (**‰∫∫**) t·ªët (**ËâØ**) m·ªõi c√≥ **TH·ª∞C** ph·∫©m.", ta: "**Ta B·ªÅ** (**Tabe**) s√™ ra ƒÉn." },
            { k: "È£≤„ÇÄ", h: "„ÅÆ„ÇÄ", m: "u·ªëng", t: 1, ti: "ƒÇn (**È£ü**) thi·∫øu (**Ê¨†**) n∆∞·ªõc ph·∫£i **·∫®M**.", ta: "**N√¥** (**No**) ƒë√πa v·ª° **M≈©** (**mu**)." },
            { k: "Âê∏„ÅÜ", h: "„Åô„ÅÜ", m: "h√∫t", t: 1, ti: "Mi·ªáng (**Âè£**) h√≠t v√†o k·ªãp (**Âèä**) l√† h√¥ **H·∫§P**.", ta: "**Su Su** (**Suu**) x√†o." },
            { k: "Á´ã„Å§", h: "„Åü„Å§", m: "ƒë·ª©ng", t: 1, ti: "Ng∆∞·ªùi ƒë·ª©ng (**Á´ã**) tr√™n ƒë·∫•t **L·∫¨P** nghi·ªáp.", ta: "**Ta T·ª±** (**Tatsu**) ƒë·ª©ng." },
            { k: "Â∫ß„Çã", h: "„Åô„Çè„Çã", m: "ng·ªìi", t: 1, ti: "Hai ng∆∞·ªùi (**‰∫∫**) ng·ªìi tr√™n ƒë·∫•t (**Âúü**) trong nh√† (**Âπø**) **T·ªåA** ƒë√†m.", ta: "**Su** **Wa** **R·ªß** (**Suwaru**) ng·ªìi." },
            { k: "ÂØù„Çã", h: "„Å≠„Çã", m: "ng·ªß", t: 2, ti: "V√†o nh√† (**ÂÆÄ**) n·∫±m ph·∫£n (**Áàø**) l√† **T·∫®M** cung.", ta: "**N·ªÉ** (**Ne**) t√¨nh m·ªõi ng·ªß." },
            { k: "Ëµ∑„Åç„Çã", h: "„Åä„Åç„Çã", m: "th·ª©c d·∫≠y", t: 2, ti: "Ch·∫°y (**Ëµ∞**) kh·ªèi gi∆∞·ªùng ƒë·ªÉ **KH·ªûI** ƒë·ªông.", ta: "**√î! K√¨** (**Oki**) l·∫°, d·∫≠y s·ªõm th·∫ø." },
            { k: "Êµ¥„Å≥„Çã", h: "„ÅÇ„Å≥„Çã", m: "t·∫Øm", t: 2, ti: "T·∫Øm ·ªü thung l≈©ng (**Ë∞∑**) c√≥ n∆∞·ªõc (**Ê∞µ**) **D·ª§C**.", ta: "**A! Bi** (**Abi**) ƒëi t·∫Øm." },
            { k: "Á£®„Åè", h: "„Åø„Åå„Åè", m: "ƒë√°nh, m√†i", t: 1, ti: "ƒê√° (**Áü≥**) **MA** s√°t c√¢y gai (**È∫ª**).", ta: "**Mi G√† C√∫** (**Migaku**) ƒë√°nh rƒÉng." },
            { k: "Ê¥ó„ÅÜ", h: "„ÅÇ„Çâ„ÅÜ", m: "r·ª≠a", t: 1, ti: "D√πng n∆∞·ªõc (**Ê∞µ**) **T·∫®Y** r·ª≠a tr∆∞·ªõc (**ÂÖà**).", ta: "**A! Rau** (**Arau**) c·∫ßn r·ª≠a." },
            { k: "Âàá„Çã", h: "„Åç„Çã", m: "c·∫Øt", t: 1, e: "kiru", ti: "7 (**‰∏É**) con dao (**ÂàÄ**) **THI·∫æT** s·∫Øc l·∫πm.", ta: "**Ki** (**Ki**) bo kh√¥ng cho m∆∞·ª£n dao." },
            { k: "ÁÑº„Åè", h: "„ÇÑ„Åè", m: "n∆∞·ªõng", t: 1, ti: "C√≥ l·ª≠a (**ÁÅ´**) m·ªõi **THI√äU** ƒë·ªët ƒë∆∞·ª£c.", ta: "**D·∫° C·ª•** (**Yaku**) th√≠ch ƒë·ªì n∆∞·ªõng." },
            { k: "Ê≥ä„Åæ„Çã", h: "„Å®„Åæ„Çã", m: "tr·ªç l·∫°i", t: 1, ti: "N∆∞·ªõc (**Ê∞µ**) tr·∫Øng (**ÁôΩ**) ·ªü b·∫øn **B·∫†C**.", ta: "**T√¥** m√¨ **M√†** **R·ªß** (**Tomaru**) tr·ªç l·∫°i." },
            { k: "‰ºë„ÇÄ", h: "„ÇÑ„Åô„ÇÄ", m: "ngh·ªâ ng∆°i", t: 1, ti: "Ng∆∞·ªùi (**‰∫ª**) d·ª±a v√†o c√¢y (**Êú®**) ngh·ªâ **H∆ØU**.", ta: "**Ya**! **S∆∞ M√π** (**Yasumu**) ƒëang ngh·ªâ." },

            // 3. Money
            { k: "Ë≤∑„ÅÜ", h: "„Åã„ÅÜ", m: "mua", t: 1, ti: "L∆∞·ªõi (**ÁΩí**) ch·ª•p ti·ªÅn (**Ë≤ù**) ƒë·ªÉ **M√ÉI**.", ta: "**Ca U** (**Kau**) s·∫ßu v√¨ mua h·ªõ." },
            { k: "Â£≤„Çã", h: "„ÅÜ„Çã", m: "b√°n", t: 1, ti: "K·∫ª sƒ© (**Â£´**) tr√πm khƒÉn ƒëi **M·∫†I** ch√¢n.", ta: "**U R≈©** (**Uru**) v√¨ b√°n ·∫ø." },
            { k: "Êâï„ÅÜ", h: "„ÅØ„Çâ„ÅÜ", m: "tr·∫£ ti·ªÅn", t: 1, ti: "Tay (**Êâå**) **PH·∫§T** √°o ra ƒëi sau khi tr·∫£.", ta: "**H·∫£? Rau** (**Harau**) ƒë·∫Øt th·∫ø √°?" },
            { k: "Ë≤∏„Åô", h: "„Åã„Åô", m: "cho m∆∞·ª£n", t: 1, ti: "ƒê·ªïi (**‰ª£**) ti·ªÅn (**Ë≤ù**) l·∫•y √¢n hu·ªá (**TH·∫¢I**).", ta: "**Ca** sƒ© **S√π** (**Kasu**) ti·ªÅn." },
            { k: "ÂÄü„Çä„Çã", h: "„Åã„Çä„Çã", m: "m∆∞·ª£n", t: 2, ti: "Ng∆∞·ªùi (**‰∫ª**) x∆∞a (**Êòî**) hay ƒëi **T√Å** t√∫c.", ta: "**Ca Ri L∆∞** (**Kariru**) th∆∞a ti·ªÅn n√™n m∆∞·ª£n." },
            { k: "Ëøî„Åô", h: "„Åã„Åà„Åô", m: "tr·∫£ l·∫°i", t: 1, ti: "Quay ng∆∞·ª£c (**PH·∫¢N**) l·∫°i tr·∫£ ƒë·ªì.", ta: "**Ca ·∫æ S√π** (**Kaesu**) n·ª£ ph·∫£i tr·∫£." },

            // 4. Objects
            { k: "Ë¶ã„Çã", h: "„Åø„Çã", m: "nh√¨n", t: 2, ti: "M·∫Øt (**ÁõÆ**) g·∫Øn ch√¢n (**ÂÑø**) ƒëi **KI·∫æN** t·∫≠p.", ta: "**Mi R·ªß** (**Miru**) nh√¨n g√¨?" },
            { k: "Èñã„Åë„Çã", h: "„ÅÇ„Åë„Çã", m: "m·ªü", t: 2, ti: "Hai tay m·ªü c·ªïng (**ÈñÄ**) **KHAI** tr∆∞∆°ng.", ta: "**A! K·ªá** (**Ake**) c·ª© m·ªü ƒëi." },
            { k: "Èñâ„ÇÅ„Çã", h: "„Åó„ÇÅ„Çã", m: "ƒë√≥ng", t: 2, ti: "ƒê√≥ng c·ª≠a (**ÈñÄ**) ƒë·ªÉ **B·∫æ** quan.", ta: "**Si M√™** (**Shime**) ƒë√≥ng c·ª≠a l√≤ng." },
            { k: "Êäº„Åô", h: "„Åä„Åô", m: "·∫•n, ƒë·∫©y", t: 1, ti: "Tay (**Êâå**) **√ÅP** ƒë·∫£o.", ta: "**√î! S∆∞** (**Osu**) ·∫•n chu√¥ng." },
            { k: "Âºï„Åè", h: "„Å≤„Åè", m: "k√©o", t: 1, ti: "Cung (**Âºì**) **D·∫™N** cƒÉng th·∫≥ng (**‰∏®**).", ta: "**Hi** h√≥p m√° **C·ª•** (**Hiku**) k√©o." },
            { k: "‰Ωú„Çã", h: "„Å§„Åè„Çã", m: "l√†m", t: 1, ti: "Ng∆∞·ªùi (**‰∫ª**) l√†m ra **T√ÅC** ph·∫©m.", ta: "**Xu C≈© R·ªß** (**Tsukuru**) l√†m ƒë·ªì gi·∫£." },
            { k: "‰Ωø„ÅÜ", h: "„Å§„Åã„ÅÜ", m: "s·ª≠ d·ª•ng", t: 1, ti: "Quan l·∫°i (**Âêè**) **S·ª¨** d·ª•ng l√≠nh.", ta: "**X√π C√°u** (**Tsukau**) khi b·ªã sai." },
            { k: "Áõ¥„Åô", h: "„Å™„Åä„Åô", m: "s·ª≠a ch·ªØa", t: 1, ti: "M·∫Øt (**ÁõÆ**) nh√¨n th·∫≥ng (**TR·ª∞C**) ƒë·ªÉ s·ª≠a.", ta: "**N√†o! S∆∞** (**Naosu**) s·ª≠a ƒëi." },
            { k: "Êé¢„Åô", h: "„Åï„Åå„Åô", m: "t√¨m ki·∫øm", t: 1, ti: "Tay (**Êâå**) v√©n c√¢y t√¨m **TH√ÅM** th√≠nh.", ta: "**Sa G√† S√π** (**Sagasu**) t√¨m th√≥c." },
            { k: "Ëß¶„Çã", h: "„Åï„Çè„Çã", m: "s·ªù, ch·∫°m", t: 1, ti: "S·ª´ng (**Ëßí**) l√† c∆° quan **X√öC** gi√°c.", ta: "**Sa** v√†o **Wa** **R·ªß** (**Sawaru**) s·ªù." },
            { k: "Ë≤º„Çã", h: "„ÅØ„Çã", m: "d√°n", t: 1, ti: "D√πng ti·ªÅn (**Ë≤ù**) mua **THI·∫æP** d√°n.", ta: "**H·∫£? R·ªß** (**Haru**) d√°n gi·∫•y?" },
            { k: "ÊíÆ„Çã", h: "„Å®„Çã", m: "ch·ª•p ·∫£nh", t: 1, ti: "Tay (**Êâå**) **TO√ÅT** v·∫ª chuy√™n nghi·ªáp.", ta: "**T√¥** son **R·ªß** (**Toru**) ch·ª•p ·∫£nh." },
            { k: "Êäï„Åí„Çã", h: "„Å™„Åí„Çã", m: "n√©m", t: 2, ti: "Tay (**Êâå**) c·∫ßm binh kh√≠ (**ÊÆ≥**) **ƒê·∫¶U** c∆°.", ta: "**N√° Gh√™ R·ªß** (**Nageru**) n√©m ƒë√°." },
            { k: "Áõó„ÇÄ", h: "„Å¨„Åô„ÇÄ", m: "ƒÉn tr·ªôm", t: 1, ti: "Ti·∫øp theo (**Ê¨°**) ƒëƒ©a (**Áöø**) b·ªã **ƒê·∫†O** ch√≠ch.", ta: "**Nu**√¥i **S∆∞ M√π** (**Nusumu**) ƒÉn tr·ªôm." },
            { k: "Ë¶ã„Å§„Åã„Çã", h: "„Åø„Å§„Åã„Çã", m: "ƒë∆∞·ª£c t√¨m th·∫•y", t: 1, ti: "M·∫Øt (**ÁõÆ**) d√≠nh (**‰ªò**) v√†o v·∫≠t.", ta: "**Mi** **Tsu** **Ka** **Ru**." },
            { k: "Ë¶ã„Å§„Åë„Çã", h: "„Åø„Å§„Åë„Çã", m: "t√¨m th·∫•y", t: 2, ti: "M·∫Øt (**ÁõÆ**) ki·∫øn (**KI·∫æN**) t·∫°o.", ta: "**Mi** **Tsu** **Ke** **Ru**." },

            // 5. Work & Study
            { k: "ÂÉç„Åè", h: "„ÅØ„Åü„Çâ„Åè", m: "l√†m vi·ªác", t: 1, ti: "Ng∆∞·ªùi (**‰∫ª**) d√πng s·ª©c (**Âäõ**) lao **ƒê·ªòNG**.", ta: "**H√† Ta Ra C≈©ng** (**Hataraku**) l√†m." },
            { k: "Âã§„ÇÅ„Çã", h: "„Å§„Å®„ÇÅ„Çã", m: "l√†m (cty)", t: 2, ti: "D√πng s·ª©c (**Âäõ**) chuy√™n **C·∫¶N**.", ta: "**Xu T√¥ M√™ R·ªß** (**Tsutomeru**) ƒëi l√†m." },
            { k: "Êïô„Åà„Çã", h: "„Åä„Åó„Åà„Çã", m: "d·∫°y", t: 2, ti: "ƒê√°nh (**Êîµ**) ƒë·ªÉ **GI√ÅO** d·ª•c.", ta: "**√î! Si √ä R·ªß** (**Oshieru**) d·∫°y √†?" },
            { k: "Áøí„ÅÜ", h: "„Å™„Çâ„ÅÜ", m: "h·ªçc (th·∫ßy)", t: 1, ti: "Chim v·ªó c√°nh (**ÁæΩ**) **T·∫¨P** bay.", ta: "**Na Ra U**·ªëng (**Narau**) n∆∞·ªõc." },
            { k: "Â≠¶„Å∂", h: "„Åæ„Å™„Å∂", m: "h·ªçc", t: 1, ti: "Tr·∫ª (**Â≠ê**) trong tr∆∞·ªùng **H·ªåC**.", ta: "**M√°! Na B·ª±** (**Manabu**) h·ªçc gi·ªèi." },
            { k: "Ë¶ö„Åà„Çã", h: "„Åä„Åº„Åà„Çã", m: "nh·ªõ", t: 2, ti: "Nh√¨n (**Ë¶ã**) ƒë·ªÉ **GI√ÅC** ng·ªô.", ta: "**√î! B·ªë √ä R·ªß** (**Oboeru**) nh·ªõ b√†i." },
            { k: "Âøò„Çå„Çã", h: "„Çè„Åô„Çå„Çã", m: "qu√™n", t: 2, ti: "Tim (**ÂøÉ**) ch·∫øt (**‰∫°**) l√† **VONG**.", ta: "**Wa! S∆∞ R·ªÉ R·ªß** (**Wasureru**) qu√™n." },
            { k: "ËÄÉ„Åà„Çã", h: "„Åã„Çì„Åå„Åà„Çã", m: "suy nghƒ©", t: 2, ti: "√îng gi√† (**ËÄÇ**) **KH·∫¢O** s√°t.", ta: "**C√°n G√† √ä R·ªß** (**Kangaeru**) nghƒ©." },
            { k: "Áü•„Çã", h: "„Åó„Çã", m: "bi·∫øt", t: 1, e: "shiru", ti: "M≈©i t√™n (**Áü¢**) tr√∫ng mi·ªáng (**Âè£**) l√† **TRI**.", ta: "**Si R·ªß** (**Shiru**) t√¨m hi·ªÉu." },
            { k: "ÂàÜ„Åã„Çã", h: "„Çè„Åã„Çã", m: "hi·ªÉu", t: 1, ti: "Dao (**ÂàÄ**) **PH√ÇN** chia t√°m (**ÂÖ´**) h∆∞·ªõng.", ta: "**Wa! C√° R·ªß** (**Wakaru**) hi·ªÉu." },
            { k: "Ë™ø„Åπ„Çã", h: "„Åó„Çâ„Åπ„Çã", m: "ƒëi·ªÅu tra", t: 2, ti: "N√≥i (**Ë®Ä**) l·ªùi **ƒêI·ªÄU** tra.", ta: "**Si Ra B√™ R·ªß** (**Shiraberu**)." },
            { k: "Êõ∏„Åè", h: "„Åã„Åè", m: "vi·∫øt", t: 1, ti: "Tay c·∫ßm b√∫t (**ËÅø**) vi·∫øt s√°ch (**TH∆Ø**).", ta: "**Ca C·ª©** (**Kaku**) vi·∫øt." },

            // 6. Communication
            { k: "Ë®Ä„ÅÜ", h: "„ÅÑ„ÅÜ", m: "n√≥i", t: 1, ti: "Mi·ªáng (**Âè£**) ph√°t **NG√îN**.", ta: "**I U** (**Iu**) th√¨ n√≥i ƒëi." },
            { k: "Ë©±„Åô", h: "„ÅØ„Å™„Åô", m: "n√≥i chuy·ªán", t: 1, ti: "L∆∞·ª°i (**Ëàå**) n√≥i l·ªùi (**Ë®Ä**) **THO·∫†I**.", ta: "**H·∫£? Na S√π** (**Hanasu**) n√≥i √†?" },
            { k: "ËÅû„Åè", h: "„Åç„Åè", m: "nghe", t: 1, ti: "Tai (**ËÄ≥**) ·ªü c·ªïng (**ÈñÄ**) nghe **VƒÇN**.", ta: "**Ki C·ª•** (**Kiku**) nghe ƒë√†i." },
            { k: "Á≠î„Åà„Çã", h: "„Åì„Åü„Åà„Çã", m: "tr·∫£ l·ªùi", t: 2, ti: "Tr√∫c (**Á´π**) h·ª£p (**Âêà**) l·∫°i **ƒê√ÅP**.", ta: "**C√¥ Ta √ä R·ªß** (**Kotaeru**) ƒë√°p." },
            { k: "Âëº„Å∂", h: "„Çà„Å∂", m: "g·ªçi", t: 1, ti: "Mi·ªáng (**Âè£**) tay (**Êâã**) **H√î** ho√°n.", ta: "**D√¥ B·ª±** (**Yobu**) g·ªçi nhau." },
            { k: "Á¨ë„ÅÜ", h: "„Çè„Çâ„ÅÜ", m: "c∆∞·ªùi", t: 1, ti: "Tr√∫c (**Á´π**) t∆∞∆°i tr·∫ª (**Â§≠**) **TI·∫æU**.", ta: "**Wa! Rau** (**Warau**) c∆∞·ªùi." },
            { k: "Ê≥£„Åè", h: "„Å™„Åè", m: "kh√≥c", t: 1, ti: "N∆∞·ªõc (**Ê∞µ**) m·∫Øt ƒë·ª©ng (**Á´ã**) **KH·∫§P**.", ta: "**Na C·ª•** (**Naku**) kh√≥c." },
            { k: "ÊÄí„Çã", h: "„Åä„Åì„Çã", m: "t·ª©c gi·∫≠n", t: 1, ti: "Tim (**ÂøÉ**) n√¥ l·ªá (**Â•¥**) ph·∫´n **N·ªò**.", ta: "**√î! C√¥ R·ªß** (**Okoru**) gi·∫≠n." },
            { k: "Âñú„Å∂", h: "„Çà„Çç„Åì„Å∂", m: "vui m·ª´ng", t: 1, ti: "Tr·ªëng ƒë√°nh c∆∞·ªùi **H·ª∂** h·∫£.", ta: "**D√¥ R·ªì C√¥ B·ª±** (**Yorokobu**) vui." },
            { k: "Âõ∞„Çã", h: "„Åì„Åæ„Çã", m: "kh√≥ khƒÉn", t: 1, ti: "C√¢y (**Êú®**) trong h·ªôp (**Âõó**) **KH·ªêN**.", ta: "**C√¥ Ma R·ªß** (**Komaru**) kh√≥." },
            { k: "Áñ≤„Çå„Çã", h: "„Å§„Åã„Çå„Çã", m: "m·ªát", t: 2, ti: "Da (**ÁöÆ**) b·ªçc x∆∞∆°ng, ·ªëm (**Áñí**) **B√å**.", ta: "**Xu C√† R·ªÉ R·ªß** (**Tsukareru**) m·ªát." },
            { k: "Ë¶ã„Åõ„Çã", h: "„Åø„Åõ„Çã", m: "cho xem", t: 2, ti: "Ki·∫øn (**Ë¶ã**) cho xem.", ta: "**Mi S√™ R·ªß** (**Miseru**)." },

            // 7. Clothing
            { k: "ÁùÄ„Çã", h: "„Åç„Çã", m: "m·∫∑c (√°o)", t: 2, ti: "D√™ (**‚∫∂**) m·ªü M·∫Øt (**ÁõÆ**) nh√¨n **TR∆Ø·ªöC**.", ta: "**Ki R·ªß** (**Kiru**) m·∫∑c." },
            { k: "Â±•„Åè", h: "„ÅØ„Åè", m: "ƒëi (gi√†y)", t: 1, ti: "X√°c (**Â∞∏**) ph·ª•c h·ªìi (**Âæ©**) **L√ù**.", ta: "**H√† C·ª•** (**Haku**) ƒëi gi√†y." },
            { k: "ËÑ±„Åê", h: "„Å¨„Åê", m: "c·ªüi", t: 1, ti: "Th·ªãt (**Êúà**) **THO√ÅT** kh·ªèi ƒë·ªì.", ta: "**N·ª•** c∆∞·ªùi **Gu** (**Nugu**) c·ªüi." },

            // 8. Giving/Helping
            { k: "‰∏ä„Åí„Çã", h: "„ÅÇ„Åí„Çã", m: "t·∫∑ng/cho", t: 2, ti: "ƒê∆∞a l√™n **TH∆Ø·ª¢NG**.", ta: "**A! Gh√™ R·ªß** (**Ageru**) t·∫∑ng." },
            { k: "Ë≤∞„ÅÜ", h: "„ÇÇ„Çâ„ÅÜ", m: "nh·∫≠n", t: 1, ti: "**Th·∫ø** (**‰∏ñ**) gian ban cho.", ta: "**M·ªè Ra U** (**Morau**) nh·∫≠n." },
            { k: "„Åè„Çå„Çã", h: "„Åè„Çå„Çã", m: "cho (m√¨nh)", t: 2, ti: "Cho t√¥i.", ta: "**Cu R√™ R·ªß** (**Kureru**)." },
            { k: "Êâã‰ºù„ÅÜ", h: "„Å¶„Å§„Å†„ÅÜ", m: "gi√∫p ƒë·ª°", t: 1, ti: "Tay (**TH·ª¶**) **TRUY·ªÄN** c√¥ng l·ª±c.", ta: "**T·∫øt T·ª± ƒê√¢u** (**Tetsudau**) gi√∫p." },
            { k: "Âä©„Åë„Çã", h: "„Åü„Åô„Åë„Çã", m: "c·ª©u gi√∫p", t: 2, ti: "S·ª©c (**Âäõ**) h·ªó **TR·ª¢** m·∫Øt (**ÁõÆ**).", ta: "**Ta S∆∞ K·ªá R·ªß** (**Tasukeru**)." },
            { k: "È†º„ÇÄ", h: "„Åü„ÅÆ„ÇÄ", m: "nh·ªù v·∫£", t: 1, ti: "Ki·∫øm ti·ªÅn (**Ë≤ù**) ·ª∑ **L·∫†I**.", ta: "**Ta N√¥ M≈©** (**Tanomu**) nh·ªù." },
            { k: "Ë™ò„ÅÜ", h: "„Åï„Åù„ÅÜ", m: "m·ªùi/r·ªß", t: 1, ti: "L·ªùi (**Ë®Ä**) **D·ª§** d·ªó.", ta: "**Xa X√¥i U** (**Sasou**) m·ªùi." },
            { k: "Ëøé„Åà„Çã", h: "„ÇÄ„Åã„Åà„Çã", m: "ƒë√≥n", t: 2, ti: "Ng·∫©ng cao ƒë·∫ßu **NGH√äNH**.", ta: "**M·ª• C√° √ä R·ªß** (**Mukaeru**)." },
            { k: "‰ºö„ÅÜ", h: "„ÅÇ„ÅÜ", m: "g·∫∑p", t: 1, ti: "H·ªôi (**‰ºö**) ng·ªô.", ta: "**A U** (**Au**) g·∫∑p." },

            // 9. Others
            { k: "„ÅÇ„Çã", h: "„ÅÇ„Çã", m: "c√≥ (v·∫≠t)", t: 1, ti: "S·ªü **H·ªÆU** trong tay.", ta: "**A! R·ªß** (**Aru**) c√≥." },
            { k: "„ÅÑ„Çã", h: "„ÅÑ„Çã", m: "c√≥ (ng∆∞·ªùi)", t: 2, ti: "X√°c (**Â∞∏**) c·ªï (**Âè§**) **C∆Ø** tr√∫.", ta: "**I** nh∆∞ **R·ªß** (**Iru**) c√≥." },
            { k: "Ê≠ª„Å¨", h: "„Åó„Å¨", m: "ch·∫øt", t: 1, ti: "Chi·ªÅu (**Â§ï**) dao (**Âåï**) **T·ª¨**.", ta: "**Si N·ªØ** (**Shinu**) ch·∫øt." },
            { k: "Áîü„Åæ„Çå„Çã", h: "„ÅÜ„Åæ„Çå„Çã", m: "sinh ra", t: 2, ti: "**SINH** s√¥i.", ta: "**U M√° R·ªÉ R·ªß** (**Umareru**) sinh." },
            { k: "Âßã„Åæ„Çã", h: "„ÅØ„Åò„ÇÅ„Çã", m: "b·∫Øt ƒë·∫ßu", t: 2, ti: "G√°i (**Â•≥**) kh·ªüi **TH·ª¶Y**.", ta: "**H·∫£? Chi M√™ R·ªß** (**Hajimeru**)." },
            { k: "ÁµÇ„Çè„Çã", h: "„Åä„Çè„Çã", m: "k·∫øt th√∫c", t: 1, ti: "T∆° (**Á≥∏**) m√πa ƒë√¥ng (**ÂÜ¨**) **CHUNG**.", ta: "**√î! Wa R·ªß** (**Owaru**) h·∫øt." },
            { k: "Ê±∫„ÇÅ„Çã", h: "„Åç„ÇÅ„Çã", m: "quy·∫øt ƒë·ªãnh", t: 2, ti: "N∆∞·ªõc (**Ê∞µ**) **QUY·∫æT** li·ªát.", ta: "**K√¨ M√™ R·ªß** (**Kimeru**) quy·∫øt." },
            { k: "Â§â„Åà„Çã", h: "„Åã„Åà„Çã", m: "thay ƒë·ªïi", t: 2, ti: "**BI·∫æN** h√¨nh.", ta: "**C√° ·∫æ R·ªß** (**Kaeru**) ƒë·ªïi." },
            { k: "Âí≤„Åè", h: "„Åï„Åè", m: "n·ªü (hoa)", t: 1, ti: "Mi·ªáng (**Âè£**) c∆∞·ªùi **TI·∫æU**.", ta: "**Sa C·ª•** (**Saku**) n·ªü." },
            { k: "Èôç„Çã", h: "„Åµ„Çã", m: "r∆°i (m∆∞a)", t: 1, ti: "M∆∞a **GI√ÅNG** xu·ªëng.", ta: "**Ph√π R·ªß** (**Furu**) r∆°i." },
            { k: "ÂΩπÁ´ã„Å§", h: "„ÇÑ„Åè„Å´„Åü„Å§", m: "c√≥ √≠ch", t: 1, ti: "Chi·∫øn **D·ªäCH** thi·∫øt **L·∫¨P**.", ta: "**Yaku** **Ni** **Tatsu**." },
            { k: "Ê≠å„ÅÜ", h: "„ÅÜ„Åü„ÅÜ", m: "h√°t", t: 1, ti: "Anh (**ÂÖÑ**) thi·∫øu (**Ê¨†**) **CA**.", ta: "**U Ta U** (**Utau**) h√°t." },
            { k: "ÈÅä„Å∂", h: "„ÅÇ„Åù„Å∂", m: "ch∆°i", t: 1, ti: "Tr·∫ª ƒëi (**Êñπ**) **DU** l·ªãch.", ta: "**A! X√¥ B·ª±** (**Asobu**) ch∆°i." },
            { k: "Ê≥≥„Åê", h: "„Åä„Çà„Åê", m: "b∆°i", t: 1, ti: "N∆∞·ªõc (**Ê∞µ**) vƒ©nh c·ª≠u (**V·ªäNH**).", ta: "**Ong D√¥ Gu** (**Oyogu**) b∆°i." },
            { k: "„Åô„Çã", h: "„Åô„Çã", m: "l√†m", t: 3, ti: "L√†m vi·ªác.", ta: "**S∆∞** (**Suru**) th·∫ßy l√†m." },
            { k: "„ÇÑ„Çã", h: "„ÇÑ„Çã", m: "l√†m/cho", t: 1, ti: "Th·ª±c hi·ªán.", ta: "**Ya** (**Yaru**) l√† l√†m." },
            { k: "Âôõ„ÇÄ", h: "„Åã„ÇÄ", m: "c·∫Øn, nhai", t: 1, ti: "Mi·ªáng (**Âè£**) **C·∫¢O**.", ta: "**C√° M√∫** (**Kamu**) c·∫Øn." },
            { k: "ÂΩπ„Å´Á´ã„Å§", h: "„ÇÑ„Åè„Å´„Åü„Å§", m: "c√≥ √≠ch", t: 1, ti: "Chi·∫øn **D·ªäCH** thi·∫øt **L·∫¨P**.", ta: "**Yaku Ni Tatsu**." },
            { k: "„Åã„Åã„Çã", h: "„Åã„Åã„Çã", m: "t·ªën (th·ªùi gian/ti·ªÅn)", t: 1, ti: "T·ªën ti·ªÅn.", ta: "**Ca Ca R·ªß** (**Kakaru**)." }
        ];

        // --- GROUPS ---
        const groupsConfig = [
            { title: "1. Nh√≥m Di Chuy·ªÉn üö∂‚úàÔ∏è", color: "blue", ids: ["Ë°å„Åè","Êù•„Çã","Â∏∞„Çã","ÂÖ•„Çã","Âá∫„Çã","ÂÖ•„Çå„Çã","Âá∫„Åô","Ê≠©„Åè","Ëµ∞„Çã","‰πó„Çã","Èôç„Çä„Çã","Áôª„Çã","Ê∏°„Çã","Êõ≤„Åå„Çã","ÁùÄ„Åè","ÊÄ•„Åê","Ê≠¢„ÇÄ","Âãï„Åè","ÂæÖ„Å§"] },
            { title: "2. Nh√≥m Sinh Ho·∫°t üè†üí§", color: "green", ids: ["È£ü„Åπ„Çã","È£≤„ÇÄ","Âê∏„ÅÜ","Á´ã„Å§","Â∫ß„Çã","ÂØù„Çã","Ëµ∑„Åç„Çã","Êµ¥„Å≥„Çã","Á£®„Åè","Ê¥ó„ÅÜ","Âàá„Çã","ÁÑº„Åè","Ê≥ä„Åæ„Çã","‰ºë„ÇÄ"] },
            { title: "3. Nh√≥m Mua B√°n üí∞üõçÔ∏è", color: "yellow", ids: ["Ë≤∑„ÅÜ","Â£≤„Çã","Êâï„ÅÜ","Ë≤∏„Åô","ÂÄü„Çä„Çã","Ëøî„Åô"] },
            { title: "4. Nh√≥m ƒê·ªì V·∫≠t üì¶üñêÔ∏è", color: "orange", ids: ["Ë¶ã„Çã","Èñã„Åë„Çã","Èñâ„ÇÅ„Çã","Êäº„Åô","Âºï„Åè","‰Ωú„Çã","‰Ωø„ÅÜ","Áõ¥„Åô","Êé¢„Åô","Ëß¶„Çã","Ë≤º„Çã","ÊíÆ„Çã","Êäï„Åí„Çã","Áõó„ÇÄ","Ë¶ã„Å§„Åã„Çã","Ë¶ã„Å§„Åë„Çã"] },
            { title: "5. Nh√≥m H·ªçc T·∫≠p üíºüìö", color: "teal", ids: ["ÂÉç„Åè","Âã§„ÇÅ„Çã","Êïô„Åà„Çã","Áøí„ÅÜ","Â≠¶„Å∂","Ë¶ö„Åà„Çã","Âøò„Çå„Çã","ËÄÉ„Åà„Çã","Áü•„Çã","ÂàÜ„Åã„Çã","Ë™ø„Åπ„Çã","Êõ∏„Åè"] },
            { title: "6. Nh√≥m Giao Ti·∫øp üó£Ô∏èüòä", color: "pink", ids: ["Ë®Ä„ÅÜ","Ë©±„Åô","ËÅû„Åè","Á≠î„Åà„Çã","Âëº„Å∂","Á¨ë„ÅÜ","Ê≥£„Åè","ÊÄí„Çã","Âñú„Å∂","Âõ∞„Çã","Áñ≤„Çå„Çã","Ë¶ã„Åõ„Çã"] },
            { title: "7. Nh√≥m Trang Ph·ª•c üëïüëü", color: "indigo", ids: ["ÁùÄ„Çã","Â±•„Åè","ËÑ±„Åê"] },
            { title: "8. Nh√≥m Cho/Nh·∫≠n üéÅü§ù", color: "purple", ids: ["‰∏ä„Åí„Çã","„ÇÇ„Çâ„ÅÜ","„Åè„Çå„Çã","Êâã‰ºù„ÅÜ","Âä©„Åë„Çã","È†º„ÇÄ","Ë™ò„ÅÜ","Ëøé„Åà„Çã","‰ºö„ÅÜ"] },
            { title: "9. Kh√°c üå∏‚è≥", color: "gray", ids: ["„ÅÇ„Çã","„ÅÑ„Çã","Ê≠ª„Å¨","Áîü„Åæ„Çå„Çã","Âßã„Åæ„Çã","ÁµÇ„Çè„Çã","Ê±∫„ÇÅ„Çã","Â§â„Åà„Çã","Âí≤„Åè","Èôç„Çã","ÂΩπÁ´ã„Å§","Ê≠å„ÅÜ","ÈÅä„Å∂","Ê≥≥„Åê","„Åô„Çã","„ÇÑ„Çã","Âôõ„ÇÄ","ÂΩπ„Å´Á´ã„Å§","„Åã„Åã„Çã"] }
        ];

        // --- CONJUGATION & RENDER LOGIC ---
        function conjugate(word, type, exc) {
            let h = word.h, stem = "";
            let f = { dict: h, masu: "", te: "", ta: "", nai: "", pot: "", vol: "", cond: "" };
            
            if (exc === "iku") { f.masu="„ÅÑ„Åç„Åæ„Åô"; f.te="„ÅÑ„Å£„Å¶"; f.ta="„ÅÑ„Å£„Åü"; f.nai="„ÅÑ„Åã„Å™„ÅÑ"; f.pot="„ÅÑ„Åë„Çã"; f.vol="„ÅÑ„Åì„ÅÜ"; f.cond="„ÅÑ„Åë„Å∞"; return f; }
            if (exc === "kiru") type=1;
            if (exc === "kaeru") type=1;
            if (exc === "hashiru") type=1;
            if (exc === "shiru") type=1;
            if (exc === "hairu") type=1;

            if (type === 3) {
                if (h === "„Åè„Çã") { f.masu="„Åç„Åæ„Åô"; f.te="„Åç„Å¶"; f.ta="„Åç„Åü"; f.nai="„Åì„Å™„ÅÑ"; f.pot="„Åì„Çâ„Çå„Çã"; f.vol="„Åì„Çà„ÅÜ"; f.cond="„Åè„Çå„Å∞"; }
                else if (h === "„Åô„Çã") { f.masu="„Åó„Åæ„Åô"; f.te="„Åó„Å¶"; f.ta="„Åó„Åü"; f.nai="„Åó„Å™„ÅÑ"; f.pot="„Åß„Åç„Çã"; f.vol="„Åó„Çà„ÅÜ"; f.cond="„Åô„Çå„Å∞"; }
            } else if (type === 2) {
                stem = h.slice(0, -1);
                f.masu=stem+"„Åæ„Åô"; f.te=stem+"„Å¶"; f.ta=stem+"„Åü"; f.nai=stem+"„Å™„ÅÑ"; f.pot=stem+"„Çâ„Çå„Çã"; f.vol=stem+"„Çà„ÅÜ"; f.cond=stem+"„Çå„Å∞";
            } else {
                let end = h.slice(-1); stem = h.slice(0, -1);
                let i="", n="", te="", ta="", e="", o="";
                switch(end) {
                    case '„ÅÜ': i='„ÅÑ'; n='„Çè'; te='„Å£„Å¶'; ta='„Å£„Åü'; e='„Åà'; o='„Åä'; break;
                    case '„Åè': i='„Åç'; n='„Åã'; te='„ÅÑ„Å¶'; ta='„ÅÑ„Åü'; e='„Åë'; o='„Åì'; break;
                    case '„Åê': i='„Åé'; n='„Åå'; te='„ÅÑ„Åß'; ta='„ÅÑ„Å†'; e='„Åí'; o='„Åî'; break;
                    case '„Åô': i='„Åó'; n='„Åï'; te='„Åó„Å¶'; ta='„Åó„Åü'; e='„Åõ'; o='„Åù'; break;
                    case '„Å§': i='„Å°'; n='„Åü'; te='„Å£„Å¶'; ta='„Å£„Åü'; e='„Å¶'; o='„Å®'; break;
                    case '„Å¨': i='„Å´'; n='„Å™'; te='„Çì„Åß'; ta='„Çì„Å†'; e='„Å≠'; o='„ÅÆ'; break;
                    case '„Å∂': i='„Å≥'; n='„Å∞'; te='„Çì„Åß'; ta='„Çì„Å†'; e='„Åπ'; o='„Åº'; break;
                    case '„ÇÄ': i='„Åø'; n='„Åæ'; te='„Çì„Åß'; ta='„Çì„Å†'; e='„ÇÅ'; o='„ÇÇ'; break;
                    case '„Çã': i='„Çä'; n='„Çâ'; te='„Å£„Å¶'; ta='„Å£„Åü'; e='„Çå'; o='„Çç'; break;
                }
                f.masu=stem+i+"„Åæ„Åô"; f.nai=stem+n+"„Å™„ÅÑ"; f.te=stem+te; f.ta=stem+ta; f.pot=stem+e+"„Çã"; f.cond=stem+e+"„Å∞"; f.vol=stem+o+"„ÅÜ";
            }
            return f;
        }

        function getExamples(word, forms) {
            const m = word.m.toLowerCase();
            return [
                { f: forms.dict, j: `${word.k}„ÄÇ`, r: `${word.h}.`, v: `(Th·ªÉ t·ª´ ƒëi·ªÉn) ${word.m}.` },
                { f: forms.masu, j: `ÊòéÊó•„ÄÅ${forms.masu}„ÄÇ`, r: `Ashita, ${forms.masu}.`, v: `Ng√†y mai t√¥i s·∫Ω ${m}.` },
                { f: forms.te, j: `„Å°„Çá„Å£„Å®${forms.te}„Åè„Å†„Åï„ÅÑ„ÄÇ`, r: `Chotto ${forms.te} kudasai.`, v: `Xin h√£y ${m} m·ªôt ch√∫t.` },
                { f: forms.ta, j: `Êò®Êó•„ÄÅ${forms.ta}„ÄÇ`, r: `Kin≈ç, ${forms.ta}.`, v: `H√¥m qua t√¥i ƒë√£ ${m}.` },
                { f: forms.nai, j: `„ÅÇ„Åæ„Çä${forms.nai}„ÄÇ`, r: `Amari ${forms.nai}.`, v: `T√¥i kh√¥ng hay ${m} l·∫Øm.` },
                { f: forms.pot, j: `ÁßÅ„ÅØ${forms.pot}„ÄÇ`, r: `Watashi wa ${forms.pot}.`, v: `T√¥i c√≥ th·ªÉ ${m}.` },
                { f: forms.vol, j: `‰∏ÄÁ∑í„Å´${forms.vol}„ÄÇ`, r: `Issho ni ${forms.vol}.`, v: `C√πng ${m} n√†o.` },
                { f: forms.cond, j: `„ÇÇ„Åó${forms.cond}„ÄÅ„ÅÑ„ÅÑ„Åß„Åô„ÄÇ`, r: `Moshi ${forms.cond}, ii desu.`, v: `N·∫øu ${m} th√¨ t·ªët.` }
            ];
        }

        let allWords = [];
        const colorMap = { blue: "bg-blue-100 border-blue-400 text-blue-800", green: "bg-green-100 border-green-400 text-green-800", yellow: "bg-yellow-100 border-yellow-400 text-yellow-800", orange: "bg-orange-100 border-orange-400 text-orange-800", teal: "bg-teal-100 border-teal-400 text-teal-800", pink: "bg-pink-100 border-pink-400 text-pink-800", indigo: "bg-indigo-100 border-indigo-400 text-indigo-800", purple: "bg-purple-100 border-purple-400 text-purple-800", gray: "bg-gray-100 border-gray-400 text-gray-800" };
        const btnColorMap = { blue: "bg-blue-500 hover:bg-blue-600", green: "bg-green-500 hover:bg-green-600", yellow: "bg-yellow-500 hover:bg-yellow-600", orange: "bg-orange-500 hover:bg-orange-600", teal: "bg-teal-500 hover:bg-teal-600", pink: "bg-pink-500 hover:bg-pink-600", indigo: "bg-indigo-500 hover:bg-indigo-600", purple: "bg-purple-500 hover:bg-purple-600", gray: "bg-gray-500 hover:bg-gray-600" };

        function renderContent() {
            const container = document.getElementById("content-area");
            container.innerHTML = "";
            groupsConfig.forEach(group => {
                const groupDiv = document.createElement("div");
                groupDiv.className = "bg-white rounded-lg shadow-md overflow-hidden mb-8";
                groupDiv.innerHTML = `<div class="${colorMap[group.color]} px-6 py-4 border-l-8 font-bold text-xl flex justify-between items-center"><span>${group.title}</span></div>`;
                const grid = document.createElement("div");
                grid.className = "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6";
                group.ids.forEach(kanji => {
                    const word = masterVerbList.find(w => w.k === kanji);
                    if(!word) return;
                    allWords.push(word);
                    const wordStr = encodeURIComponent(JSON.stringify(word));
                    const card = document.createElement("div");
                    card.className = "border border-gray-200 rounded-xl p-4 hover:shadow-lg transition duration-200 bg-white flex flex-col relative group";
                    card.innerHTML = `
                        <div class="flex justify-between items-start mb-3 border-b border-gray-100 pb-2">
                            <div><div class="text-3xl kanji-font font-bold text-gray-800">${word.k}</div><div class="text-sm text-gray-500 font-bold">${word.h}</div></div>
                            <div class="flex space-x-2">
                                <button onclick="openModal('${wordStr}')" class="bg-gray-100 hover:bg-indigo-100 text-indigo-600 p-2 rounded-full w-10 h-10 flex items-center justify-center shadow-sm transition"><i class="fas fa-list-ul"></i></button>
                                <button onclick="speak('${word.k}', '${word.h}')" class="${btnColorMap[group.color]} text-white p-2 rounded-full w-10 h-10 flex items-center justify-center shadow-md focus:outline-none transform active:scale-95 transition"><i class="fas fa-volume-up"></i></button>
                            </div>
                        </div>
                        <div class="mb-2"><span class="inline-block bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded font-bold mr-2 uppercase">${word.h}</span><span class="font-bold text-indigo-700 text-lg">${word.m}</span></div>
                        <div class="mt-auto bg-gray-50 rounded-lg p-3 text-sm space-y-2">
                            <div class="text-gray-700 leading-snug"><span class="font-semibold text-gray-900">üñºÔ∏è H√¨nh:</span> ${word.ti.replace(/\*\*(.*?)\*\*/g, '<span class="text-red-600 font-bold">$1</span>')}</div>
                            <div class="text-gray-700 leading-snug border-t border-gray-200 pt-2 mt-2"><span class="font-semibold text-gray-900">üîä √Çm:</span> ${word.ta.replace(/\*\*(.*?)\*\*/g, '<span class="text-blue-600 font-bold">$1</span>')}</div>
                        </div>
                    `;
                    grid.appendChild(card);
                });
                groupDiv.appendChild(grid);
                container.appendChild(groupDiv);
            });
        }

        function openModal(wordStr) {
            const word = JSON.parse(decodeURIComponent(wordStr));
            const forms = conjugate(word, word.t, word.e);
            const examples = getExamples(word, forms);
            document.getElementById("modal-kanji").innerText = word.k;
            document.getElementById("modal-hiragana").innerText = word.h;
            document.getElementById("modal-meaning").innerText = word.m;
            document.getElementById("modal-group").innerText = word.t === 1 ? "Nh√≥m 1 (Godan)" : (word.t === 2 ? "Nh√≥m 2 (Ichidan)" : "Nh√≥m 3 (B·∫•t quy t·∫Øc)");
            const btn = document.getElementById("modal-main-audio");
            btn.onclick = () => speak(word.k, word.h);
            const list = document.getElementById("conjugation-list");
            list.innerHTML = "";
            const labels = ["T·ª´ ƒëi·ªÉn", "Th·ªÉ „Åæ„Åô (L·ªãch s·ª±)", "Th·ªÉ „Å¶ (N·ªëi)", "Th·ªÉ „Åü (Qu√° kh·ª©)", "Th·ªÉ „Å™„ÅÑ (Ph·ªß ƒë·ªãnh)", "Kh·∫£ nƒÉng", "√ù ch√≠", "ƒêi·ªÅu ki·ªán"];
            examples.forEach((ex, i) => {
                const row = `
                <div class="bg-white border border-gray-200 rounded-lg p-4 hover:border-indigo-300 transition">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold uppercase text-gray-400 tracking-wider">${labels[i]}</span>
                        <div class="flex items-center">
                            <span class="text-xl font-bold text-indigo-700 kanji-font mr-3">${Object.values(forms)[i]}</span>
                            <button onclick="speak('${Object.values(forms)[i]}', '')" class="text-indigo-400 hover:text-indigo-600 bg-indigo-50 hover:bg-indigo-100 rounded-full w-8 h-8 flex items-center justify-center transition"><i class="fas fa-volume-up text-sm"></i></button>
                        </div>
                    </div>
                    <div class="bg-indigo-50 rounded p-3 text-sm relative group">
                        <div class="font-bold text-gray-800 kanji-font mb-1 text-lg">${ex.j}</div>
                        <div class="text-gray-500 text-xs italic mb-1">${ex.r}</div>
                        <div class="text-gray-700">${ex.v}</div>
                        <button onclick="speak('${ex.j}', '')" class="absolute top-2 right-2 text-indigo-400 hover:text-indigo-600 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-sm"><i class="fas fa-volume-up"></i></button>
                    </div>
                </div>`;
                list.innerHTML += row;
            });
            document.getElementById("conjugation-modal").classList.remove("hidden");
        }

        function closeModal() { document.getElementById("conjugation-modal").classList.add("hidden"); }
        function switchTab(m) {
            document.getElementById("learn-section").classList.toggle("hidden", m!=="learn");
            document.getElementById("quiz-section").classList.toggle("hidden", m!=="quiz");
            document.getElementById("tab-learn").className = m==="learn" ? "px-4 py-2 rounded-md text-sm font-bold transition bg-white text-indigo-900 shadow" : "px-4 py-2 rounded-md text-sm font-bold transition text-indigo-200";
            document.getElementById("tab-quiz").className = m==="quiz" ? "px-4 py-2 rounded-md text-sm font-bold transition bg-white text-indigo-900 shadow" : "px-4 py-2 rounded-md text-sm font-bold transition text-indigo-200";
            if(m==="quiz") nextQuestion();
        }

        let currentQ = null, score = 0;
        function nextQuestion() {
            document.getElementById("feedback-area").classList.add("hidden");
            document.getElementById("btn-check").classList.remove("hidden");
            document.getElementById("btn-next").classList.add("hidden");
            document.getElementById("quiz-input").value = "";
            document.getElementById("quiz-input").disabled = false;
            document.getElementById("quiz-input").focus();
            
            // Remove duplicates from allWords to ensure fair random selection
            const uniqueWords = Array.from(new Set(allWords.map(a => a.k))).map(k => allWords.find(a => a.k === k));
            currentQ = uniqueWords[Math.floor(Math.random() * uniqueWords.length)];
            
            document.getElementById("quiz-kanji").innerText = currentQ.k;
            document.getElementById("quiz-meaning").innerText = currentQ.m;
            document.getElementById("quiz-kanji").className = "text-6xl kanji-font font-bold text-gray-800 mb-4 transition-all";
        }

        function checkAnswer() {
            const val = document.getElementById("quiz-input").value.trim();
            if(!val) return;
            document.getElementById("quiz-input").disabled = true;
            const correct = val === currentQ.h;
            const k = document.getElementById("quiz-kanji");
            if(correct) {
                score+=10; k.className = "text-6xl kanji-font font-bold text-green-600 mb-4 transition-all correct-anim";
                document.getElementById("feedback-title").innerHTML = '<i class="fas fa-check-circle text-green-600 mr-2"></i> Ch√≠nh x√°c!';
                document.getElementById("feedback-title").className = "font-bold text-lg mb-2 flex items-center text-green-700";
            } else {
                score=Math.max(0, score-5); k.className = "text-6xl kanji-font font-bold text-red-600 mb-4 transition-all wrong-anim";
                document.getElementById("feedback-title").innerHTML = '<i class="fas fa-times-circle text-red-600 mr-2"></i> Sai r·ªìi!';
                document.getElementById("feedback-title").className = "font-bold text-lg mb-2 flex items-center text-red-700";
            }
            document.getElementById("score-display").innerText = score;
            document.getElementById("correct-answer").innerText = currentQ.h;
            document.getElementById("quiz-tip-img").innerHTML = `<span class="font-bold text-gray-700">üñºÔ∏è H√¨nh:</span> ` + currentQ.ti.replace(/\*\*(.*?)\*\*/g, '<span class="text-red-600 font-bold">$1</span>');
            document.getElementById("quiz-tip-sound").innerHTML = `<span class="font-bold text-gray-700">üîä √Çm:</span> ` + currentQ.ta.replace(/\*\*(.*?)\*\*/g, '<span class="text-blue-600 font-bold">$1</span>');
            
            document.getElementById("feedback-area").classList.remove("hidden");
            document.getElementById("btn-check").classList.add("hidden");
            document.getElementById("btn-next").classList.remove("hidden");
            document.getElementById("btn-next").focus();
        }

        function playCurrentAudio() { if(currentQ) speak(currentQ.k, currentQ.h); }
        function speak(t, h) {
            if('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(t);
                u.lang = 'ja-JP'; u.rate = 0.9;
                window.speechSynthesis.speak(u);
            }
        }
        document.getElementById("quiz-input").addEventListener("keypress", function(e) { if(e.key==="Enter") checkAnswer(); });
        document.addEventListener('DOMContentLoaded', renderContent);
    </script>
</body>
</html>
